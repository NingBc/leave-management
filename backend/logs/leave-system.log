2026-01-06 11:06:26.428 INFO  com.leave.system.LeaveSystemApplication - Starting LeaveSystemApplication using Java 17.0.6 with PID 8112 (/Users/cccc/.gemini/antigravity/scratch/fullstack_leave_system/backend/target/classes started by cccc in /Users/cccc/.gemini/antigravity/scratch/fullstack_leave_system/backend)
2026-01-06 11:06:26.429 DEBUG com.leave.system.LeaveSystemApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 11:06:26.429 INFO  com.leave.system.LeaveSystemApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-06 11:06:26.936 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-06 11:06:26.939 INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-8080"]
2026-01-06 11:06:26.940 INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-06 11:06:26.940 INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2026-01-06 11:06:26.962 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-06 11:06:26.962 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 514 ms
2026-01-06 11:06:27.026 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@270a620'
2026-01-06 11:06:27.026 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@4dfe8b37'
2026-01-06 11:06:27.078 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/.gemini/antigravity/scratch/fullstack_leave_system/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 11:06:27.085 ERROR c.baomidou.mybatisplus.core.MybatisConfiguration - mapper[com.leave.system.mapper.LeaveRecordMapper.insertRecord] is ignored, because it exists, maybe from xml file
2026-01-06 11:06:27.086 ERROR c.baomidou.mybatisplus.core.MybatisConfiguration - mapper[com.leave.system.mapper.LeaveRecordMapper.updateRecord] is ignored, because it exists, maybe from xml file
2026-01-06 11:06:27.095 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/.gemini/antigravity/scratch/fullstack_leave_system/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 11:06:27.103 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/.gemini/antigravity/scratch/fullstack_leave_system/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 11:06:27.112 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/.gemini/antigravity/scratch/fullstack_leave_system/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 11:06:27.121 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/.gemini/antigravity/scratch/fullstack_leave_system/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 11:06:27.128 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/.gemini/antigravity/scratch/fullstack_leave_system/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 11:06:27.138 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/.gemini/antigravity/scratch/fullstack_leave_system/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 11:06:27.145 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:10
2026-01-06 11:06:27.157 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 11:06:27.277 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21d9cd04
2026-01-06 11:06:27.278 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 11:06:27.325 DEBUG com.leave.system.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-01-06 11:06:27.444 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 11:06:27.453 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 11:06:27.465 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 11:06:27.481 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 11:06:27.481 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 11:06:27.483 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 1 1 1 ?
2026-01-06 11:06:27.484 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 11:06:27.484 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 23 ? * SUN
2026-01-06 11:06:27.484 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 11:06:27.567 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 11:06:27.661 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@18faaff6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2a9e754e, org.springframework.security.web.context.SecurityContextHolderFilter@797f97e3, org.springframework.security.web.header.HeaderWriterFilter@7769d9b6, org.springframework.web.filter.CorsFilter@760a2b6e, org.springframework.security.web.authentication.logout.LogoutFilter@76134b9b, com.leave.system.security.JwtAuthenticationFilter@423f8a73, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@77cd235b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@302da330, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@20a9f5fb, org.springframework.security.web.session.SessionManagementFilter@595ec862, org.springframework.security.web.access.ExceptionTranslationFilter@fee881, org.springframework.security.web.access.intercept.AuthorizationFilter@40538370]
2026-01-06 11:06:27.776 INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-8080"]
2026-01-06 11:06:27.779 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2026-01-06 11:07:27.785 WARN  o.s.scheduling.concurrent.ThreadPoolTaskScheduler - Timed out while waiting for executor 'taskScheduler' to terminate
2026-01-06 11:07:27.790 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-06 11:07:27.810 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-06 11:07:27.823 INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-06 11:07:27.832 ERROR o.s.b.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2026-01-06 17:15:26.581 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - Starting LeaveExpiryBugTest using Java 17.0.6 with PID 27919 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:15:26.582 DEBUG com.leave.system.scheduled.LeaveExpiryBugTest - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:15:26.582 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - The following 1 profile is active: "test"
2026-01-06 17:15:27.168 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@613f7eb7'
2026-01-06 17:15:27.169 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@773c2214'
2026-01-06 17:15:27.238 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:15:27.254 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:15:27.264 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:15:27.277 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:15:27.287 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:15:27.296 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:15:27.315 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:15:27.322 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:12
2026-01-06 17:15:27.333 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:15:27.449 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e2b9f53
2026-01-06 17:15:27.450 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:15:27.583 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:15:27.590 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:15:27.599 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:15:27.618 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:15:27.618 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:15:27.621 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:15:27.621 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:15:27.621 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:15:27.621 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:15:27.732 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:15:27.811 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b7c4734, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2f6e92ca, org.springframework.security.web.context.SecurityContextHolderFilter@32328dc4, org.springframework.security.web.header.HeaderWriterFilter@1f5d7fd5, org.springframework.web.filter.CorsFilter@380fdcf2, org.springframework.security.web.authentication.logout.LogoutFilter@1b25d695, com.leave.system.security.JwtAuthenticationFilter@60c96eb4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@21540255, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a7469ca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@114b203, org.springframework.security.web.session.SessionManagementFilter@29519337, org.springframework.security.web.access.ExceptionTranslationFilter@7c8df667, org.springframework.security.web.access.intercept.AuthorizationFilter@5c997de8]
2026-01-06 17:15:27.970 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - Started LeaveExpiryBugTest in 1.548 seconds (process running for 1.905)
2026-01-06 17:15:27.971 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:15:27.971 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:15:28.346 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:15:28.347 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 9928339(Long), bug_repro_9928339(String), password(String), Bug Repro(String), 2020-01-01(LocalDate), 2020-01-01(LocalDate), ACTIVE(String)
2026-01-06 17:15:28.359 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:15:28.361 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 9928339, 'bug_repro_9928339', 'password', 'Bug Repro', 2020-01-01, 2020-01-01, 'ACTIVE' )

2026-01-06 17:15:28.362 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:15:28.362 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9928339(Long)
2026-01-06 17:15:28.369 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:15:28.369 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9928339 AND deleted = 0

2026-01-06 17:15:28.370 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:15:28.370 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 9928339(Long), 2026(Integer)
2026-01-06 17:15:28.377 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:15:28.377 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 9928339 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:15:28.377 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:15:28.377 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 9928339(Long), 2026(Integer)
2026-01-06 17:15:28.382 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:15:28.382 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 9928339 AND year = 2026

2026-01-06 17:15:28.382 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:15:28.382 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 9928339(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:15:28.392 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:15:28.393 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (9928339, 2026, 6, 5.0, 6, 0.0, 0, 0, 0)

2026-01-06 17:15:28.393 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 9928339 year 2026
2026-01-06 17:15:28.407 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:15:28.407 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 9928339(Long), 2026(Integer)
2026-01-06 17:15:28.412 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:15:28.412 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 9928339 AND year = 2026)

2026-01-06 17:15:28.413 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:15:28.414 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 9928339(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0(BigDecimal), 0(BigDecimal), 0.0(BigDecimal), 173(Long)
2026-01-06 17:15:28.425 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:15:28.425 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=9928339, year=2026, social_seniority=6, standard_quota=5.0, days_employed=6, actual_quota=0, last_year_balance=0, current_year_used=0.0 WHERE id=173 AND deleted=0

2026-01-06 17:15:28.426 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:15:28.426 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 9928339(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 7.0(BigDecimal), CARRY_OVER(String), 2026-12-31(LocalDate), 2025-07-06T17:15:28.425906(LocalDateTime)
2026-01-06 17:15:28.436 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:15:28.436 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 453, 9928339, 2026-01-01, 2026-01-01, 7.0, 'CARRY_OVER', 2026-12-31, 2025-07-06T17:15:28.425906 )

2026-01-06 17:15:28.436 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:15:28.437 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 9928339(Long), 2026-05-01(LocalDate), 2026-05-02(LocalDate), -2.0(BigDecimal), LEAVE(String), 2026-12-31(LocalDate), 2025-08-06T17:15:28.436514(LocalDateTime)
2026-01-06 17:15:28.448 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:15:28.448 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 454, 9928339, 2026-05-01, 2026-05-02, -2.0, 'LEAVE', 2026-12-31, 2025-08-06T17:15:28.436514 )

2026-01-06 17:15:28.448 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2026 (Target Expiry: 2026-12-31)
2026-01-06 17:15:28.449 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:15:28.449 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2026(Integer)
2026-01-06 17:15:28.458 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 36
2026-01-06 17:15:28.458 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2026 AND deleted = 0

2026-01-06 17:15:28.458 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.459 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.463 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.463 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.464 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 1: 0
2026-01-06 17:15:28.464 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 1: 0
2026-01-06 17:15:28.464 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.464 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.469 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.469 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.470 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.470 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.475 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.475 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.475 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.475 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 1(Long)
2026-01-06 17:15:28.480 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.480 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.480 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.480 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.487 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:15:28.488 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.488 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 2: 5.0 + 0 extra = 5.0
2026-01-06 17:15:28.488 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2: 5.0
2026-01-06 17:15:28.488 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.488 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.493 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.493 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.493 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.494 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.499 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.499 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.500 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.500 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2(Long)
2026-01-06 17:15:28.504 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.504 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.505 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:15:28.505 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 2(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -5.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:15:28.514 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:15:28.514 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (2, 2026-12-31, 2026-12-31, -5.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:15:28.514 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 5.0 days for user 2 (target expiry date: 2026-12-31)
2026-01-06 17:15:28.514 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.515 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.520 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:15:28.520 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.520 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 3: 7.0 + 0 extra = 7.0
2026-01-06 17:15:28.520 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3: 7.0
2026-01-06 17:15:28.521 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.521 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.526 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.527 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.527 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.527 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.533 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.533 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.533 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.533 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3(Long)
2026-01-06 17:15:28.539 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.539 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.540 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:15:28.540 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 3(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -7.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:15:28.550 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:15:28.550 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (3, 2026-12-31, 2026-12-31, -7.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:15:28.551 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 7.0 days for user 3 (target expiry date: 2026-12-31)
2026-01-06 17:15:28.551 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.551 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.556 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:15:28.556 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.556 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4: 3.0 + 0 extra = 3.0
2026-01-06 17:15:28.556 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4: 3.0
2026-01-06 17:15:28.556 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.556 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.653 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.653 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.653 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.653 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.657 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.657 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.657 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.658 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4(Long)
2026-01-06 17:15:28.662 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.663 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.664 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:15:28.664 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 4(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -3.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:15:28.675 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:15:28.675 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (4, 2026-12-31, 2026-12-31, -3.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:15:28.675 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 3.0 days for user 4 (target expiry date: 2026-12-31)
2026-01-06 17:15:28.676 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.676 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.683 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:15:28.683 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.683 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 5: 3.0 + 0 extra = 3.0
2026-01-06 17:15:28.683 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 5: 3.0
2026-01-06 17:15:28.684 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.684 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.688 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.688 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.689 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.689 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.693 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.693 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.694 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.694 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 5(Long)
2026-01-06 17:15:28.699 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.699 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.700 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:15:28.700 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 5(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -3.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:15:28.710 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:15:28.711 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (5, 2026-12-31, 2026-12-31, -3.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:15:28.711 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 3.0 days for user 5 (target expiry date: 2026-12-31)
2026-01-06 17:15:28.711 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.711 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.716 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.716 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.716 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 6: 0
2026-01-06 17:15:28.716 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6: 0
2026-01-06 17:15:28.716 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.717 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.721 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.721 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.722 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.722 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.727 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.727 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.727 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.727 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6(Long)
2026-01-06 17:15:28.732 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.732 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.732 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.732 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.736 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.736 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.736 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 7: 0
2026-01-06 17:15:28.737 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 7: 0
2026-01-06 17:15:28.737 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.737 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.742 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.742 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.742 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.742 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.751 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.751 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.751 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.751 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 7(Long)
2026-01-06 17:15:28.758 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.758 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.758 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.759 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.763 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.764 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.764 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 8: 0
2026-01-06 17:15:28.764 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 8: 0
2026-01-06 17:15:28.764 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.764 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.768 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.768 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.769 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.769 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.774 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.775 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.775 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.775 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 8(Long)
2026-01-06 17:15:28.780 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.780 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.780 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.780 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.785 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.785 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.785 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 9: 0
2026-01-06 17:15:28.785 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 9: 0
2026-01-06 17:15:28.786 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.786 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.791 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.791 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.791 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.792 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.797 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.797 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.797 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.798 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 9(Long)
2026-01-06 17:15:28.802 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.802 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.802 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.802 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.807 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.807 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.807 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 10: 0
2026-01-06 17:15:28.807 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 10: 0
2026-01-06 17:15:28.808 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.808 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.813 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.813 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.813 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.813 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.818 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.819 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.819 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.819 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 10(Long)
2026-01-06 17:15:28.824 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.824 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.825 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.825 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.831 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.831 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.831 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 11: 0
2026-01-06 17:15:28.831 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 11: 0
2026-01-06 17:15:28.831 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.831 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.836 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.836 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.836 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.836 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.842 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.842 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.842 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.842 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 11(Long)
2026-01-06 17:15:28.849 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.849 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.849 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.849 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.859 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.859 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.859 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 12: 0
2026-01-06 17:15:28.859 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 12: 0
2026-01-06 17:15:28.859 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.859 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.864 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.864 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.864 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.864 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.871 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.871 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.871 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.871 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 12(Long)
2026-01-06 17:15:28.876 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.876 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.876 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.876 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.880 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.880 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.880 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 13: 0
2026-01-06 17:15:28.880 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 13: 0
2026-01-06 17:15:28.880 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.881 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.886 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.886 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.887 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.887 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.894 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.894 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.894 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.894 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 13(Long)
2026-01-06 17:15:28.899 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.899 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.899 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.899 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.907 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.907 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.907 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 14: 0
2026-01-06 17:15:28.907 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 14: 0
2026-01-06 17:15:28.907 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.907 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.913 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.913 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.913 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.913 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.918 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.918 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.918 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.918 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 14(Long)
2026-01-06 17:15:28.923 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.923 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.924 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.924 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.928 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.928 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.928 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 15: 0
2026-01-06 17:15:28.928 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 15: 0
2026-01-06 17:15:28.928 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.929 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.933 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.933 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.933 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.934 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.939 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.939 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.939 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.939 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 15(Long)
2026-01-06 17:15:28.944 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.944 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.944 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.944 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.951 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.951 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.952 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 16: 0
2026-01-06 17:15:28.952 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 16: 0
2026-01-06 17:15:28.952 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.952 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.957 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.957 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.957 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.957 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.962 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.962 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.963 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.963 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 16(Long)
2026-01-06 17:15:28.967 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.967 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.967 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.967 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.972 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.972 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.972 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 17: 0
2026-01-06 17:15:28.972 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 17: 0
2026-01-06 17:15:28.972 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.972 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.977 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:28.978 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.978 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:28.978 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.982 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:28.982 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:28.982 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:28.982 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 17(Long)
2026-01-06 17:15:28.991 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:28.991 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:28.991 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:28.991 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:28.995 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:28.996 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:28.996 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 18: 0
2026-01-06 17:15:28.996 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 18: 0
2026-01-06 17:15:28.996 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:28.996 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.001 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.001 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.001 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.001 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.007 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.007 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.007 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.007 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 18(Long)
2026-01-06 17:15:29.013 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.013 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.013 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.013 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.018 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.018 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.018 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 19: 0
2026-01-06 17:15:29.018 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 19: 0
2026-01-06 17:15:29.018 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.018 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.022 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.022 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.022 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.022 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.028 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.028 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.028 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.028 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 19(Long)
2026-01-06 17:15:29.038 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.038 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.038 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.038 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.044 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.044 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.044 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 20: 0
2026-01-06 17:15:29.044 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 20: 0
2026-01-06 17:15:29.044 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.044 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.052 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.052 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.052 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.052 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.058 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.058 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.058 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.058 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 20(Long)
2026-01-06 17:15:29.063 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.063 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.063 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.063 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.069 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.069 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.069 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 21: 0
2026-01-06 17:15:29.069 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 21: 0
2026-01-06 17:15:29.069 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.069 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.081 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.081 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.081 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.081 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.173 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.173 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.173 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.173 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 21(Long)
2026-01-06 17:15:29.179 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.180 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.180 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.180 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.190 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.190 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.190 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 22: 0
2026-01-06 17:15:29.190 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 22: 0
2026-01-06 17:15:29.191 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.191 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.197 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.197 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.198 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.198 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.205 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.205 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.205 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.205 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 22(Long)
2026-01-06 17:15:29.210 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.210 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.210 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.210 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.216 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.216 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.216 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 23: 0
2026-01-06 17:15:29.216 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 23: 0
2026-01-06 17:15:29.216 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.216 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.221 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.221 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.221 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.221 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.225 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.225 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.225 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.225 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 23(Long)
2026-01-06 17:15:29.232 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.232 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.232 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.232 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.238 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.238 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.238 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 24: 0
2026-01-06 17:15:29.238 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 24: 0
2026-01-06 17:15:29.238 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.238 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.247 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.247 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.247 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.247 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.252 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.252 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.252 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.252 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 24(Long)
2026-01-06 17:15:29.258 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.259 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.259 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.259 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.265 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.267 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.267 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 25: 0
2026-01-06 17:15:29.267 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 25: 0
2026-01-06 17:15:29.267 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.268 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.273 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.273 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.273 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.273 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.277 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.277 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.277 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.277 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 25(Long)
2026-01-06 17:15:29.284 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.284 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.284 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.285 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.290 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.290 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.290 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 26: 0
2026-01-06 17:15:29.290 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 26: 0
2026-01-06 17:15:29.290 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.290 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.296 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.296 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.296 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.296 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.302 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.302 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.302 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.302 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 26(Long)
2026-01-06 17:15:29.307 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.307 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.307 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.307 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.312 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.312 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.312 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 27: 0
2026-01-06 17:15:29.312 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 27: 0
2026-01-06 17:15:29.312 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.313 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.317 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.317 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.317 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.317 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.324 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.324 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.324 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.324 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 27(Long)
2026-01-06 17:15:29.328 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.328 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.328 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.328 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.333 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.336 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.336 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 28: 0
2026-01-06 17:15:29.336 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 28: 0
2026-01-06 17:15:29.336 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.336 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.342 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.342 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.342 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.342 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.349 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.349 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.349 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.349 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 28(Long)
2026-01-06 17:15:29.354 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.355 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.355 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.355 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.361 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.361 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.361 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 29: 0
2026-01-06 17:15:29.361 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 29: 0
2026-01-06 17:15:29.361 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.361 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.366 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.366 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.366 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.366 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.373 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.373 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.373 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.373 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 29(Long)
2026-01-06 17:15:29.378 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.378 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.378 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.378 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.384 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.384 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.384 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 30: 0
2026-01-06 17:15:29.384 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 30: 0
2026-01-06 17:15:29.384 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.385 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.390 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.390 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.390 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.390 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.406 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.406 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.406 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.406 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 30(Long)
2026-01-06 17:15:29.413 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.413 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.413 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.413 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.417 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.417 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.417 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 31: 0
2026-01-06 17:15:29.418 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 31: 0
2026-01-06 17:15:29.418 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.418 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.422 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.422 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.423 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.423 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.428 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.428 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.428 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.428 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 31(Long)
2026-01-06 17:15:29.433 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.433 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.433 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.433 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.438 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.438 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.438 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 32: 0
2026-01-06 17:15:29.438 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 32: 0
2026-01-06 17:15:29.438 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.438 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.442 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.442 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.442 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.442 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.450 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.450 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.450 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.450 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 32(Long)
2026-01-06 17:15:29.457 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.457 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.457 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.457 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.463 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:15:29.463 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.463 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 33: 4.0 + 0 extra = 4.0
2026-01-06 17:15:29.463 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 4.0
2026-01-06 17:15:29.463 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.463 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.469 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.469 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.469 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.469 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.474 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.474 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.474 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.474 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:15:29.479 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.479 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.480 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:15:29.480 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 33(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -4.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:15:29.490 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:15:29.491 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (33, 2026-12-31, 2026-12-31, -4.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:15:29.491 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 4.0 days for user 33 (target expiry date: 2026-12-31)
2026-01-06 17:15:29.491 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.491 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.497 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.497 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.497 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 34: 0
2026-01-06 17:15:29.497 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 34: 0
2026-01-06 17:15:29.497 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.497 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.501 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.501 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.501 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.501 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.507 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.507 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.507 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.507 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 34(Long)
2026-01-06 17:15:29.518 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.518 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.518 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.518 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.525 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:15:29.526 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.526 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 35: 0
2026-01-06 17:15:29.526 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 35: 0
2026-01-06 17:15:29.526 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.526 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.531 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.531 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.531 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.531 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.535 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.535 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.535 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.535 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 35(Long)
2026-01-06 17:15:29.542 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.542 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.542 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:15:29.542 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 9928339(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.547 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:15:29.547 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9928339 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:15:29.547 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 9928339: 7.0 + 0 extra = 7.0
2026-01-06 17:15:29.547 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 9928339: 7.0
2026-01-06 17:15:29.548 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:15:29.548 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 9928339(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.553 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:15:29.553 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 9928339 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.553 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:15:29.553 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 9928339(Long), 2026-12-31(LocalDate)
2026-01-06 17:15:29.558 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:15:29.558 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 9928339 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:15:29.558 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:15:29.558 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 9928339(Long)
2026-01-06 17:15:29.567 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:15:29.567 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 9928339 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:15:29.567 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:15:29.567 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 9928339(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -7.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:15:29.579 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:15:29.580 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (9928339, 2026-12-31, 2026-12-31, -7.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:15:29.580 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 7.0 days for user 9928339 (target expiry date: 2026-12-31)
2026-01-06 17:15:29.580 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2026 completed: 6 users affected, 29.0 total days expired
2026-01-06 17:15:29.581 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:15:29.581 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 9928339(Long), EXPIRED(String)
2026-01-06 17:15:29.585 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 0
2026-01-06 17:15:29.585 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 9928339 AND type = 'EXPIRED')

2026-01-06 17:17:23.403 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - Starting LeaveExpiryBugTest using Java 17.0.6 with PID 28138 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:17:23.404 DEBUG com.leave.system.scheduled.LeaveExpiryBugTest - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:17:23.404 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - The following 1 profile is active: "test"
2026-01-06 17:17:24.143 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@613f7eb7'
2026-01-06 17:17:24.143 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@773c2214'
2026-01-06 17:17:24.215 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:17:24.232 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:17:24.241 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:17:24.254 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:17:24.263 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:17:24.275 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:17:24.288 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:17:24.297 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:0
2026-01-06 17:17:24.308 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:17:24.432 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e2b9f53
2026-01-06 17:17:24.433 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:17:24.570 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:17:24.580 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:17:24.592 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:17:24.634 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:17:24.634 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:17:24.637 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:17:24.637 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:17:24.637 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:17:24.638 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:17:24.755 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:17:24.860 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b7c4734, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2f6e92ca, org.springframework.security.web.context.SecurityContextHolderFilter@32328dc4, org.springframework.security.web.header.HeaderWriterFilter@1f5d7fd5, org.springframework.web.filter.CorsFilter@380fdcf2, org.springframework.security.web.authentication.logout.LogoutFilter@1b25d695, com.leave.system.security.JwtAuthenticationFilter@60c96eb4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@21540255, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a7469ca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@114b203, org.springframework.security.web.session.SessionManagementFilter@29519337, org.springframework.security.web.access.ExceptionTranslationFilter@7c8df667, org.springframework.security.web.access.intercept.AuthorizationFilter@5c997de8]
2026-01-06 17:17:25.033 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - Started LeaveExpiryBugTest in 1.828 seconds (process running for 2.269)
2026-01-06 17:17:25.034 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:17:25.034 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:17:25.424 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:17:25.425 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 10045417(Long), bug_repro_10045417(String), password(String), Bug Repro(String), 2020-01-01(LocalDate), 2020-01-01(LocalDate), ACTIVE(String)
2026-01-06 17:17:25.439 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:17:25.440 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 10045417, 'bug_repro_10045417', 'password', 'Bug Repro', 2020-01-01, 2020-01-01, 'ACTIVE' )

2026-01-06 17:17:25.441 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:17:25.441 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10045417(Long)
2026-01-06 17:17:25.447 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:17:25.448 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10045417 AND deleted = 0

2026-01-06 17:17:25.448 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:17:25.449 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 10045417(Long), 2026(Integer)
2026-01-06 17:17:25.456 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:17:25.456 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 10045417 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:17:25.456 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:17:25.456 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 10045417(Long), 2026(Integer)
2026-01-06 17:17:25.463 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:17:25.463 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 10045417 AND year = 2026

2026-01-06 17:17:25.464 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:17:25.464 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 10045417(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:17:25.475 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:17:25.475 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (10045417, 2026, 6, 5.0, 6, 0.0, 0, 0, 0)

2026-01-06 17:17:25.475 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 10045417 year 2026
2026-01-06 17:17:25.489 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:17:25.489 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 10045417(Long), 2026(Integer)
2026-01-06 17:17:25.495 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:17:25.495 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 10045417 AND year = 2026)

2026-01-06 17:17:25.496 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:17:25.497 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 10045417(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0(BigDecimal), 0(BigDecimal), 0.0(BigDecimal), 174(Long)
2026-01-06 17:17:25.509 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:17:25.510 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=10045417, year=2026, social_seniority=6, standard_quota=5.0, days_employed=6, actual_quota=0, last_year_balance=0, current_year_used=0.0 WHERE id=174 AND deleted=0

2026-01-06 17:17:25.510 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:17:25.511 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 10045417(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 7.0(BigDecimal), CARRY_OVER(String), 2026-12-31(LocalDate), 2025-07-06T17:17:25.510192(LocalDateTime), 0(Integer)
2026-01-06 17:17:25.528 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:17:25.529 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( 461, 10045417, 2026-01-01, 2026-01-01, 7.0, 'CARRY_OVER', 2026-12-31, 2025-07-06T17:17:25.510192, 0 )

2026-01-06 17:17:25.530 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:17:25.532 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 10045417(Long), 2026-05-01(LocalDate), 2026-05-02(LocalDate), -2.0(BigDecimal), LEAVE(String), 2026-12-31(LocalDate), 2025-08-06T17:17:25.530080(LocalDateTime), 0(Integer)
2026-01-06 17:17:25.545 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:17:25.547 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( 462, 10045417, 2026-05-01, 2026-05-02, -2.0, 'LEAVE', 2026-12-31, 2025-08-06T17:17:25.530080, 0 )

2026-01-06 17:17:25.548 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2026 (Target Expiry: 2026-12-31)
2026-01-06 17:17:25.549 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:17:25.549 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2026(Integer)
2026-01-06 17:17:25.567 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 36
2026-01-06 17:17:25.568 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2026 AND deleted = 0

2026-01-06 17:17:25.569 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:25.569 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.575 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:25.575 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:25.576 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 1: 0
2026-01-06 17:17:25.576 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 1: 0
2026-01-06 17:17:25.577 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:25.577 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.668 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:25.669 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.669 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:25.669 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.675 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:25.675 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.676 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:25.676 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 1(Long)
2026-01-06 17:17:25.682 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:25.683 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:25.683 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:25.683 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.696 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:17:25.696 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:25.696 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 2: 5.0 + 0 extra = 5.0
2026-01-06 17:17:25.697 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2: 5.0
2026-01-06 17:17:25.697 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:25.697 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.706 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:25.706 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.706 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:25.706 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.717 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:25.717 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.717 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:25.717 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2(Long)
2026-01-06 17:17:25.727 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:25.727 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:25.727 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:17:25.728 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 2(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -5.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:17:25.738 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:17:25.739 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (2, 2026-12-31, 2026-12-31, -5.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:17:25.739 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 5.0 days for user 2 (target expiry date: 2026-12-31)
2026-01-06 17:17:25.739 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:25.739 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.745 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:17:25.745 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:25.745 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 3: 7.0 + 0 extra = 7.0
2026-01-06 17:17:25.745 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3: 7.0
2026-01-06 17:17:25.746 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:25.746 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.753 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:25.753 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.754 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:25.754 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.762 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:25.762 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.763 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:25.763 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3(Long)
2026-01-06 17:17:25.768 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:25.768 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:25.768 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:17:25.769 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 3(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -7.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:17:25.781 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:17:25.782 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (3, 2026-12-31, 2026-12-31, -7.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:17:25.782 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 7.0 days for user 3 (target expiry date: 2026-12-31)
2026-01-06 17:17:25.782 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:25.782 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.787 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:17:25.787 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:25.787 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4: 3.0 + 0 extra = 3.0
2026-01-06 17:17:25.787 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4: 3.0
2026-01-06 17:17:25.788 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:25.788 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.795 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:25.796 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.796 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:25.796 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.809 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:25.809 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.810 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:25.810 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4(Long)
2026-01-06 17:17:25.817 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:25.817 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:25.818 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:17:25.818 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 4(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -3.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:17:25.832 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:17:25.832 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (4, 2026-12-31, 2026-12-31, -3.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:17:25.832 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 3.0 days for user 4 (target expiry date: 2026-12-31)
2026-01-06 17:17:25.832 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:25.832 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.840 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:17:25.840 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:25.840 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 5: 3.0 + 0 extra = 3.0
2026-01-06 17:17:25.840 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 5: 3.0
2026-01-06 17:17:25.840 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:25.840 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.848 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:25.848 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.848 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:25.849 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.855 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:25.855 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.855 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:25.855 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 5(Long)
2026-01-06 17:17:25.868 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:25.868 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:25.868 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:17:25.869 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 5(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -3.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:17:25.879 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:17:25.879 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (5, 2026-12-31, 2026-12-31, -3.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:17:25.879 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 3.0 days for user 5 (target expiry date: 2026-12-31)
2026-01-06 17:17:25.880 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:25.880 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.885 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:25.886 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:25.886 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 6: 0
2026-01-06 17:17:25.886 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6: 0
2026-01-06 17:17:25.886 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:25.886 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.891 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:25.892 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.892 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:25.892 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.898 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:25.898 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.899 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:25.899 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6(Long)
2026-01-06 17:17:25.907 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:25.907 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:25.908 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:25.908 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.916 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:25.916 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:25.916 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 7: 0
2026-01-06 17:17:25.916 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 7: 0
2026-01-06 17:17:25.917 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:25.917 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.924 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:25.924 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.924 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:25.924 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.932 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:25.932 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.933 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:25.933 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 7(Long)
2026-01-06 17:17:25.943 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:25.943 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:25.944 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:25.944 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.950 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:25.951 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:25.951 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 8: 0
2026-01-06 17:17:25.951 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 8: 0
2026-01-06 17:17:25.951 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:25.951 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.959 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:25.959 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.959 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:25.959 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.971 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:25.971 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:25.971 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:25.971 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 8(Long)
2026-01-06 17:17:25.978 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:25.978 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:25.979 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:25.979 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:25.993 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:25.993 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:25.993 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 9: 0
2026-01-06 17:17:25.993 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 9: 0
2026-01-06 17:17:25.993 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:25.993 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.003 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.003 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.004 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.004 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.015 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.015 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.015 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.015 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 9(Long)
2026-01-06 17:17:26.030 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.030 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.030 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.030 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.037 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.037 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.037 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 10: 0
2026-01-06 17:17:26.037 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 10: 0
2026-01-06 17:17:26.037 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.037 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.042 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.042 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.043 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.043 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.053 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.053 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.053 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.053 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 10(Long)
2026-01-06 17:17:26.066 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.066 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.066 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.066 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.070 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.070 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.070 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 11: 0
2026-01-06 17:17:26.070 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 11: 0
2026-01-06 17:17:26.071 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.071 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.076 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.077 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.077 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.077 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.085 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.086 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.086 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.086 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 11(Long)
2026-01-06 17:17:26.094 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.094 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.094 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.094 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.099 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.099 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.099 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 12: 0
2026-01-06 17:17:26.099 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 12: 0
2026-01-06 17:17:26.099 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.099 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.193 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.193 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.194 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.194 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.199 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.200 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.200 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.200 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 12(Long)
2026-01-06 17:17:26.208 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.208 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.208 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.208 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.214 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.214 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.214 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 13: 0
2026-01-06 17:17:26.214 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 13: 0
2026-01-06 17:17:26.215 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.215 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.223 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.223 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.223 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.223 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.230 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.230 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.230 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.230 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 13(Long)
2026-01-06 17:17:26.238 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.239 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.239 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.239 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.245 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.245 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.245 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 14: 0
2026-01-06 17:17:26.245 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 14: 0
2026-01-06 17:17:26.245 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.245 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.258 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.258 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.258 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.258 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.267 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.267 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.267 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.267 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 14(Long)
2026-01-06 17:17:26.277 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.277 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.277 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.277 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.283 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.283 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.283 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 15: 0
2026-01-06 17:17:26.284 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 15: 0
2026-01-06 17:17:26.284 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.284 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.288 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.288 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.288 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.288 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.297 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.298 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.298 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.298 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 15(Long)
2026-01-06 17:17:26.303 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.303 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.304 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.304 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.310 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.310 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.310 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 16: 0
2026-01-06 17:17:26.310 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 16: 0
2026-01-06 17:17:26.310 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.310 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.326 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.326 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.326 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.326 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.336 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.336 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.336 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.336 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 16(Long)
2026-01-06 17:17:26.343 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.343 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.343 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.343 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.350 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.350 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.350 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 17: 0
2026-01-06 17:17:26.350 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 17: 0
2026-01-06 17:17:26.350 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.350 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.355 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.355 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.355 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.355 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.361 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.361 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.361 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.361 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 17(Long)
2026-01-06 17:17:26.369 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.370 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.370 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.370 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.376 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.377 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.377 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 18: 0
2026-01-06 17:17:26.377 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 18: 0
2026-01-06 17:17:26.377 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.377 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.381 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.382 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.382 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.382 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.392 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.392 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.392 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.392 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 18(Long)
2026-01-06 17:17:26.397 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.398 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.398 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.398 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.403 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.403 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.403 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 19: 0
2026-01-06 17:17:26.403 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 19: 0
2026-01-06 17:17:26.403 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.403 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.410 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.410 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.410 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.410 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.414 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.415 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.415 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.415 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 19(Long)
2026-01-06 17:17:26.421 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.422 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.422 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.422 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.425 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.425 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.425 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 20: 0
2026-01-06 17:17:26.425 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 20: 0
2026-01-06 17:17:26.425 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.426 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.431 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.431 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.431 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.431 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.438 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.438 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.438 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.438 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 20(Long)
2026-01-06 17:17:26.445 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.445 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.445 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.445 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.456 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.456 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.456 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 21: 0
2026-01-06 17:17:26.456 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 21: 0
2026-01-06 17:17:26.456 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.456 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.463 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.464 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.464 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.464 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.474 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.474 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.474 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.474 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 21(Long)
2026-01-06 17:17:26.483 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.483 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.483 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.483 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.498 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.498 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.498 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 22: 0
2026-01-06 17:17:26.498 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 22: 0
2026-01-06 17:17:26.498 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.498 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.506 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.507 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.507 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.507 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.515 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.515 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.515 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.516 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 22(Long)
2026-01-06 17:17:26.527 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.527 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.527 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.527 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.532 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.532 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.532 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 23: 0
2026-01-06 17:17:26.532 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 23: 0
2026-01-06 17:17:26.532 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.532 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.543 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.543 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.543 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.543 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.557 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.557 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.557 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.557 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 23(Long)
2026-01-06 17:17:26.564 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.564 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.564 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.564 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.576 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.576 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.576 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 24: 0
2026-01-06 17:17:26.576 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 24: 0
2026-01-06 17:17:26.577 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.577 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.582 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.582 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.583 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.583 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.593 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.593 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.593 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.593 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 24(Long)
2026-01-06 17:17:26.601 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.602 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.602 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.602 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.608 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.608 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.608 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 25: 0
2026-01-06 17:17:26.608 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 25: 0
2026-01-06 17:17:26.608 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.608 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.615 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.615 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.615 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.616 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.621 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.621 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.621 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.621 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 25(Long)
2026-01-06 17:17:26.717 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.717 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.718 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.718 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.725 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.725 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.725 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 26: 0
2026-01-06 17:17:26.725 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 26: 0
2026-01-06 17:17:26.725 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.726 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.734 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.735 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.735 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.735 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.742 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.743 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.743 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.743 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 26(Long)
2026-01-06 17:17:26.748 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.749 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.749 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.749 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.758 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.758 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.758 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 27: 0
2026-01-06 17:17:26.758 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 27: 0
2026-01-06 17:17:26.758 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.758 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.764 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.764 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.764 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.764 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.768 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.768 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.768 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.768 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 27(Long)
2026-01-06 17:17:26.775 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.775 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.775 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.775 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.784 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.784 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.784 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 28: 0
2026-01-06 17:17:26.784 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 28: 0
2026-01-06 17:17:26.784 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.784 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.800 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.800 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.800 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.801 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.806 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.806 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.807 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.807 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 28(Long)
2026-01-06 17:17:26.812 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.812 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.812 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.812 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.825 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.825 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.825 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 29: 0
2026-01-06 17:17:26.825 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 29: 0
2026-01-06 17:17:26.826 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.826 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.831 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.831 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.831 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.831 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.838 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.838 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.838 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.838 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 29(Long)
2026-01-06 17:17:26.843 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.843 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.843 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.844 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.850 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.850 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.850 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 30: 0
2026-01-06 17:17:26.850 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 30: 0
2026-01-06 17:17:26.850 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.851 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.859 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.859 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.859 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.860 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.867 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.867 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.867 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.867 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 30(Long)
2026-01-06 17:17:26.872 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.872 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.872 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.872 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.877 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.877 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.877 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 31: 0
2026-01-06 17:17:26.877 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 31: 0
2026-01-06 17:17:26.877 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.877 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.886 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.886 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.886 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.886 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.891 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.891 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.891 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.891 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 31(Long)
2026-01-06 17:17:26.897 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.897 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.897 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.897 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.903 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.903 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.903 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 32: 0
2026-01-06 17:17:26.903 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 32: 0
2026-01-06 17:17:26.903 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.903 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.908 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.908 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.908 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.908 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.914 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.914 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.914 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.914 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 32(Long)
2026-01-06 17:17:26.919 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.919 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.919 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.919 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.929 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:17:26.929 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.929 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 33: 4.0 + 0 extra = 4.0
2026-01-06 17:17:26.930 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 4.0
2026-01-06 17:17:26.930 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.930 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.934 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.934 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.934 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.934 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.940 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.940 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.940 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.940 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:17:26.945 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.945 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.946 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:17:26.946 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 33(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -4.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:17:26.957 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:17:26.957 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (33, 2026-12-31, 2026-12-31, -4.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:17:26.957 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 4.0 days for user 33 (target expiry date: 2026-12-31)
2026-01-06 17:17:26.957 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.957 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.961 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.961 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.961 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 34: 0
2026-01-06 17:17:26.961 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 34: 0
2026-01-06 17:17:26.961 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.962 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.966 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.967 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.967 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.967 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.974 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:26.974 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.974 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:26.974 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 34(Long)
2026-01-06 17:17:26.983 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:26.983 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:26.983 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:26.983 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.987 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:17:26.988 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:26.988 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 35: 0
2026-01-06 17:17:26.988 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 35: 0
2026-01-06 17:17:26.988 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:26.988 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:26.997 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:26.997 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:26.997 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:26.997 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:27.002 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:27.002 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:27.002 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:27.002 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 35(Long)
2026-01-06 17:17:27.007 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:27.007 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:27.007 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:17:27.007 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 10045417(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:27.013 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:17:27.013 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10045417 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:17:27.013 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 10045417: 7.0 + 0 extra = 7.0
2026-01-06 17:17:27.013 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 10045417: 7.0
2026-01-06 17:17:27.013 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:17:27.013 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 10045417(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:27.019 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:17:27.019 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10045417 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:27.019 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:17:27.019 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 10045417(Long), 2026-12-31(LocalDate)
2026-01-06 17:17:27.028 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:17:27.028 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 10045417 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:17:27.028 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:17:27.029 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 10045417(Long)
2026-01-06 17:17:27.033 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:17:27.033 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10045417 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:17:27.034 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:17:27.034 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 10045417(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -7.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:17:27.043 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:17:27.044 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (10045417, 2026-12-31, 2026-12-31, -7.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:17:27.044 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 7.0 days for user 10045417 (target expiry date: 2026-12-31)
2026-01-06 17:17:27.044 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2026 completed: 6 users affected, 29.0 total days expired
2026-01-06 17:17:27.044 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:17:27.045 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 10045417(Long), EXPIRED(String)
2026-01-06 17:17:27.048 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 0
2026-01-06 17:17:27.049 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 10045417 AND type = 'EXPIRED')

2026-01-06 17:18:52.107 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - Starting LeaveExpiryBugTest using Java 17.0.6 with PID 28315 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:18:52.107 DEBUG com.leave.system.scheduled.LeaveExpiryBugTest - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:18:52.108 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - The following 1 profile is active: "test"
2026-01-06 17:18:52.664 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@44aa2e13'
2026-01-06 17:18:52.665 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@265a094b'
2026-01-06 17:18:52.739 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:18:52.767 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:18:52.778 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:18:52.790 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:18:52.799 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:18:52.813 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:18:52.825 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:18:52.833 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:1
2026-01-06 17:18:52.843 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:18:52.969 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@360d41d0
2026-01-06 17:18:52.971 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:18:53.100 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:18:53.107 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:18:53.117 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:18:53.134 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:18:53.135 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:18:53.137 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:18:53.137 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:18:53.137 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:18:53.138 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:18:53.238 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:18:53.315 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2acb1264, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30a01dd8, org.springframework.security.web.context.SecurityContextHolderFilter@1f1fbc9f, org.springframework.security.web.header.HeaderWriterFilter@eb1d475, org.springframework.web.filter.CorsFilter@1f68e4e8, org.springframework.security.web.authentication.logout.LogoutFilter@114b203, com.leave.system.security.JwtAuthenticationFilter@3b57f915, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@50785f86, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7c3c3d67, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@47b4ac83, org.springframework.security.web.session.SessionManagementFilter@3d764641, org.springframework.security.web.access.ExceptionTranslationFilter@22c29aa8, org.springframework.security.web.access.intercept.AuthorizationFilter@3ca278bc]
2026-01-06 17:18:53.476 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - Started LeaveExpiryBugTest in 1.537 seconds (process running for 1.943)
2026-01-06 17:18:53.477 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:18:53.477 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:18:53.865 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - ==>  Preparing: UPDATE leave_record SET deleted=1 WHERE deleted=0
2026-01-06 17:18:53.865 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - ==> Parameters: 
2026-01-06 17:18:53.876 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - <==    Updates: 5
2026-01-06 17:18:53.877 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.delete
SQL         : UPDATE leave_record SET deleted=1 WHERE deleted=0

2026-01-06 17:18:53.877 DEBUG com.leave.system.mapper.LeaveAccountMapper.delete - ==>  Preparing: UPDATE leave_account SET deleted=1 WHERE deleted=0
2026-01-06 17:18:53.877 DEBUG com.leave.system.mapper.LeaveAccountMapper.delete - ==> Parameters: 
2026-01-06 17:18:53.887 DEBUG com.leave.system.mapper.LeaveAccountMapper.delete - <==    Updates: 36
2026-01-06 17:18:53.888 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.delete
SQL         : UPDATE leave_account SET deleted=1 WHERE deleted=0

2026-01-06 17:18:53.888 DEBUG com.leave.system.mapper.SysUserMapper.delete - ==>  Preparing: UPDATE sys_user SET deleted=1 WHERE deleted=0
2026-01-06 17:18:53.888 DEBUG com.leave.system.mapper.SysUserMapper.delete - ==> Parameters: 
2026-01-06 17:18:53.901 DEBUG com.leave.system.mapper.SysUserMapper.delete - <==    Updates: 35
2026-01-06 17:18:53.901 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.delete
SQL         : UPDATE sys_user SET deleted=1 WHERE deleted=0

2026-01-06 17:18:53.903 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:18:53.904 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 10133851(Long), bug_repro_10133851(String), password(String), Bug Repro(String), 2020-01-01(LocalDate), 2020-01-01(LocalDate), ACTIVE(String)
2026-01-06 17:18:53.918 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:18:53.920 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 10133851, 'bug_repro_10133851', 'password', 'Bug Repro', 2020-01-01, 2020-01-01, 'ACTIVE' )

2026-01-06 17:18:53.921 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:18:53.921 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10133851(Long)
2026-01-06 17:18:53.926 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:18:53.926 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10133851 AND deleted = 0

2026-01-06 17:18:53.926 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:18:53.927 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 10133851(Long), 2026(Integer)
2026-01-06 17:18:53.934 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:18:53.934 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 10133851 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:18:53.935 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:18:53.935 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 10133851(Long), 2026(Integer)
2026-01-06 17:18:53.941 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:18:53.942 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 10133851 AND year = 2026

2026-01-06 17:18:53.942 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:18:53.942 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 10133851(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:18:53.951 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:18:53.952 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (10133851, 2026, 6, 5.0, 6, 0.0, 0, 0, 0)

2026-01-06 17:18:53.952 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 10133851 year 2026
2026-01-06 17:18:53.957 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:18:53.957 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 10133851(Long), 2026(Integer)
2026-01-06 17:18:53.970 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:18:53.970 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 10133851 AND year = 2026)

2026-01-06 17:18:53.971 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:18:53.972 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 10133851(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0(BigDecimal), 0(BigDecimal), 0.0(BigDecimal), 175(Long)
2026-01-06 17:18:53.982 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:18:53.983 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=10133851, year=2026, social_seniority=6, standard_quota=5.0, days_employed=6, actual_quota=0, last_year_balance=0, current_year_used=0.0 WHERE id=175 AND deleted=0

2026-01-06 17:18:53.983 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:18:53.984 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 10133851(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 7.0(BigDecimal), CARRY_OVER(String), 2026-12-31(LocalDate), 2025-07-06T17:18:53.983175(LocalDateTime), 0(Integer)
2026-01-06 17:18:53.992 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:18:53.993 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( 469, 10133851, 2026-01-01, 2026-01-01, 7.0, 'CARRY_OVER', 2026-12-31, 2025-07-06T17:18:53.983175, 0 )

2026-01-06 17:18:53.993 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:18:53.994 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 10133851(Long), 2026-05-01(LocalDate), 2026-05-02(LocalDate), -2.0(BigDecimal), LEAVE(String), 2026-12-31(LocalDate), 2025-08-06T17:18:53.993453(LocalDateTime), 0(Integer)
2026-01-06 17:18:54.003 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:18:54.004 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( 470, 10133851, 2026-05-01, 2026-05-02, -2.0, 'LEAVE', 2026-12-31, 2025-08-06T17:18:53.993453, 0 )

2026-01-06 17:18:54.004 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:18:54.004 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 10133851(Long), 2026-12-31(LocalDate)
2026-01-06 17:18:54.010 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:18:54.010 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10133851 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:18:54.012 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2026 (Target Expiry: 2026-12-31)
2026-01-06 17:18:54.012 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:18:54.012 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2026(Integer)
2026-01-06 17:18:54.018 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 1
2026-01-06 17:18:54.019 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2026 AND deleted = 0

2026-01-06 17:18:54.019 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10133851 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:18:54.020 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 10133851: 7.0 + 0 extra = 7.0
2026-01-06 17:18:54.020 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 10133851: 7.0
2026-01-06 17:18:54.020 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:18:54.021 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 10133851(Long), 2026-12-31(LocalDate)
2026-01-06 17:18:54.026 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:18:54.027 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10133851 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:18:54.027 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:18:54.027 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 10133851(Long), 2026-12-31(LocalDate)
2026-01-06 17:18:54.034 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:18:54.034 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 10133851 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:18:54.034 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:18:54.034 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 10133851(Long)
2026-01-06 17:18:54.039 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:18:54.039 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10133851 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:18:54.040 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:18:54.040 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 10133851(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -7.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), null
2026-01-06 17:18:54.050 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:18:54.051 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (10133851, 2026-12-31, 2026-12-31, -7.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, )

2026-01-06 17:18:54.051 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 7.0 days for user 10133851 (target expiry date: 2026-12-31)
2026-01-06 17:18:54.051 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2026 completed: 1 users affected, 7.0 total days expired
2026-01-06 17:18:54.051 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:18:54.052 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 10133851(Long), EXPIRED(String)
2026-01-06 17:18:54.057 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 0
2026-01-06 17:18:54.058 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 10133851 AND type = 'EXPIRED')

2026-01-06 17:20:42.265 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - Starting LeaveExpiryBugTest using Java 17.0.6 with PID 28515 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:20:42.266 DEBUG com.leave.system.scheduled.LeaveExpiryBugTest - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:20:42.266 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - The following 1 profile is active: "test"
2026-01-06 17:20:42.817 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@44aa2e13'
2026-01-06 17:20:42.818 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@265a094b'
2026-01-06 17:20:42.883 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:20:42.900 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:20:42.909 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:20:42.919 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:20:42.929 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:20:42.942 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:20:42.954 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:20:42.962 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:3
2026-01-06 17:20:42.972 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:20:43.130 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@360d41d0
2026-01-06 17:20:43.131 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:20:43.257 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:20:43.264 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:20:43.273 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:20:43.286 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:20:43.287 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:20:43.289 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:20:43.289 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:20:43.289 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:20:43.290 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:20:43.388 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:20:43.476 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2acb1264, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30a01dd8, org.springframework.security.web.context.SecurityContextHolderFilter@1f1fbc9f, org.springframework.security.web.header.HeaderWriterFilter@eb1d475, org.springframework.web.filter.CorsFilter@1f68e4e8, org.springframework.security.web.authentication.logout.LogoutFilter@114b203, com.leave.system.security.JwtAuthenticationFilter@3b57f915, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@50785f86, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7c3c3d67, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@47b4ac83, org.springframework.security.web.session.SessionManagementFilter@3d764641, org.springframework.security.web.access.ExceptionTranslationFilter@22c29aa8, org.springframework.security.web.access.intercept.AuthorizationFilter@3ca278bc]
2026-01-06 17:20:43.634 INFO  com.leave.system.scheduled.LeaveExpiryBugTest - Started LeaveExpiryBugTest in 1.569 seconds (process running for 1.942)
2026-01-06 17:20:43.634 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:20:43.635 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:20:44.059 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - ==>  Preparing: UPDATE leave_record SET deleted=1 WHERE deleted=0
2026-01-06 17:20:44.059 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - ==> Parameters: 
2026-01-06 17:20:44.111 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - <==    Updates: 5
2026-01-06 17:20:44.112 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.delete
SQL         : UPDATE leave_record SET deleted=1 WHERE deleted=0

2026-01-06 17:20:44.112 DEBUG com.leave.system.mapper.LeaveAccountMapper.delete - ==>  Preparing: UPDATE leave_account SET deleted=1 WHERE deleted=0
2026-01-06 17:20:44.112 DEBUG com.leave.system.mapper.LeaveAccountMapper.delete - ==> Parameters: 
2026-01-06 17:20:44.122 DEBUG com.leave.system.mapper.LeaveAccountMapper.delete - <==    Updates: 36
2026-01-06 17:20:44.122 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.delete
SQL         : UPDATE leave_account SET deleted=1 WHERE deleted=0

2026-01-06 17:20:44.122 DEBUG com.leave.system.mapper.SysUserMapper.delete - ==>  Preparing: UPDATE sys_user SET deleted=1 WHERE deleted=0
2026-01-06 17:20:44.122 DEBUG com.leave.system.mapper.SysUserMapper.delete - ==> Parameters: 
2026-01-06 17:20:44.133 DEBUG com.leave.system.mapper.SysUserMapper.delete - <==    Updates: 35
2026-01-06 17:20:44.133 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.delete
SQL         : UPDATE sys_user SET deleted=1 WHERE deleted=0

2026-01-06 17:20:44.134 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:20:44.135 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 10244045(Long), bug_repro_10244045(String), password(String), Bug Repro(String), 2020-01-01(LocalDate), 2020-01-01(LocalDate), ACTIVE(String)
2026-01-06 17:20:44.144 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:20:44.145 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 10244045, 'bug_repro_10244045', 'password', 'Bug Repro', 2020-01-01, 2020-01-01, 'ACTIVE' )

2026-01-06 17:20:44.147 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:20:44.147 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10244045(Long)
2026-01-06 17:20:44.152 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:20:44.153 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10244045 AND deleted = 0

2026-01-06 17:20:44.154 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:20:44.154 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 10244045(Long), 2026(Integer)
2026-01-06 17:20:44.159 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:20:44.160 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 10244045 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:20:44.160 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:20:44.160 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 10244045(Long), 2026(Integer)
2026-01-06 17:20:44.164 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:20:44.165 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 10244045 AND year = 2026

2026-01-06 17:20:44.165 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:20:44.165 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 10244045(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:20:44.174 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:20:44.175 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (10244045, 2026, 6, 5.0, 6, 0.0, 0, 0, 0)

2026-01-06 17:20:44.175 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 10244045 year 2026
2026-01-06 17:20:44.180 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:20:44.180 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 10244045(Long), 2026(Integer)
2026-01-06 17:20:44.185 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:20:44.185 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 10244045 AND year = 2026)

2026-01-06 17:20:44.186 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:20:44.186 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 10244045(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0(BigDecimal), 0(BigDecimal), 0.0(BigDecimal), 176(Long)
2026-01-06 17:20:44.197 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:20:44.198 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=10244045, year=2026, social_seniority=6, standard_quota=5.0, days_employed=6, actual_quota=0, last_year_balance=0, current_year_used=0.0 WHERE id=176 AND deleted=0

2026-01-06 17:20:44.198 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:20:44.198 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 10244045(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 7.0(BigDecimal), CARRY_OVER(String), 2026-12-31(LocalDate), 2025-07-06T17:20:44.198168(LocalDateTime), 0(Integer)
2026-01-06 17:20:44.209 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:20:44.209 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( 472, 10244045, 2026-01-01, 2026-01-01, 7.0, 'CARRY_OVER', 2026-12-31, 2025-07-06T17:20:44.198168, 0 )

2026-01-06 17:20:44.209 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:20:44.210 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 10244045(Long), 2026-05-01(LocalDate), 2026-05-02(LocalDate), -2.0(BigDecimal), LEAVE(String), 2026-12-31(LocalDate), 2025-08-06T17:20:44.209562(LocalDateTime), 0(Integer)
2026-01-06 17:20:44.217 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:20:44.218 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( 473, 10244045, 2026-05-01, 2026-05-02, -2.0, 'LEAVE', 2026-12-31, 2025-08-06T17:20:44.209562, 0 )

2026-01-06 17:20:44.218 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:20:44.218 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 10244045(Long), 2026-12-31(LocalDate)
2026-01-06 17:20:44.223 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:20:44.223 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10244045 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:20:44.225 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2026 (Target Expiry: 2026-12-31)
2026-01-06 17:20:44.225 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:20:44.225 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2026(Integer)
2026-01-06 17:20:44.232 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 1
2026-01-06 17:20:44.232 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2026 AND deleted = 0

2026-01-06 17:20:44.232 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10244045 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:20:44.233 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 10244045: 7.0 + 0 extra = 7.0
2026-01-06 17:20:44.233 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 10244045: 7.0
2026-01-06 17:20:44.233 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:20:44.234 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 10244045(Long), 2026-12-31(LocalDate)
2026-01-06 17:20:44.242 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 1
2026-01-06 17:20:44.242 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10244045 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:20:44.243 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:20:44.243 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 10244045(Long), 2026-12-31(LocalDate)
2026-01-06 17:20:44.248 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:20:44.248 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 10244045 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:20:44.249 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:20:44.249 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 10244045(Long)
2026-01-06 17:20:44.254 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:20:44.254 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10244045 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:20:44.255 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:20:44.256 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 10244045(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -5.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), 0(Integer)
2026-01-06 17:20:44.266 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:20:44.266 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (10244045, 2026-12-31, 2026-12-31, -5.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, 0)

2026-01-06 17:20:44.266 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 5.0 days for user 10244045 (target expiry date: 2026-12-31)
2026-01-06 17:20:44.267 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2026 completed: 1 users affected, 5.0 total days expired
2026-01-06 17:20:44.267 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:20:44.267 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 10244045(Long), EXPIRED(String)
2026-01-06 17:20:44.273 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:20:44.273 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 10244045 AND type = 'EXPIRED')

2026-01-06 17:21:29.451 INFO  com.leave.system.scheduled.LeaveExpiryCleanupTest - Starting LeaveExpiryCleanupTest using Java 17.0.6 with PID 28679 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:21:29.451 DEBUG com.leave.system.scheduled.LeaveExpiryCleanupTest - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:21:29.451 INFO  com.leave.system.scheduled.LeaveExpiryCleanupTest - The following 1 profile is active: "test"
2026-01-06 17:21:30.008 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@626e0c86'
2026-01-06 17:21:30.008 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@7f977fba'
2026-01-06 17:21:30.075 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:21:30.093 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:21:30.101 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:21:30.113 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:21:30.123 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:21:30.139 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:21:30.151 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:21:30.158 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:2
2026-01-06 17:21:30.168 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:21:30.327 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7bec8cb0
2026-01-06 17:21:30.329 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:21:30.458 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:21:30.465 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:21:30.475 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:21:30.489 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:21:30.489 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:21:30.491 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:21:30.491 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:21:30.491 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:21:30.492 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:21:30.596 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:21:30.669 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6d35ff7b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4ef31221, org.springframework.security.web.context.SecurityContextHolderFilter@77e6761f, org.springframework.security.web.header.HeaderWriterFilter@2b6fcca1, org.springframework.web.filter.CorsFilter@4e9e0c6, org.springframework.security.web.authentication.logout.LogoutFilter@654b899f, com.leave.system.security.JwtAuthenticationFilter@58882a93, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@45bf93bb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6b7c4734, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a819901, org.springframework.security.web.session.SessionManagementFilter@7bda01da, org.springframework.security.web.access.ExceptionTranslationFilter@50785f86, org.springframework.security.web.access.intercept.AuthorizationFilter@2f0cab82]
2026-01-06 17:21:30.833 INFO  com.leave.system.scheduled.LeaveExpiryCleanupTest - Started LeaveExpiryCleanupTest in 1.538 seconds (process running for 1.917)
2026-01-06 17:21:30.834 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:21:30.834 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:21:31.304 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( ?, ?, ?, ?, ? )
2026-01-06 17:21:31.305 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 5291208(Long), test_deduct_fix_5291208(String), password(String), Test Deduct Fix(String), ACTIVE(String)
2026-01-06 17:21:31.340 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:21:31.341 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( 5291208, 'test_deduct_fix_5291208', 'password', 'Test Deduct Fix', 'ACTIVE' )

2026-01-06 17:21:31.342 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:31.342 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 5291208(Long), 2025-01-01(LocalDate), 2025-01-01(LocalDate), 5.0(BigDecimal), CARRY_OVER(String), 2025-12-31(LocalDate), 2026-01-06T17:21:31.341733(LocalDateTime)
2026-01-06 17:21:31.361 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:31.361 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 475, 5291208, 2025-01-01, 2025-01-01, 5.0, 'CARRY_OVER', 2025-12-31, 2026-01-06T17:21:31.341733 )

2026-01-06 17:21:31.369 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:21:31.371 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:21:31.371 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:21:31.377 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 1
2026-01-06 17:21:31.377 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:21:31.378 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:31.378 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:31.387 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:21:31.387 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:31.387 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:21:31.387 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:21:31.388 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:31.388 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:31.393 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:31.393 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:31.393 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:31.393 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:31.399 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:31.399 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:31.399 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:31.400 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:21:31.406 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:31.406 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:31.406 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 0 users affected, 0 total days expired
2026-01-06 17:21:31.423 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:31.423 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5291208(Long)
2026-01-06 17:21:31.429 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:31.429 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5291208 AND deleted = 0

2026-01-06 17:21:31.430 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:21:31.430 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 5291208(Long), 2026(Integer)
2026-01-06 17:21:31.434 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:21:31.435 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 5291208 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:21:31.435 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:21:31.435 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 5291208(Long), 2026(Integer)
2026-01-06 17:21:31.439 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:21:31.440 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 5291208 AND year = 2026

2026-01-06 17:21:31.440 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:31.440 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 5291208(Long), 2026(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:21:31.451 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:21:31.451 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (5291208, 2026, 0, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:21:31.451 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 5291208 year 2026
2026-01-06 17:21:31.478 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:21:31.478 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 5291208(Long), 2026(Integer)
2026-01-06 17:21:31.488 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:21:31.489 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 5291208 AND year = 2026)

2026-01-06 17:21:31.490 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:21:31.490 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 5291208(Long), 2026(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 10.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 177(Long)
2026-01-06 17:21:31.507 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:21:31.507 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=5291208, year=2026, social_seniority=0, standard_quota=5.0, days_employed=365, actual_quota=10.0, last_year_balance=0.0, current_year_used=0.0 WHERE id=177 AND deleted=0

2026-01-06 17:21:31.514 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:21:31.515 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5291208(Long), 2026(Integer)
2026-01-06 17:21:31.519 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:21:31.519 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5291208 AND year = 2026 AND deleted = 0

2026-01-06 17:21:31.519 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìù Processing leave application: user=5291208, dates=2026-01-06 to 2026-01-06, days=1
2026-01-06 17:21:31.520 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5291208 AND year = 2026 AND deleted = 0

2026-01-06 17:21:31.520 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:31.520 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5291208(Long)
2026-01-06 17:21:31.526 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:31.526 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5291208 AND deleted = 0

2026-01-06 17:21:31.526 DEBUG com.leave.system.service.impl.LeaveServiceImpl - üîÑ Refreshing account for user 5291208 year 2026 based on today 2026-01-06
2026-01-06 17:21:31.527 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-06 17:21:31.527 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 5291208(Long), 2026(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 177(Long)
2026-01-06 17:21:31.538 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-06 17:21:31.538 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 5291208, year = 2026, social_seniority = 0, standard_quota = 5.0, days_employed = 365, actual_quota = 5.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 177

2026-01-06 17:21:31.538 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Refreshed dynamic quota for user 5291208: employed=365 days, quota=5.0
2026-01-06 17:21:31.538 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC
2026-01-06 17:21:31.539 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==> Parameters: 5291208(Long)
2026-01-06 17:21:31.543 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - <==      Total: 0
2026-01-06 17:21:31.543 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectAvailableBalances
SQL         : SELECT * FROM leave_record WHERE user_id = 5291208 AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC

2026-01-06 17:21:31.544 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED', 'LEAVE') AND expiry_date IS NOT NULL
2026-01-06 17:21:31.544 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==> Parameters: 5291208(Long)
2026-01-06 17:21:31.548 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - <==      Total: 0
2026-01-06 17:21:31.548 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 5291208 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED', 'LEAVE') AND expiry_date IS NOT NULL

2026-01-06 17:21:31.549 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:31.549 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 5291208(Long)
2026-01-06 17:21:31.554 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-06 17:21:31.555 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 5291208 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:31.555 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Available balances by expiry: {2027-12-31=5.0}
2026-01-06 17:21:31.555 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:31.556 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 5291208(Long), 2026-01-06(LocalDate), 2026-01-06(LocalDate), -1(BigDecimal), ANNUAL(String), ÂëòÂ∑•ËØ∑ÂÅá (Êù•Ëá™ÂΩìÂπ¥È¢ùÂ∫¶, ËøáÊúü: 2027-12-31)(String), 2026-01-06T17:21:31.555789(LocalDateTime), 2027-12-31(LocalDate), null
2026-01-06 17:21:31.573 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:31.574 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (5291208, 2026-01-06, 2026-01-06, -1, 'ANNUAL', 'ÂëòÂ∑•ËØ∑ÂÅá (Êù•Ëá™ÂΩìÂπ¥È¢ùÂ∫¶, ËøáÊúü: 2027-12-31)', 2026-01-06T17:21:31.555789, 2027-12-31, )

2026-01-06 17:21:31.574 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚úÖ Allocated 1 days from balance expiring on 2027-12-31
2026-01-06 17:21:31.574 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Leave application processed successfully
2026-01-06 17:21:31.586 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?) ORDER BY create_time DESC
2026-01-06 17:21:31.587 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 5291208(Long), ANNUAL(String)
2026-01-06 17:21:31.598 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 0
2026-01-06 17:21:31.599 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 5291208 AND type = 'ANNUAL') ORDER BY create_time DESC

2026-01-06 17:21:31.610 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( ?, ?, ?, ?, ? )
2026-01-06 17:21:31.611 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 6291610(Long), test_double_count_6291610(String), password(String), Test Double Count(String), ACTIVE(String)
2026-01-06 17:21:31.629 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:21:31.630 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( 6291610, 'test_double_count_6291610', 'password', 'Test Double Count', 'ACTIVE' )

2026-01-06 17:21:31.634 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:31.634 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6291610(Long)
2026-01-06 17:21:31.638 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:31.638 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6291610 AND deleted = 0

2026-01-06 17:21:31.638 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:21:31.638 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 6291610(Long), 2025(Integer)
2026-01-06 17:21:31.644 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:21:31.644 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 6291610 AND year = 2025 - 1 AND deleted = 0

2026-01-06 17:21:31.644 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:21:31.644 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 6291610(Long), 2025(Integer)
2026-01-06 17:21:31.649 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:21:31.649 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 6291610 AND year = 2025

2026-01-06 17:21:31.649 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:31.650 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 6291610(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:21:31.658 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:21:31.658 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (6291610, 2025, 0, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:21:31.658 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 6291610 year 2025
2026-01-06 17:21:31.675 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:21:31.675 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 6291610(Long), 2025(Integer)
2026-01-06 17:21:31.680 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:21:31.681 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 6291610 AND year = 2025)

2026-01-06 17:21:31.681 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:21:31.681 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 6291610(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 178(Long)
2026-01-06 17:21:31.694 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:21:31.695 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=6291610, year=2025, social_seniority=0, standard_quota=5.0, days_employed=365, actual_quota=0, last_year_balance=0.0, current_year_used=0.0 WHERE id=178 AND deleted=0

2026-01-06 17:21:31.696 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:31.698 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 6291610(Long), 2025-06-01(LocalDate), 2025-06-01(LocalDate), 2.0(BigDecimal), ADJUSTMENT_ADD(String), 2025-12-31(LocalDate), 2026-01-06T15:21:31.695772(LocalDateTime)
2026-01-06 17:21:31.734 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:31.735 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 477, 6291610, 2025-06-01, 2025-06-01, 2.0, 'ADJUSTMENT_ADD', 2025-12-31, 2026-01-06T15:21:31.695772 )

2026-01-06 17:21:31.736 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:31.738 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 6291610(Long), 2025-06-02(LocalDate), 2025-06-02(LocalDate), -1.0(BigDecimal), ANNUAL(String), 2025-12-31(LocalDate), 2026-01-06T16:21:31.735759(LocalDateTime)
2026-01-06 17:21:31.839 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:31.840 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 478, 6291610, 2025-06-02, 2025-06-02, -1.0, 'ANNUAL', 2025-12-31, 2026-01-06T16:21:31.735759 )

2026-01-06 17:21:31.840 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:31.841 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 6291610(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 6.0(BigDecimal), CARRY_OVER(String), 2025-12-31(LocalDate), 2026-01-06T17:21:31.840307(LocalDateTime)
2026-01-06 17:21:31.856 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:31.856 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 479, 6291610, 2026-01-01, 2026-01-01, 6.0, 'CARRY_OVER', 2025-12-31, 2026-01-06T17:21:31.840307 )

2026-01-06 17:21:31.856 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:31.857 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 6291610(Long), 2026-02-01(LocalDate), 2026-02-01(LocalDate), -0.5(BigDecimal), ANNUAL(String), 2025-12-31(LocalDate), 2026-01-06T17:22:31.856630(LocalDateTime)
2026-01-06 17:21:31.874 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:31.875 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 480, 6291610, 2026-02-01, 2026-02-01, -0.5, 'ANNUAL', 2025-12-31, 2026-01-06T17:22:31.856630 )

2026-01-06 17:21:31.880 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:21:31.880 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:21:31.880 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:21:31.886 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 2
2026-01-06 17:21:31.886 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:21:31.886 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:31.886 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:31.892 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:21:31.893 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:31.893 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:21:31.893 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:21:31.893 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:31.893 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:31.897 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:31.897 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:31.898 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:31.898 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:31.902 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:31.902 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:31.902 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:31.902 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:21:31.908 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:31.908 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:31.908 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:31.908 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:31.930 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-06 17:21:31.930 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:31.930 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6291610: 6.0 + 0 extra = 6.0
2026-01-06 17:21:31.930 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 6.0
2026-01-06 17:21:31.930 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:31.930 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:31.938 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-06 17:21:31.938 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:31.938 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:31.939 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:31.952 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:31.953 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:31.953 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:31.953 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:21:31.969 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:31.969 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:31.969 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:31.970 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate), 2025-12-31(LocalDate), -4.5(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)(String), null, 2025-12-31(LocalDate), 0(Integer)
2026-01-06 17:21:31.987 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:31.988 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (6291610, 2025-12-31, 2025-12-31, -4.5, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)', , 2025-12-31, 0)

2026-01-06 17:21:31.988 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 4.5 days for user 6291610 (target expiry date: 2025-12-31)
2026-01-06 17:21:31.988 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 1 users affected, 4.5 total days expired
2026-01-06 17:21:31.999 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:21:32.000 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 6291610(Long), EXPIRED(String)
2026-01-06 17:21:32.008 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:21:32.008 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 6291610 AND type = 'EXPIRED')

2026-01-06 17:21:32.011 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( ?, ?, ?, ?, ? )
2026-01-06 17:21:32.012 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 4292011(Long), test_idempotency_4292011(String), password(String), Test Idempotency(String), ACTIVE(String)
2026-01-06 17:21:32.025 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:21:32.025 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( 4292011, 'test_idempotency_4292011', 'password', 'Test Idempotency', 'ACTIVE' )

2026-01-06 17:21:32.030 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:32.030 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4292011(Long)
2026-01-06 17:21:32.038 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:32.039 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4292011 AND deleted = 0

2026-01-06 17:21:32.039 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:21:32.039 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 4292011(Long), 2025(Integer)
2026-01-06 17:21:32.043 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:21:32.043 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 4292011 AND year = 2025 - 1 AND deleted = 0

2026-01-06 17:21:32.043 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:21:32.043 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 4292011(Long), 2025(Integer)
2026-01-06 17:21:32.048 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:21:32.048 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 4292011 AND year = 2025

2026-01-06 17:21:32.048 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:32.049 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 4292011(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:21:32.058 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:21:32.058 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (4292011, 2025, 0, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:21:32.058 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 4292011 year 2025
2026-01-06 17:21:32.074 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:21:32.074 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 4292011(Long), 2025(Integer)
2026-01-06 17:21:32.080 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:21:32.080 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 4292011 AND year = 2025)

2026-01-06 17:21:32.080 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:21:32.081 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 4292011(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 179(Long)
2026-01-06 17:21:32.090 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:21:32.090 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=4292011, year=2025, social_seniority=0, standard_quota=5.0, days_employed=365, actual_quota=0, last_year_balance=0.0, current_year_used=0.0 WHERE id=179 AND deleted=0

2026-01-06 17:21:32.090 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:32.091 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 4292011(Long), 2025-01-01(LocalDate), 2025-01-01(LocalDate), 3.00(BigDecimal), CARRY_OVER(String), 2025-12-31(LocalDate), 2026-01-06T17:21:32.090819(LocalDateTime)
2026-01-06 17:21:32.101 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:32.101 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 482, 4292011, 2025-01-01, 2025-01-01, 3.00, 'CARRY_OVER', 2025-12-31, 2026-01-06T17:21:32.090819 )

2026-01-06 17:21:32.107 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:21:32.107 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:21:32.108 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:21:32.112 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 3
2026-01-06 17:21:32.112 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:21:32.113 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:32.113 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.117 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:21:32.117 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:32.117 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:21:32.117 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:21:32.117 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:32.117 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.122 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:32.122 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.123 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:32.123 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.128 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:32.128 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.129 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.129 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:21:32.133 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:32.133 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.134 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:32.134 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.140 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-06 17:21:32.141 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:32.141 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6291610: 6.0 + 0 extra = 6.0
2026-01-06 17:21:32.141 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 6.0
2026-01-06 17:21:32.141 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:32.141 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.150 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-06 17:21:32.150 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.150 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:32.150 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.155 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:21:32.155 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.155 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.155 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:21:32.160 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:32.160 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.160 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:32.160 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.165 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:21:32.165 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:32.165 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4292011: 3.0 + 0 extra = 3.0
2026-01-06 17:21:32.165 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4292011: 3.0
2026-01-06 17:21:32.165 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:32.165 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.173 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:32.173 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.173 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:32.173 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.178 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:32.178 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.179 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.179 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4292011(Long)
2026-01-06 17:21:32.183 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:32.183 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.183 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:32.183 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate), 2025-12-31(LocalDate), -3.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)(String), null, 2025-12-31(LocalDate), 0(Integer)
2026-01-06 17:21:32.192 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:32.193 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (4292011, 2025-12-31, 2025-12-31, -3.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)', , 2025-12-31, 0)

2026-01-06 17:21:32.193 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 3.0 days for user 4292011 (target expiry date: 2025-12-31)
2026-01-06 17:21:32.193 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 1 users affected, 3.0 total days expired
2026-01-06 17:21:32.207 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ? AND start_date = ?)
2026-01-06 17:21:32.207 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 4292011(Long), EXPIRED(String), 2025-12-31(LocalDate)
2026-01-06 17:21:32.214 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:21:32.214 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31)

2026-01-06 17:21:32.221 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:21:32.221 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:21:32.221 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:21:32.231 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 3
2026-01-06 17:21:32.231 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:21:32.231 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:32.231 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.235 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:21:32.235 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:32.235 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:21:32.235 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:21:32.235 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:32.235 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.239 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:32.239 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.239 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:32.239 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.248 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:32.248 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.248 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.248 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:21:32.253 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:32.253 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.253 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:32.253 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.260 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-06 17:21:32.260 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:32.260 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6291610: 6.0 + 0 extra = 6.0
2026-01-06 17:21:32.260 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 6.0
2026-01-06 17:21:32.260 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:32.260 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.353 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-06 17:21:32.354 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.354 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:32.354 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.360 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:21:32.363 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.363 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.363 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:21:32.367 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:32.367 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.368 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:32.368 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.373 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:21:32.373 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:32.373 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4292011: 3.0 + 0 extra = 3.0
2026-01-06 17:21:32.373 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4292011: 3.0
2026-01-06 17:21:32.373 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:32.373 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.381 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:32.381 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.381 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:32.381 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.386 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:21:32.386 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.386 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.387 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4292011(Long)
2026-01-06 17:21:32.392 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:32.393 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.393 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 0 users affected, 0 total days expired
2026-01-06 17:21:32.405 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ? AND start_date = ?)
2026-01-06 17:21:32.405 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 4292011(Long), EXPIRED(String), 2025-12-31(LocalDate)
2026-01-06 17:21:32.409 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:21:32.409 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31)

2026-01-06 17:21:32.421 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( ?, ?, ?, ?, ? )
2026-01-06 17:21:32.421 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 9292420(Long), test_penalty_9292420(String), password(String), Test Penalty(String), ACTIVE(String)
2026-01-06 17:21:32.430 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:21:32.431 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( 9292420, 'test_penalty_9292420', 'password', 'Test Penalty', 'ACTIVE' )

2026-01-06 17:21:32.432 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:32.432 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9292420(Long)
2026-01-06 17:21:32.436 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:32.436 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9292420 AND deleted = 0

2026-01-06 17:21:32.436 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:21:32.436 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 9292420(Long), 2025(Integer)
2026-01-06 17:21:32.441 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:21:32.441 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 9292420 AND year = 2025 - 1 AND deleted = 0

2026-01-06 17:21:32.441 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:21:32.441 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 9292420(Long), 2025(Integer)
2026-01-06 17:21:32.446 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:21:32.446 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 9292420 AND year = 2025

2026-01-06 17:21:32.446 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:32.446 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 9292420(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:21:32.455 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:21:32.456 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (9292420, 2025, 0, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:21:32.456 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 9292420 year 2025
2026-01-06 17:21:32.456 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:21:32.456 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 9292420(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 180(Long)
2026-01-06 17:21:32.468 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:21:32.469 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=9292420, year=2025, social_seniority=0, standard_quota=5.0, days_employed=365, actual_quota=5.0, last_year_balance=0, current_year_used=0 WHERE id=180 AND deleted=0

2026-01-06 17:21:32.469 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:21:32.469 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9292420(Long), 2025(Integer)
2026-01-06 17:21:32.474 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:21:32.474 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9292420 AND year = 2025 AND deleted = 0

2026-01-06 17:21:32.474 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìù Processing leave application: user=9292420, dates=2025-06-01 to 2025-06-06, days=6
2026-01-06 17:21:32.474 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9292420 AND year = 2025 AND deleted = 0

2026-01-06 17:21:32.474 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC
2026-01-06 17:21:32.474 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==> Parameters: 9292420(Long)
2026-01-06 17:21:32.480 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - <==      Total: 0
2026-01-06 17:21:32.480 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectAvailableBalances
SQL         : SELECT * FROM leave_record WHERE user_id = 9292420 AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC

2026-01-06 17:21:32.480 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED', 'LEAVE') AND expiry_date IS NOT NULL
2026-01-06 17:21:32.480 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==> Parameters: 9292420(Long)
2026-01-06 17:21:32.486 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - <==      Total: 0
2026-01-06 17:21:32.486 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9292420 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED', 'LEAVE') AND expiry_date IS NOT NULL

2026-01-06 17:21:32.486 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.486 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 9292420(Long)
2026-01-06 17:21:32.490 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-06 17:21:32.491 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9292420 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.491 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Available balances by expiry: {2026-12-31=5.0}
2026-01-06 17:21:32.491 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:32.491 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 9292420(Long), 2025-06-01(LocalDate), 2025-06-06(LocalDate), -5.0(BigDecimal), ANNUAL(String), ÂëòÂ∑•ËØ∑ÂÅá (Êù•Ëá™ÂΩìÂπ¥È¢ùÂ∫¶, ËøáÊúü: 2026-12-31)(String), 2026-01-06T17:21:32.491138(LocalDateTime), 2026-12-31(LocalDate), null
2026-01-06 17:21:32.506 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:32.506 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (9292420, 2025-06-01, 2025-06-06, -5.0, 'ANNUAL', 'ÂëòÂ∑•ËØ∑ÂÅá (Êù•Ëá™ÂΩìÂπ¥È¢ùÂ∫¶, ËøáÊúü: 2026-12-31)', 2026-01-06T17:21:32.491138, 2026-12-31, )

2026-01-06 17:21:32.506 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚úÖ Allocated 5.0 days from balance expiring on 2026-12-31
2026-01-06 17:21:32.506 WARN  com.leave.system.service.impl.LeaveServiceImpl - ‚ö†Ô∏è  Insufficient balance: 1.0 days needed. Creating OVERDRAFT record.
2026-01-06 17:21:32.506 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:32.507 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 9292420(Long), 2025-06-01(LocalDate), 2025-06-06(LocalDate), -1.0(BigDecimal), ANNUAL(String), ÂëòÂ∑•ËØ∑ÂÅá (È¢ùÂ∫¶ÈÄèÊîØ)(String), 2026-01-06T17:21:32.506834(LocalDateTime), null, null
2026-01-06 17:21:32.520 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:32.521 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (9292420, 2025-06-01, 2025-06-06, -1.0, 'ANNUAL', 'ÂëòÂ∑•ËØ∑ÂÅá (È¢ùÂ∫¶ÈÄèÊîØ)', 2026-01-06T17:21:32.506834, , )

2026-01-06 17:21:32.521 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚úÖ Created OVERDRAFT record for 1.0 days (no expiry)
2026-01-06 17:21:32.521 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Leave application processed successfully
2026-01-06 17:21:32.521 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:32.521 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9292420(Long)
2026-01-06 17:21:32.525 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:32.525 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9292420 AND deleted = 0

2026-01-06 17:21:32.525 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:21:32.525 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 9292420(Long), 2026(Integer)
2026-01-06 17:21:32.530 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-06 17:21:32.530 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 9292420 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:21:32.530 INFO  com.leave.system.service.impl.LeaveServiceImpl - üîç Calculating carry-over for user 9292420 from year 2025 to 2026
2026-01-06 17:21:32.530 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 9292420 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:21:32.530 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìä Last year quota: 5.0
2026-01-06 17:21:32.530 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND expiry_date IS NOT NULL
2026-01-06 17:21:32.530 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 9292420(Long), 2025(Integer)
2026-01-06 17:21:32.536 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 1
2026-01-06 17:21:32.536 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 9292420 AND YEAR(start_date) = 2025 AND expiry_date IS NOT NULL

2026-01-06 17:21:32.536 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìã Found 1 bucketed records (with expiry) in year 2025
2026-01-06 17:21:32.536 DEBUG com.leave.system.service.impl.LeaveServiceImpl -   Record: type=ANNUAL, days=-5.0, expiry=2026-12-31
2026-01-06 17:21:32.537 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚ûñ Usage/Deduction: -5.0 days (type=ANNUAL)
2026-01-06 17:21:32.537 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Calculation: 5.0 (quota) + -5.0 (net records) = 0.0 remaining
2026-01-06 17:21:32.537 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Final carry-over for user 9292420 year 2026: 0.0 days
2026-01-06 17:21:32.537 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-06 17:21:32.537 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 9292420(Long), 2026-01-01(LocalDate)
2026-01-06 17:21:32.541 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 0
2026-01-06 17:21:32.541 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 9292420 AND type = 'CARRY_OVER' AND start_date = 2026-01-01

2026-01-06 17:21:32.541 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:32.541 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 9292420(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), ‰∏äÂπ¥Áªì‰ΩôÂπ¥ÂÅáÁªìËΩ¨ (ËøáÊúü: 2026-12-31)(String), 2026-01-06T17:21:32.541522(LocalDateTime), 2026-12-31(LocalDate), null
2026-01-06 17:21:32.553 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:32.553 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (9292420, 2026-01-01, 2026-01-01, 0.0, 'CARRY_OVER', '‰∏äÂπ¥Áªì‰ΩôÂπ¥ÂÅáÁªìËΩ¨ (ËøáÊúü: 2026-12-31)', 2026-01-06T17:21:32.541522, 2026-12-31, )

2026-01-06 17:21:32.553 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Created carry-over record: 0.0 days (expires 2026-12-31)
2026-01-06 17:21:32.554 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:21:32.554 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 9292420(Long), 2026(Integer)
2026-01-06 17:21:32.558 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:21:32.558 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 9292420 AND year = 2026

2026-01-06 17:21:32.558 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:32.558 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 9292420(Long), 2026(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0.0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:21:32.571 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:21:32.571 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (9292420, 2026, 0, 5.0, 365, 5.0, 0.0, 0, 0)

2026-01-06 17:21:32.571 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 9292420 year 2026
2026-01-06 17:21:32.572 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:32.572 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9292420(Long)
2026-01-06 17:21:32.576 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:32.576 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9292420 AND deleted = 0

2026-01-06 17:21:32.576 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:21:32.576 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9292420(Long), 2026(Integer)
2026-01-06 17:21:32.583 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:21:32.583 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9292420 AND year = 2026 AND deleted = 0

2026-01-06 17:21:32.583 DEBUG com.leave.system.service.impl.LeaveServiceImpl - üîÑ Refreshing account for user 9292420 year 2026 based on today 2026-01-06
2026-01-06 17:21:32.584 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date ASC
2026-01-06 17:21:32.584 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9292420(Long), 2026(Integer)
2026-01-06 17:21:32.589 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-06 17:21:32.589 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9292420 AND YEAR(start_date) = 2026 ORDER BY start_date ASC

2026-01-06 17:21:32.589 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.589 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 9292420(Long)
2026-01-06 17:21:32.594 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-06 17:21:32.594 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9292420 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.614 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:32.614 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 3292614(Long), test_deduct_3292614(String), password(String), Test Deduct(String), 2016-01-06(LocalDate), 2016-01-06(LocalDate), ACTIVE(String)
2026-01-06 17:21:32.624 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:21:32.624 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 3292614, 'test_deduct_3292614', 'password', 'Test Deduct', 2016-01-06, 2016-01-06, 'ACTIVE' )

2026-01-06 17:21:32.624 DEBUG com.leave.system.mapper.LeaveAccountMapper.insert - ==>  Preparing: INSERT INTO leave_account ( user_id, year, standard_quota, days_employed, actual_quota, last_year_balance ) VALUES ( ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:32.625 DEBUG com.leave.system.mapper.LeaveAccountMapper.insert - ==> Parameters: 3292614(Long), 2025(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 10.0(BigDecimal)
2026-01-06 17:21:32.635 DEBUG com.leave.system.mapper.LeaveAccountMapper.insert - <==    Updates: 1
2026-01-06 17:21:32.635 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insert
SQL         : INSERT INTO leave_account ( id, user_id, year, standard_quota, days_employed, actual_quota, last_year_balance ) VALUES ( 182, 3292614, 2025, 5.0, 365, 5.0, 10.0 )

2026-01-06 17:21:32.635 INFO  com.leave.system.service.impl.LeaveServiceImpl - üîÑ Routing manual ADJUSTMENT_DEDUCT record to priority deduction logic. Days: 4.0
2026-01-06 17:21:32.635 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:21:32.635 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3292614(Long), 2025(Integer)
2026-01-06 17:21:32.643 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:21:32.644 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3292614 AND year = 2025 AND deleted = 0

2026-01-06 17:21:32.644 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC
2026-01-06 17:21:32.644 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==> Parameters: 3292614(Long)
2026-01-06 17:21:32.649 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - <==      Total: 0
2026-01-06 17:21:32.649 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectAvailableBalances
SQL         : SELECT * FROM leave_record WHERE user_id = 3292614 AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC

2026-01-06 17:21:32.650 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚ÑπÔ∏è Detected implicit carry-over (from account): 10.0 days
2026-01-06 17:21:32.650 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED', 'LEAVE') AND expiry_date IS NOT NULL
2026-01-06 17:21:32.650 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==> Parameters: 3292614(Long)
2026-01-06 17:21:32.657 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - <==      Total: 0
2026-01-06 17:21:32.657 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3292614 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED', 'LEAVE') AND expiry_date IS NOT NULL

2026-01-06 17:21:32.657 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.657 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 3292614(Long)
2026-01-06 17:21:32.663 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-06 17:21:32.663 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3292614 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.663 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Available balances by expiry: {2025-12-31=10.0, 2026-12-31=5.0}
2026-01-06 17:21:32.663 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:32.663 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 3292614(Long), 2025-06-01(LocalDate), 2025-06-01(LocalDate), -4.0(BigDecimal), ADJUSTMENT_DEDUCT(String), È¢ùÂ∫¶Êâ£Èô§ (Êù•Ëá™ÁªìËΩ¨È¢ùÂ∫¶, ËøáÊúü: 2025-12-31)(String), 2026-01-06T17:21:32.663355(LocalDateTime), 2025-12-31(LocalDate), null
2026-01-06 17:21:32.675 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:32.675 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (3292614, 2025-06-01, 2025-06-01, -4.0, 'ADJUSTMENT_DEDUCT', 'È¢ùÂ∫¶Êâ£Èô§ (Êù•Ëá™ÁªìËΩ¨È¢ùÂ∫¶, ËøáÊúü: 2025-12-31)', 2026-01-06T17:21:32.663355, 2025-12-31, )

2026-01-06 17:21:32.675 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚úÖ Allocated 4.0 days from balance expiring on 2025-12-31
2026-01-06 17:21:32.676 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:21:32.676 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:21:32.676 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:21:32.680 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 4
2026-01-06 17:21:32.680 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:21:32.680 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:32.680 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.687 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:21:32.687 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:32.687 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:21:32.687 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:21:32.687 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:32.687 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.693 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:32.693 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.693 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:32.693 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.697 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:32.697 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.697 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.697 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:21:32.701 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:32.701 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.701 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:32.701 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.706 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-06 17:21:32.706 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:32.706 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6291610: 6.0 + 0 extra = 6.0
2026-01-06 17:21:32.706 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 6.0
2026-01-06 17:21:32.706 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:32.706 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.713 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-06 17:21:32.713 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.713 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:32.713 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.718 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:21:32.718 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.718 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.718 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:21:32.726 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:32.726 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.726 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:32.726 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.730 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:21:32.730 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:32.730 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4292011: 3.0 + 0 extra = 3.0
2026-01-06 17:21:32.730 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4292011: 3.0
2026-01-06 17:21:32.730 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:32.730 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.734 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:32.734 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.734 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:32.734 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.739 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:21:32.739 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.739 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.740 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4292011(Long)
2026-01-06 17:21:32.746 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:32.746 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.746 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:32.746 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3292614(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.751 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:21:32.751 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3292614 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:32.751 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 3292614: 0
2026-01-06 17:21:32.751 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3292614: 0
2026-01-06 17:21:32.751 INFO  com.leave.system.scheduled.ScheduledTasks - ‚ÑπÔ∏è Adding implicit carry-over diff for user 3292614: 10.0
2026-01-06 17:21:32.751 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:32.751 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3292614(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.756 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:32.756 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3292614 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.756 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:32.756 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3292614(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:32.761 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:32.761 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3292614 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:32.761 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:32.761 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3292614(Long)
2026-01-06 17:21:32.770 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:32.770 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3292614 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:32.770 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:32.770 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 3292614(Long), 2025-12-31(LocalDate), 2025-12-31(LocalDate), -10.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)(String), null, 2025-12-31(LocalDate), 0(Integer)
2026-01-06 17:21:32.781 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:32.781 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (3292614, 2025-12-31, 2025-12-31, -10.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)', , 2025-12-31, 0)

2026-01-06 17:21:32.781 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 10.0 days for user 3292614 (target expiry date: 2025-12-31)
2026-01-06 17:21:32.781 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 1 users affected, 10.0 total days expired
2026-01-06 17:21:32.782 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:21:32.782 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 3292614(Long), EXPIRED(String)
2026-01-06 17:21:32.877 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:21:32.878 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 3292614 AND type = 'EXPIRED')

2026-01-06 17:21:32.904 DEBUG c.l.s.mapper.LeaveAccountMapper.deleteByUserId - ==>  Preparing: DELETE FROM leave_account WHERE user_id = ?
2026-01-06 17:21:32.904 DEBUG c.l.s.mapper.LeaveAccountMapper.deleteByUserId - ==> Parameters: 2292895(Long)
2026-01-06 17:21:32.915 DEBUG c.l.s.mapper.LeaveAccountMapper.deleteByUserId - <==    Updates: 0
2026-01-06 17:21:32.915 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.deleteByUserId
SQL         : DELETE FROM leave_account WHERE user_id = 2292895

2026-01-06 17:21:32.915 INFO  com.leave.system.service.impl.LeaveServiceImpl - Soft deleted all leave accounts for user 2292895
2026-01-06 17:21:32.926 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - ==>  Preparing: UPDATE leave_record SET deleted=1 WHERE deleted=0 AND (user_id = ?)
2026-01-06 17:21:32.926 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - ==> Parameters: 2292895(Long)
2026-01-06 17:21:32.947 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - <==    Updates: 0
2026-01-06 17:21:32.947 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.delete
SQL         : UPDATE leave_record SET deleted=1 WHERE deleted=0 AND (user_id = 2292895)

2026-01-06 17:21:32.947 DEBUG com.leave.system.mapper.SysUserMapper.delete - ==>  Preparing: UPDATE sys_user SET deleted=1 WHERE deleted=0 AND (username = ?)
2026-01-06 17:21:32.947 DEBUG com.leave.system.mapper.SysUserMapper.delete - ==> Parameters: test_expiry_2292895(String)
2026-01-06 17:21:32.956 DEBUG com.leave.system.mapper.SysUserMapper.delete - <==    Updates: 0
2026-01-06 17:21:32.956 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.delete
SQL         : UPDATE sys_user SET deleted=1 WHERE deleted=0 AND (username = 'test_expiry_2292895')

2026-01-06 17:21:32.956 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:32.957 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 2292895(Long), test_expiry_2292895(String), password(String), Test Expiry(String), 2020-01-01(LocalDate), 2020-01-01(LocalDate), ACTIVE(String)
2026-01-06 17:21:32.971 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:21:32.971 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 2292895, 'test_expiry_2292895', 'password', 'Test Expiry', 2020-01-01, 2020-01-01, 'ACTIVE' )

2026-01-06 17:21:32.978 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:32.979 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2292895(Long)
2026-01-06 17:21:32.984 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:32.984 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2292895 AND deleted = 0

2026-01-06 17:21:32.984 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:21:32.985 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 2292895(Long), 2025(Integer)
2026-01-06 17:21:32.990 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:21:32.990 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 2292895 AND year = 2025 - 1 AND deleted = 0

2026-01-06 17:21:32.990 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:21:32.990 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 2292895(Long), 2025(Integer)
2026-01-06 17:21:32.997 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:21:32.997 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 2292895 AND year = 2025

2026-01-06 17:21:32.997 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:32.997 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 2292895(Long), 2025(Integer), 6(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:21:33.009 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:21:33.009 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (2292895, 2025, 6, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:21:33.009 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 2292895 year 2025
2026-01-06 17:21:33.020 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:21:33.020 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 2292895(Long), 2025(Integer)
2026-01-06 17:21:33.026 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:21:33.026 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 2292895 AND year = 2025)

2026-01-06 17:21:33.026 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:21:33.027 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 2292895(Long), 2025(Integer), 6(Integer), 5.0(BigDecimal), 365(Integer), 0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 183(Long)
2026-01-06 17:21:33.037 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:21:33.037 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=2292895, year=2025, social_seniority=6, standard_quota=5.0, days_employed=365, actual_quota=0, last_year_balance=0.0, current_year_used=0.0 WHERE id=183 AND deleted=0

2026-01-06 17:21:33.037 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:33.037 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 2292895(Long), 2025-01-01(LocalDate), 2025-01-01(LocalDate), 5.0(BigDecimal), CARRY_OVER(String), 2025-12-31(LocalDate), 2026-01-06T17:21:33.037376(LocalDateTime)
2026-01-06 17:21:33.053 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:33.054 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 489, 2292895, 2025-01-01, 2025-01-01, 5.0, 'CARRY_OVER', 2025-12-31, 2026-01-06T17:21:33.037376 )

2026-01-06 17:21:33.054 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:33.054 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 2292895(Long), 2025-06-01(LocalDate), 2025-06-01(LocalDate), -2.0(BigDecimal), ANNUAL(String), 2026-12-31(LocalDate), 2026-01-06T17:21:33.054275(LocalDateTime)
2026-01-06 17:21:33.068 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:33.069 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 490, 2292895, 2025-06-01, 2025-06-01, -2.0, 'ANNUAL', 2026-12-31, 2026-01-06T17:21:33.054275 )

2026-01-06 17:21:33.073 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:21:33.074 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:21:33.074 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:21:33.079 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 4
2026-01-06 17:21:33.079 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:21:33.079 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:33.080 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.084 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:21:33.084 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:33.084 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:21:33.084 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:21:33.084 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:33.084 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.089 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:33.089 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:33.089 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:33.089 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.094 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:33.094 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:33.094 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:33.094 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:21:33.099 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:33.099 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:33.099 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:33.099 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.105 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-06 17:21:33.105 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:33.105 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6291610: 6.0 + 0 extra = 6.0
2026-01-06 17:21:33.105 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 6.0
2026-01-06 17:21:33.105 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:33.105 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.111 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-06 17:21:33.111 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:33.111 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:33.112 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.118 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:21:33.118 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:33.118 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:33.118 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:21:33.123 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:33.123 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:33.123 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:33.123 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.128 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:21:33.128 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:33.128 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4292011: 3.0 + 0 extra = 3.0
2026-01-06 17:21:33.128 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4292011: 3.0
2026-01-06 17:21:33.129 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:33.129 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.133 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:33.134 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:33.134 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:33.134 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.139 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:21:33.139 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:33.139 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:33.139 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4292011(Long)
2026-01-06 17:21:33.145 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:33.145 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:33.145 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:33.145 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.151 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:21:33.151 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:33.151 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 2292895: 5.0 + 0 extra = 5.0
2026-01-06 17:21:33.151 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2292895: 5.0
2026-01-06 17:21:33.151 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:33.151 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.156 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:21:33.156 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:33.156 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:33.156 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:21:33.160 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:33.160 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:21:33.161 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:33.161 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2292895(Long)
2026-01-06 17:21:33.166 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:33.166 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:33.166 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:33.166 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate), 2025-12-31(LocalDate), -5.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)(String), null, 2025-12-31(LocalDate), 0(Integer)
2026-01-06 17:21:33.178 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:33.178 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (2292895, 2025-12-31, 2025-12-31, -5.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)', , 2025-12-31, 0)

2026-01-06 17:21:33.178 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 5.0 days for user 2292895 (target expiry date: 2025-12-31)
2026-01-06 17:21:33.178 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 1 users affected, 5.0 total days expired
2026-01-06 17:21:33.189 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:21:33.189 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 2292895(Long), EXPIRED(String)
2026-01-06 17:21:33.196 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:21:33.197 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 2292895 AND type = 'EXPIRED')

2026-01-06 17:21:33.205 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( ?, ?, ?, ?, ? )
2026-01-06 17:21:33.205 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 8293205(Long), test_overdraft_8293205(String), password(String), Test Overdraft(String), ACTIVE(String)
2026-01-06 17:21:33.216 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:21:33.217 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( 8293205, 'test_overdraft_8293205', 'password', 'Test Overdraft', 'ACTIVE' )

2026-01-06 17:21:33.217 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:33.217 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8293205(Long)
2026-01-06 17:21:33.223 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:33.223 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8293205 AND deleted = 0

2026-01-06 17:21:33.223 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:21:33.223 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 8293205(Long), 2026(Integer)
2026-01-06 17:21:33.228 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:21:33.228 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 8293205 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:21:33.229 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:21:33.229 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 8293205(Long), 2026(Integer)
2026-01-06 17:21:33.234 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:21:33.234 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 8293205 AND year = 2026

2026-01-06 17:21:33.234 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:33.234 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 8293205(Long), 2026(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:21:33.244 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:21:33.244 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (8293205, 2026, 0, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:21:33.244 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 8293205 year 2026
2026-01-06 17:21:33.244 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:21:33.244 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 8293205(Long), 2026(Integer)
2026-01-06 17:21:33.249 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:21:33.249 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 8293205 AND year = 2026)

2026-01-06 17:21:33.250 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:21:33.250 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 8293205(Long), 2026(Integer), 0(Integer), 0(BigDecimal), 365(Integer), 0(BigDecimal), 0(BigDecimal), 0.0(BigDecimal), 184(Long)
2026-01-06 17:21:33.260 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:21:33.260 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=8293205, year=2026, social_seniority=0, standard_quota=0, days_employed=365, actual_quota=0, last_year_balance=0, current_year_used=0.0 WHERE id=184 AND deleted=0

2026-01-06 17:21:33.260 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:21:33.260 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8293205(Long), 2026(Integer)
2026-01-06 17:21:33.267 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:21:33.267 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8293205 AND year = 2026 AND deleted = 0

2026-01-06 17:21:33.267 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìù Processing leave application: user=8293205, dates=2026-06-01 to 2026-06-03, days=3
2026-01-06 17:21:33.267 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8293205 AND year = 2026 AND deleted = 0

2026-01-06 17:21:33.267 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:33.267 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8293205(Long)
2026-01-06 17:21:33.273 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:33.273 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8293205 AND deleted = 0

2026-01-06 17:21:33.273 DEBUG com.leave.system.service.impl.LeaveServiceImpl - üîÑ Refreshing account for user 8293205 year 2026 based on today 2026-01-06
2026-01-06 17:21:33.273 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC
2026-01-06 17:21:33.273 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==> Parameters: 8293205(Long)
2026-01-06 17:21:33.278 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - <==      Total: 0
2026-01-06 17:21:33.278 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectAvailableBalances
SQL         : SELECT * FROM leave_record WHERE user_id = 8293205 AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC

2026-01-06 17:21:33.278 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED', 'LEAVE') AND expiry_date IS NOT NULL
2026-01-06 17:21:33.278 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==> Parameters: 8293205(Long)
2026-01-06 17:21:33.283 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - <==      Total: 0
2026-01-06 17:21:33.283 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 8293205 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED', 'LEAVE') AND expiry_date IS NOT NULL

2026-01-06 17:21:33.283 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:33.283 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 8293205(Long)
2026-01-06 17:21:33.288 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-06 17:21:33.288 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 8293205 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:33.288 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Available balances by expiry: {2027-12-31=0.0}
2026-01-06 17:21:33.288 WARN  com.leave.system.service.impl.LeaveServiceImpl - ‚ö†Ô∏è  Insufficient balance: 3 days needed. Creating OVERDRAFT record.
2026-01-06 17:21:33.288 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:33.288 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 8293205(Long), 2026-06-01(LocalDate), 2026-06-03(LocalDate), -3(BigDecimal), ANNUAL(String), ÂëòÂ∑•ËØ∑ÂÅá (È¢ùÂ∫¶ÈÄèÊîØ)(String), 2026-01-06T17:21:33.288764(LocalDateTime), null, null
2026-01-06 17:21:33.299 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:33.299 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (8293205, 2026-06-01, 2026-06-03, -3, 'ANNUAL', 'ÂëòÂ∑•ËØ∑ÂÅá (È¢ùÂ∫¶ÈÄèÊîØ)', 2026-01-06T17:21:33.288764, , )

2026-01-06 17:21:33.299 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚úÖ Created OVERDRAFT record for 3 days (no expiry)
2026-01-06 17:21:33.299 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Leave application processed successfully
2026-01-06 17:21:33.299 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND expiry_date IS NULL)
2026-01-06 17:21:33.299 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 8293205(Long)
2026-01-06 17:21:33.305 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 0
2026-01-06 17:21:33.305 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 8293205 AND expiry_date IS NULL)

2026-01-06 17:21:33.413 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:33.413 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 3293412(Long), test_carryover_3293412(String), password(String), Test CarryOver(String), 2020-01-01(LocalDate), 2020-01-01(LocalDate), ACTIVE(String)
2026-01-06 17:21:33.426 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:21:33.427 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 3293412, 'test_carryover_3293412', 'password', 'Test CarryOver', 2020-01-01, 2020-01-01, 'ACTIVE' )

2026-01-06 17:21:33.432 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:33.432 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3293412(Long)
2026-01-06 17:21:33.438 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:33.438 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3293412 AND deleted = 0

2026-01-06 17:21:33.438 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:21:33.438 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 3293412(Long), 2025(Integer)
2026-01-06 17:21:33.444 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:21:33.444 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 3293412 AND year = 2025 - 1 AND deleted = 0

2026-01-06 17:21:33.444 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:21:33.444 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 3293412(Long), 2025(Integer)
2026-01-06 17:21:33.457 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:21:33.457 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 3293412 AND year = 2025

2026-01-06 17:21:33.457 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:33.457 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 3293412(Long), 2025(Integer), 6(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:21:33.472 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:21:33.472 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (3293412, 2025, 6, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:21:33.472 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 3293412 year 2025
2026-01-06 17:21:33.484 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, remarks, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:33.484 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 3293412(Long), 2025-01-01(LocalDate), 2025-01-01(LocalDate), -3.0(BigDecimal), EXPIRED(String), Old expiry(String), 2026-01-06T17:21:33.484389(LocalDateTime)
2026-01-06 17:21:33.497 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:33.497 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, remarks, create_time ) VALUES ( 493, 3293412, 2025-01-01, 2025-01-01, -3.0, 'EXPIRED', 'Old expiry', 2026-01-06T17:21:33.484389 )

2026-01-06 17:21:33.504 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:33.504 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3293412(Long)
2026-01-06 17:21:33.513 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:33.513 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3293412 AND deleted = 0

2026-01-06 17:21:33.513 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:21:33.514 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 3293412(Long), 2026(Integer)
2026-01-06 17:21:33.519 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-06 17:21:33.519 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 3293412 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:21:33.520 INFO  com.leave.system.service.impl.LeaveServiceImpl - üîç Calculating carry-over for user 3293412 from year 2025 to 2026
2026-01-06 17:21:33.520 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 3293412 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:21:33.520 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìä Last year quota: 5.0
2026-01-06 17:21:33.520 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND expiry_date IS NOT NULL
2026-01-06 17:21:33.520 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 3293412(Long), 2025(Integer)
2026-01-06 17:21:33.525 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 0
2026-01-06 17:21:33.525 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND YEAR(start_date) = 2025 AND expiry_date IS NOT NULL

2026-01-06 17:21:33.525 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìã Found 0 bucketed records (with expiry) in year 2025
2026-01-06 17:21:33.525 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Calculation: 5.0 (quota) + 0 (net records) = 5.0 remaining
2026-01-06 17:21:33.525 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Final carry-over for user 3293412 year 2026: 5.0 days
2026-01-06 17:21:33.526 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-06 17:21:33.526 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 3293412(Long), 2026-01-01(LocalDate)
2026-01-06 17:21:33.531 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 0
2026-01-06 17:21:33.531 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type = 'CARRY_OVER' AND start_date = 2026-01-01

2026-01-06 17:21:33.531 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:33.531 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 3293412(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 5.0(BigDecimal), CARRY_OVER(String), ‰∏äÂπ¥Áªì‰ΩôÂπ¥ÂÅáÁªìËΩ¨ (ËøáÊúü: 2026-12-31)(String), 2026-01-06T17:21:33.531198(LocalDateTime), 2026-12-31(LocalDate), null
2026-01-06 17:21:33.548 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:33.549 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (3293412, 2026-01-01, 2026-01-01, 5.0, 'CARRY_OVER', '‰∏äÂπ¥Áªì‰ΩôÂπ¥ÂÅáÁªìËΩ¨ (ËøáÊúü: 2026-12-31)', 2026-01-06T17:21:33.531198, 2026-12-31, )

2026-01-06 17:21:33.549 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Created carry-over record: 5.0 days (expires 2026-12-31)
2026-01-06 17:21:33.549 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:21:33.549 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 3293412(Long), 2026(Integer)
2026-01-06 17:21:33.556 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:21:33.556 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 3293412 AND year = 2026

2026-01-06 17:21:33.556 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:33.556 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 3293412(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0.0(BigDecimal), 5.0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:21:33.581 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:21:33.582 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (3293412, 2026, 6, 5.0, 6, 0.0, 5.0, 0, 0)

2026-01-06 17:21:33.582 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 3293412 year 2026
2026-01-06 17:21:33.603 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:33.603 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3293412(Long)
2026-01-06 17:21:33.608 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:33.608 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3293412 AND deleted = 0

2026-01-06 17:21:33.608 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:21:33.608 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3293412(Long), 2026(Integer)
2026-01-06 17:21:33.612 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:21:33.613 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3293412 AND year = 2026 AND deleted = 0

2026-01-06 17:21:33.613 DEBUG com.leave.system.service.impl.LeaveServiceImpl - üîÑ Refreshing account for user 3293412 year 2026 based on today 2026-01-06
2026-01-06 17:21:33.613 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date ASC
2026-01-06 17:21:33.613 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3293412(Long), 2026(Integer)
2026-01-06 17:21:33.618 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-06 17:21:33.618 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND YEAR(start_date) = 2026 ORDER BY start_date ASC

2026-01-06 17:21:33.618 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:33.618 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 3293412(Long)
2026-01-06 17:21:33.625 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 1
2026-01-06 17:21:33.625 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:33.630 INFO  o.s.t.c.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.leave.system.scheduled.LeaveExpiryBugTest]: LeaveExpiryBugTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-06 17:21:33.631 INFO  o.s.b.t.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.leave.system.LeaveSystemApplication for test class com.leave.system.scheduled.LeaveExpiryBugTest
2026-01-06 17:21:33.638 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - ==>  Preparing: UPDATE leave_record SET deleted=1 WHERE deleted=0
2026-01-06 17:21:33.638 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - ==> Parameters: 
2026-01-06 17:21:33.650 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - <==    Updates: 17
2026-01-06 17:21:33.650 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.delete
SQL         : UPDATE leave_record SET deleted=1 WHERE deleted=0

2026-01-06 17:21:33.650 DEBUG com.leave.system.mapper.LeaveAccountMapper.delete - ==>  Preparing: UPDATE leave_account SET deleted=1 WHERE deleted=0
2026-01-06 17:21:33.651 DEBUG com.leave.system.mapper.LeaveAccountMapper.delete - ==> Parameters: 
2026-01-06 17:21:33.660 DEBUG com.leave.system.mapper.LeaveAccountMapper.delete - <==    Updates: 42
2026-01-06 17:21:33.660 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.delete
SQL         : UPDATE leave_account SET deleted=1 WHERE deleted=0

2026-01-06 17:21:33.660 DEBUG com.leave.system.mapper.SysUserMapper.delete - ==>  Preparing: UPDATE sys_user SET deleted=1 WHERE deleted=0
2026-01-06 17:21:33.660 DEBUG com.leave.system.mapper.SysUserMapper.delete - ==> Parameters: 
2026-01-06 17:21:33.673 DEBUG com.leave.system.mapper.SysUserMapper.delete - <==    Updates: 40
2026-01-06 17:21:33.673 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.delete
SQL         : UPDATE sys_user SET deleted=1 WHERE deleted=0

2026-01-06 17:21:33.673 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:33.673 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 10293638(Long), bug_repro_10293638(String), password(String), Bug Repro(String), 2020-01-01(LocalDate), 2020-01-01(LocalDate), ACTIVE(String)
2026-01-06 17:21:33.682 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:21:33.682 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 10293638, 'bug_repro_10293638', 'password', 'Bug Repro', 2020-01-01, 2020-01-01, 'ACTIVE' )

2026-01-06 17:21:33.682 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:21:33.682 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10293638(Long)
2026-01-06 17:21:33.687 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:21:33.687 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10293638 AND deleted = 0

2026-01-06 17:21:33.687 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:21:33.687 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 10293638(Long), 2026(Integer)
2026-01-06 17:21:33.691 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:21:33.691 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 10293638 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:21:33.691 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:21:33.691 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 10293638(Long), 2026(Integer)
2026-01-06 17:21:33.696 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:21:33.696 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 10293638 AND year = 2026

2026-01-06 17:21:33.696 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:33.696 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 10293638(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:21:33.705 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:21:33.705 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (10293638, 2026, 6, 5.0, 6, 0.0, 0, 0, 0)

2026-01-06 17:21:33.705 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 10293638 year 2026
2026-01-06 17:21:33.705 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:21:33.705 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 10293638(Long), 2026(Integer)
2026-01-06 17:21:33.712 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:21:33.712 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 10293638 AND year = 2026)

2026-01-06 17:21:33.712 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:21:33.712 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 10293638(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0(BigDecimal), 0(BigDecimal), 0.0(BigDecimal), 187(Long)
2026-01-06 17:21:33.721 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:21:33.721 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=10293638, year=2026, social_seniority=6, standard_quota=5.0, days_employed=6, actual_quota=0, last_year_balance=0, current_year_used=0.0 WHERE id=187 AND deleted=0

2026-01-06 17:21:33.721 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:33.721 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 10293638(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 7.0(BigDecimal), CARRY_OVER(String), 2026-12-31(LocalDate), 2025-07-06T17:21:33.721490(LocalDateTime), 0(Integer)
2026-01-06 17:21:33.731 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:33.731 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( 495, 10293638, 2026-01-01, 2026-01-01, 7.0, 'CARRY_OVER', 2026-12-31, 2025-07-06T17:21:33.721490, 0 )

2026-01-06 17:21:33.731 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:21:33.732 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 10293638(Long), 2026-05-01(LocalDate), 2026-05-02(LocalDate), -2.0(BigDecimal), LEAVE(String), 2026-12-31(LocalDate), 2025-08-06T17:21:33.731783(LocalDateTime), 0(Integer)
2026-01-06 17:21:33.739 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:21:33.740 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time, deleted ) VALUES ( 496, 10293638, 2026-05-01, 2026-05-02, -2.0, 'LEAVE', 2026-12-31, 2025-08-06T17:21:33.731783, 0 )

2026-01-06 17:21:33.740 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:21:33.740 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 10293638(Long), 2026-12-31(LocalDate)
2026-01-06 17:21:33.744 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:21:33.744 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10293638 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:33.744 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2026 (Target Expiry: 2026-12-31)
2026-01-06 17:21:33.744 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:21:33.744 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2026(Integer)
2026-01-06 17:21:33.748 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 1
2026-01-06 17:21:33.748 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2026 AND deleted = 0

2026-01-06 17:21:33.748 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10293638 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:21:33.748 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 10293638: 7.0 + 0 extra = 7.0
2026-01-06 17:21:33.748 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 10293638: 7.0
2026-01-06 17:21:33.748 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = ? AND deleted = 0
2026-01-06 17:21:33.748 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 10293638(Long), 2026-12-31(LocalDate)
2026-01-06 17:21:33.752 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 1
2026-01-06 17:21:33.752 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10293638 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'LEAVE') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:21:33.752 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:21:33.752 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 10293638(Long), 2026-12-31(LocalDate)
2026-01-06 17:21:33.756 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:21:33.756 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 10293638 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:21:33.756 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:21:33.756 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 10293638(Long)
2026-01-06 17:21:33.759 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:21:33.759 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10293638 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:21:33.760 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:21:33.760 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 10293638(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -5.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), 0(Integer)
2026-01-06 17:21:33.768 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:21:33.768 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (10293638, 2026-12-31, 2026-12-31, -5.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, 0)

2026-01-06 17:21:33.768 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 5.0 days for user 10293638 (target expiry date: 2026-12-31)
2026-01-06 17:21:33.768 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2026 completed: 1 users affected, 5.0 total days expired
2026-01-06 17:21:33.768 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:21:33.768 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 10293638(Long), EXPIRED(String)
2026-01-06 17:21:33.772 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:21:33.772 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 10293638 AND type = 'EXPIRED')

2026-01-06 17:28:39.884 INFO  com.leave.system.scheduled.LeaveExpiryCleanupTest - Starting LeaveExpiryCleanupTest using Java 17.0.6 with PID 29662 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:28:39.884 DEBUG com.leave.system.scheduled.LeaveExpiryCleanupTest - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:28:39.885 INFO  com.leave.system.scheduled.LeaveExpiryCleanupTest - The following 1 profile is active: "test"
2026-01-06 17:28:40.438 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@599a9cb2'
2026-01-06 17:28:40.438 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@1f536481'
2026-01-06 17:28:40.501 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:28:40.517 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:28:40.528 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:28:40.540 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:28:40.550 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:28:40.560 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:28:40.580 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:28:40.589 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:27
2026-01-06 17:28:40.599 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:28:40.804 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@782ac148
2026-01-06 17:28:40.806 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:28:40.934 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:28:40.941 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:28:40.951 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:28:40.970 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:28:40.970 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:28:40.972 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:28:40.972 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:28:40.972 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:28:40.972 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:28:41.072 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:28:41.160 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5604b85, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5df7a065, org.springframework.security.web.context.SecurityContextHolderFilter@2b6fcca1, org.springframework.security.web.header.HeaderWriterFilter@29519337, org.springframework.web.filter.CorsFilter@3f45dfec, org.springframework.security.web.authentication.logout.LogoutFilter@79e2606f, com.leave.system.security.JwtAuthenticationFilter@68e24e7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@24b3f778, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@164dea80, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7c69e1e1, org.springframework.security.web.session.SessionManagementFilter@50785f86, org.springframework.security.web.access.ExceptionTranslationFilter@718f3088, org.springframework.security.web.access.intercept.AuthorizationFilter@47b4ac83]
2026-01-06 17:28:41.328 INFO  com.leave.system.scheduled.LeaveExpiryCleanupTest - Started LeaveExpiryCleanupTest in 1.602 seconds (process running for 1.962)
2026-01-06 17:28:41.328 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:28:41.329 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:28:41.778 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( ?, ?, ?, ?, ? )
2026-01-06 17:28:41.779 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 5721687(Long), test_deduct_fix_5721687(String), password(String), Test Deduct Fix(String), ACTIVE(String)
2026-01-06 17:28:41.792 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:28:41.793 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( 5721687, 'test_deduct_fix_5721687', 'password', 'Test Deduct Fix', 'ACTIVE' )

2026-01-06 17:28:41.794 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:41.795 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 5721687(Long), 2025-01-01(LocalDate), 2025-01-01(LocalDate), 5.0(BigDecimal), CARRY_OVER(String), 2025-12-31(LocalDate), 2026-01-06T17:28:41.793803(LocalDateTime)
2026-01-06 17:28:41.804 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:28:41.805 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 504, 5721687, 2025-01-01, 2025-01-01, 5.0, 'CARRY_OVER', 2025-12-31, 2026-01-06T17:28:41.793803 )

2026-01-06 17:28:41.812 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:28:41.813 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:28:41.813 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:28:41.818 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 5
2026-01-06 17:28:41.818 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:28:41.819 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:41.819 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.823 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:41.824 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:41.824 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:28:41.824 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:28:41.825 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:41.825 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.829 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:41.830 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:41.830 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:41.830 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.834 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:41.834 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:41.835 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:41.835 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:28:41.841 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:41.841 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:41.841 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:41.841 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.847 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:41.847 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:41.848 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 6291610: 0
2026-01-06 17:28:41.848 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 0
2026-01-06 17:28:41.848 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:41.848 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.852 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:41.852 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:41.853 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:41.853 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.858 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:41.858 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:41.858 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:41.858 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:28:41.862 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:41.862 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:41.862 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:41.862 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.867 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:41.867 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:41.867 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 4292011: 0
2026-01-06 17:28:41.867 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4292011: 0
2026-01-06 17:28:41.867 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:41.867 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.872 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:41.872 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:41.872 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:41.872 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.876 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:41.876 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:41.877 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:41.877 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4292011(Long)
2026-01-06 17:28:41.883 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:41.883 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:41.883 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:41.883 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.889 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:41.889 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:41.889 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 2292895: 0
2026-01-06 17:28:41.889 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2292895: 0
2026-01-06 17:28:41.890 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:41.890 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.896 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:41.896 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:41.897 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:41.897 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.902 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:41.902 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:41.902 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:41.902 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2292895(Long)
2026-01-06 17:28:41.907 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:41.907 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:41.907 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:41.907 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.911 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:41.912 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:41.912 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 3293412: 0
2026-01-06 17:28:41.912 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3293412: 0
2026-01-06 17:28:41.912 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:41.912 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.916 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:41.916 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:41.917 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:41.917 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:41.922 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:41.923 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:41.923 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:41.923 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3293412(Long)
2026-01-06 17:28:41.928 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:41.929 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:41.929 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 0 users affected, 0 total days expired
2026-01-06 17:28:41.943 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:41.943 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5721687(Long)
2026-01-06 17:28:41.949 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:41.949 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5721687 AND deleted = 0

2026-01-06 17:28:41.949 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:28:41.949 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 5721687(Long), 2026(Integer)
2026-01-06 17:28:41.955 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:28:41.955 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 5721687 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:28:41.955 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:28:41.955 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 5721687(Long), 2026(Integer)
2026-01-06 17:28:41.960 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:28:41.960 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 5721687 AND year = 2026

2026-01-06 17:28:41.960 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:41.961 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 5721687(Long), 2026(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:28:41.969 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:28:41.970 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (5721687, 2026, 0, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:28:41.970 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 5721687 year 2026
2026-01-06 17:28:41.994 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:28:41.995 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 5721687(Long), 2026(Integer)
2026-01-06 17:28:42.002 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:28:42.002 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 5721687 AND year = 2026)

2026-01-06 17:28:42.003 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:28:42.004 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 5721687(Long), 2026(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 10.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 188(Long)
2026-01-06 17:28:42.013 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:28:42.014 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=5721687, year=2026, social_seniority=0, standard_quota=5.0, days_employed=365, actual_quota=10.0, last_year_balance=0.0, current_year_used=0.0 WHERE id=188 AND deleted=0

2026-01-06 17:28:42.019 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:28:42.019 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5721687(Long), 2026(Integer)
2026-01-06 17:28:42.023 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:28:42.023 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5721687 AND year = 2026 AND deleted = 0

2026-01-06 17:28:42.023 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìù Processing leave application: user=5721687, dates=2026-01-06 to 2026-01-06, days=1
2026-01-06 17:28:42.023 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5721687 AND year = 2026 AND deleted = 0

2026-01-06 17:28:42.023 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:42.023 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5721687(Long)
2026-01-06 17:28:42.028 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:42.028 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5721687 AND deleted = 0

2026-01-06 17:28:42.028 DEBUG com.leave.system.service.impl.LeaveServiceImpl - üîÑ Refreshing account for user 5721687 year 2026 based on today 2026-01-06
2026-01-06 17:28:42.028 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-06 17:28:42.029 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 5721687(Long), 2026(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 188(Long)
2026-01-06 17:28:42.039 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-06 17:28:42.040 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 5721687, year = 2026, social_seniority = 0, standard_quota = 5.0, days_employed = 365, actual_quota = 5.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 188

2026-01-06 17:28:42.040 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Refreshed dynamic quota for user 5721687: employed=365 days, quota=5.0
2026-01-06 17:28:42.040 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC
2026-01-06 17:28:42.040 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==> Parameters: 5721687(Long)
2026-01-06 17:28:42.044 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - <==      Total: 0
2026-01-06 17:28:42.045 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectAvailableBalances
SQL         : SELECT * FROM leave_record WHERE user_id = 5721687 AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC

2026-01-06 17:28:42.045 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL
2026-01-06 17:28:42.045 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==> Parameters: 5721687(Long)
2026-01-06 17:28:42.051 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - <==      Total: 0
2026-01-06 17:28:42.051 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 5721687 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL

2026-01-06 17:28:42.051 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.051 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 5721687(Long)
2026-01-06 17:28:42.056 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-06 17:28:42.056 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 5721687 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.056 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Available balances by expiry: {2027-12-31=5.0}
2026-01-06 17:28:42.057 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:42.057 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 5721687(Long), 2026-01-06(LocalDate), 2026-01-06(LocalDate), -1(BigDecimal), ANNUAL(String), ÂëòÂ∑•ËØ∑ÂÅá (Êù•Ëá™ÂΩìÂπ¥È¢ùÂ∫¶, ËøáÊúü: 2027-12-31)(String), 2026-01-06T17:28:42.057006(LocalDateTime), 2027-12-31(LocalDate), null
2026-01-06 17:28:42.068 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:42.069 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (5721687, 2026-01-06, 2026-01-06, -1, 'ANNUAL', 'ÂëòÂ∑•ËØ∑ÂÅá (Êù•Ëá™ÂΩìÂπ¥È¢ùÂ∫¶, ËøáÊúü: 2027-12-31)', 2026-01-06T17:28:42.057006, 2027-12-31, )

2026-01-06 17:28:42.069 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚úÖ Allocated 1 days from balance expiring on 2027-12-31
2026-01-06 17:28:42.069 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Leave application processed successfully
2026-01-06 17:28:42.081 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?) ORDER BY create_time DESC
2026-01-06 17:28:42.081 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 5721687(Long), ANNUAL(String)
2026-01-06 17:28:42.085 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 0
2026-01-06 17:28:42.086 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 5721687 AND type = 'ANNUAL') ORDER BY create_time DESC

2026-01-06 17:28:42.096 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( ?, ?, ?, ?, ? )
2026-01-06 17:28:42.096 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 6722095(Long), test_double_count_6722095(String), password(String), Test Double Count(String), ACTIVE(String)
2026-01-06 17:28:42.106 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:28:42.106 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( 6722095, 'test_double_count_6722095', 'password', 'Test Double Count', 'ACTIVE' )

2026-01-06 17:28:42.111 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:42.111 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6722095(Long)
2026-01-06 17:28:42.117 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:42.118 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6722095 AND deleted = 0

2026-01-06 17:28:42.118 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:28:42.118 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 6722095(Long), 2025(Integer)
2026-01-06 17:28:42.122 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:28:42.123 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 6722095 AND year = 2025 - 1 AND deleted = 0

2026-01-06 17:28:42.123 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:28:42.123 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 6722095(Long), 2025(Integer)
2026-01-06 17:28:42.127 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:28:42.127 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 6722095 AND year = 2025

2026-01-06 17:28:42.128 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:42.128 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 6722095(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:28:42.139 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:28:42.139 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (6722095, 2025, 0, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:28:42.140 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 6722095 year 2025
2026-01-06 17:28:42.151 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:28:42.151 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 6722095(Long), 2025(Integer)
2026-01-06 17:28:42.156 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:28:42.157 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 6722095 AND year = 2025)

2026-01-06 17:28:42.157 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:28:42.157 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 6722095(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 189(Long)
2026-01-06 17:28:42.168 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:28:42.169 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=6722095, year=2025, social_seniority=0, standard_quota=5.0, days_employed=365, actual_quota=0, last_year_balance=0.0, current_year_used=0.0 WHERE id=189 AND deleted=0

2026-01-06 17:28:42.169 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:42.169 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 6722095(Long), 2025-06-01(LocalDate), 2025-06-01(LocalDate), 2.0(BigDecimal), ADJUSTMENT_ADD(String), 2025-12-31(LocalDate), 2026-01-06T15:28:42.169407(LocalDateTime)
2026-01-06 17:28:42.180 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:28:42.181 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 506, 6722095, 2025-06-01, 2025-06-01, 2.0, 'ADJUSTMENT_ADD', 2025-12-31, 2026-01-06T15:28:42.169407 )

2026-01-06 17:28:42.181 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:42.182 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 6722095(Long), 2025-06-02(LocalDate), 2025-06-02(LocalDate), -1.0(BigDecimal), ANNUAL(String), 2025-12-31(LocalDate), 2026-01-06T16:28:42.181249(LocalDateTime)
2026-01-06 17:28:42.192 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:28:42.192 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 507, 6722095, 2025-06-02, 2025-06-02, -1.0, 'ANNUAL', 2025-12-31, 2026-01-06T16:28:42.181249 )

2026-01-06 17:28:42.193 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:42.193 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 6722095(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 6.0(BigDecimal), CARRY_OVER(String), 2025-12-31(LocalDate), 2026-01-06T17:28:42.192661(LocalDateTime)
2026-01-06 17:28:42.203 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:28:42.204 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 508, 6722095, 2026-01-01, 2026-01-01, 6.0, 'CARRY_OVER', 2025-12-31, 2026-01-06T17:28:42.192661 )

2026-01-06 17:28:42.204 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:42.204 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 6722095(Long), 2026-02-01(LocalDate), 2026-02-01(LocalDate), -0.5(BigDecimal), ANNUAL(String), 2025-12-31(LocalDate), 2026-01-06T17:29:42.204320(LocalDateTime)
2026-01-06 17:28:42.303 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:28:42.303 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 509, 6722095, 2026-02-01, 2026-02-01, -0.5, 'ANNUAL', 2025-12-31, 2026-01-06T17:29:42.204320 )

2026-01-06 17:28:42.308 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:28:42.308 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:28:42.308 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:28:42.314 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 6
2026-01-06 17:28:42.314 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:28:42.314 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.314 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.319 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.319 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.319 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:28:42.319 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:28:42.319 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.319 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.324 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.324 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.324 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.325 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.329 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.329 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.329 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.329 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:28:42.334 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.335 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.335 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.335 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.339 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.339 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.339 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 6291610: 0
2026-01-06 17:28:42.339 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 0
2026-01-06 17:28:42.343 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.343 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.348 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.352 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.352 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.352 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.357 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.357 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.357 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.358 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:28:42.364 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.364 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.364 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.364 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.369 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.369 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.369 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 4292011: 0
2026-01-06 17:28:42.369 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4292011: 0
2026-01-06 17:28:42.369 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.369 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.374 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.374 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.374 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.374 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.380 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.380 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.380 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.380 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4292011(Long)
2026-01-06 17:28:42.385 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.386 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.386 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.386 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.391 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.391 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.391 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 2292895: 0
2026-01-06 17:28:42.391 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2292895: 0
2026-01-06 17:28:42.391 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.392 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.396 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.396 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.396 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.396 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.401 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.401 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.401 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.401 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2292895(Long)
2026-01-06 17:28:42.406 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.407 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.407 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.407 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.412 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.412 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.412 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 3293412: 0
2026-01-06 17:28:42.412 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3293412: 0
2026-01-06 17:28:42.412 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.412 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.417 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.417 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.417 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.417 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.422 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.422 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.422 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.422 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3293412(Long)
2026-01-06 17:28:42.428 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.429 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.429 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.429 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.434 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-06 17:28:42.434 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.435 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6722095: 6.0 + 0 extra = 6.0
2026-01-06 17:28:42.435 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6722095: 6.0
2026-01-06 17:28:42.435 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.435 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.440 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-06 17:28:42.440 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.441 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.441 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.445 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.445 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.446 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.446 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6722095(Long)
2026-01-06 17:28:42.452 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.452 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.452 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:42.452 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate), 2025-12-31(LocalDate), -4.5(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)(String), null, 2025-12-31(LocalDate), 0(Integer)
2026-01-06 17:28:42.464 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:42.464 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (6722095, 2025-12-31, 2025-12-31, -4.5, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)', , 2025-12-31, 0)

2026-01-06 17:28:42.464 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 4.5 days for user 6722095 (target expiry date: 2025-12-31)
2026-01-06 17:28:42.464 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 1 users affected, 4.5 total days expired
2026-01-06 17:28:42.476 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:28:42.476 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 6722095(Long), EXPIRED(String)
2026-01-06 17:28:42.482 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:28:42.482 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 6722095 AND type = 'EXPIRED')

2026-01-06 17:28:42.485 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( ?, ?, ?, ?, ? )
2026-01-06 17:28:42.485 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 4722485(Long), test_idempotency_4722485(String), password(String), Test Idempotency(String), ACTIVE(String)
2026-01-06 17:28:42.497 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:28:42.497 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( 4722485, 'test_idempotency_4722485', 'password', 'Test Idempotency', 'ACTIVE' )

2026-01-06 17:28:42.502 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:42.502 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4722485(Long)
2026-01-06 17:28:42.507 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:42.507 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4722485 AND deleted = 0

2026-01-06 17:28:42.507 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:28:42.507 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 4722485(Long), 2025(Integer)
2026-01-06 17:28:42.512 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:28:42.512 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 4722485 AND year = 2025 - 1 AND deleted = 0

2026-01-06 17:28:42.512 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:28:42.512 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 4722485(Long), 2025(Integer)
2026-01-06 17:28:42.517 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:28:42.517 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 4722485 AND year = 2025

2026-01-06 17:28:42.517 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:42.518 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 4722485(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:28:42.528 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:28:42.529 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (4722485, 2025, 0, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:28:42.529 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 4722485 year 2025
2026-01-06 17:28:42.539 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:28:42.539 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 4722485(Long), 2025(Integer)
2026-01-06 17:28:42.544 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:28:42.545 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 4722485 AND year = 2025)

2026-01-06 17:28:42.545 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:28:42.545 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 4722485(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 190(Long)
2026-01-06 17:28:42.560 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:28:42.560 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=4722485, year=2025, social_seniority=0, standard_quota=5.0, days_employed=365, actual_quota=0, last_year_balance=0.0, current_year_used=0.0 WHERE id=190 AND deleted=0

2026-01-06 17:28:42.563 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:42.564 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 4722485(Long), 2025-01-01(LocalDate), 2025-01-01(LocalDate), 3.00(BigDecimal), CARRY_OVER(String), 2025-12-31(LocalDate), 2026-01-06T17:28:42.561297(LocalDateTime)
2026-01-06 17:28:42.580 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:28:42.582 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 511, 4722485, 2025-01-01, 2025-01-01, 3.00, 'CARRY_OVER', 2025-12-31, 2026-01-06T17:28:42.561297 )

2026-01-06 17:28:42.587 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:28:42.587 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:28:42.588 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:28:42.595 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 7
2026-01-06 17:28:42.595 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:28:42.596 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.596 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.600 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.600 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.600 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:28:42.600 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:28:42.601 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.601 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.605 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.605 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.606 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.606 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.611 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.611 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.611 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.611 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:28:42.617 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.617 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.617 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.617 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.622 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.622 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.622 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 6291610: 0
2026-01-06 17:28:42.622 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 0
2026-01-06 17:28:42.622 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.622 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.626 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.626 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.626 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.626 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.630 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.630 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.630 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.630 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:28:42.634 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.634 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.634 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.634 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.640 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.640 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.640 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 4292011: 0
2026-01-06 17:28:42.640 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4292011: 0
2026-01-06 17:28:42.640 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.640 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.644 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.645 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.645 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.645 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.649 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.649 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.650 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.650 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4292011(Long)
2026-01-06 17:28:42.654 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.654 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.654 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.654 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.658 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.658 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.658 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 2292895: 0
2026-01-06 17:28:42.658 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2292895: 0
2026-01-06 17:28:42.659 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.659 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.664 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.664 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.664 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.664 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.671 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.671 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.671 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.672 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2292895(Long)
2026-01-06 17:28:42.677 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.677 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.677 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.677 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.681 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.681 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.681 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 3293412: 0
2026-01-06 17:28:42.681 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3293412: 0
2026-01-06 17:28:42.682 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.682 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.687 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.687 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.687 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.687 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.692 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.692 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.692 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.692 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3293412(Long)
2026-01-06 17:28:42.697 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.697 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.697 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.697 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.702 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-06 17:28:42.702 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.702 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6722095: 6.0 + 0 extra = 6.0
2026-01-06 17:28:42.702 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6722095: 6.0
2026-01-06 17:28:42.703 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.703 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.708 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-06 17:28:42.708 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.708 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.708 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.715 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:28:42.715 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.715 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.715 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6722095(Long)
2026-01-06 17:28:42.721 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.721 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.721 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.721 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.728 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:28:42.728 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.728 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4722485: 3.0 + 0 extra = 3.0
2026-01-06 17:28:42.728 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4722485: 3.0
2026-01-06 17:28:42.728 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.728 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.825 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.825 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.825 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.825 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.830 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.831 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.831 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.831 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4722485(Long)
2026-01-06 17:28:42.836 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.836 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.836 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:42.837 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate), 2025-12-31(LocalDate), -3.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)(String), null, 2025-12-31(LocalDate), 0(Integer)
2026-01-06 17:28:42.845 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:42.845 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (4722485, 2025-12-31, 2025-12-31, -3.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)', , 2025-12-31, 0)

2026-01-06 17:28:42.846 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 3.0 days for user 4722485 (target expiry date: 2025-12-31)
2026-01-06 17:28:42.846 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 1 users affected, 3.0 total days expired
2026-01-06 17:28:42.858 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ? AND start_date = ?)
2026-01-06 17:28:42.858 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 4722485(Long), EXPIRED(String), 2025-12-31(LocalDate)
2026-01-06 17:28:42.866 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:28:42.867 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 4722485 AND type = 'EXPIRED' AND start_date = 2025-12-31)

2026-01-06 17:28:42.872 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:28:42.872 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:28:42.872 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:28:42.881 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 7
2026-01-06 17:28:42.881 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:28:42.881 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.881 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.887 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.887 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.887 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:28:42.887 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:28:42.887 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.887 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.892 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.892 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.892 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.892 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.897 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.897 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.897 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.898 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:28:42.902 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.902 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.902 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.902 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.907 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.908 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.908 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 6291610: 0
2026-01-06 17:28:42.908 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 0
2026-01-06 17:28:42.908 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.908 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.913 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.913 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.913 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.913 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.918 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.918 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.918 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.918 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:28:42.924 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.924 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.925 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.925 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.930 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.930 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.930 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 4292011: 0
2026-01-06 17:28:42.930 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4292011: 0
2026-01-06 17:28:42.930 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.930 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.935 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.935 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.935 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.935 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.940 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.940 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.940 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.941 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4292011(Long)
2026-01-06 17:28:42.946 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.946 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.946 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.946 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.951 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.951 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.951 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 2292895: 0
2026-01-06 17:28:42.951 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2292895: 0
2026-01-06 17:28:42.951 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.951 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.956 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.956 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.956 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.956 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.963 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.963 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.963 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.963 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2292895(Long)
2026-01-06 17:28:42.968 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.968 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.968 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.968 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.974 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:42.974 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.974 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 3293412: 0
2026-01-06 17:28:42.974 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3293412: 0
2026-01-06 17:28:42.974 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.974 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.980 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:42.980 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.980 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:42.981 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.985 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:42.985 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:42.986 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:42.986 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3293412(Long)
2026-01-06 17:28:42.991 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:42.991 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:42.991 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:42.991 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:42.999 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-06 17:28:42.999 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:42.999 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6722095: 6.0 + 0 extra = 6.0
2026-01-06 17:28:42.999 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6722095: 6.0
2026-01-06 17:28:42.999 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:42.999 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.011 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-06 17:28:43.011 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.011 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.011 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.017 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:28:43.017 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.017 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.017 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6722095(Long)
2026-01-06 17:28:43.022 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.022 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.022 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.022 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.027 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:28:43.027 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.027 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4722485: 3.0 + 0 extra = 3.0
2026-01-06 17:28:43.027 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4722485: 3.0
2026-01-06 17:28:43.027 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.027 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.035 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.036 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.036 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.036 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.041 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:28:43.041 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.041 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.041 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4722485(Long)
2026-01-06 17:28:43.045 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.045 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.045 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 0 users affected, 0 total days expired
2026-01-06 17:28:43.061 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ? AND start_date = ?)
2026-01-06 17:28:43.061 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 4722485(Long), EXPIRED(String), 2025-12-31(LocalDate)
2026-01-06 17:28:43.068 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:28:43.068 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 4722485 AND type = 'EXPIRED' AND start_date = 2025-12-31)

2026-01-06 17:28:43.085 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( ?, ?, ?, ?, ? )
2026-01-06 17:28:43.085 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 9723084(Long), test_penalty_9723084(String), password(String), Test Penalty(String), ACTIVE(String)
2026-01-06 17:28:43.096 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:28:43.097 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( 9723084, 'test_penalty_9723084', 'password', 'Test Penalty', 'ACTIVE' )

2026-01-06 17:28:43.097 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:43.097 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9723084(Long)
2026-01-06 17:28:43.104 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:43.104 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9723084 AND deleted = 0

2026-01-06 17:28:43.104 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:28:43.104 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 9723084(Long), 2025(Integer)
2026-01-06 17:28:43.109 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:28:43.109 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 9723084 AND year = 2025 - 1 AND deleted = 0

2026-01-06 17:28:43.109 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:28:43.109 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 9723084(Long), 2025(Integer)
2026-01-06 17:28:43.115 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:28:43.115 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 9723084 AND year = 2025

2026-01-06 17:28:43.115 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:43.115 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 9723084(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:28:43.128 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:28:43.128 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (9723084, 2025, 0, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:28:43.128 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 9723084 year 2025
2026-01-06 17:28:43.128 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:28:43.129 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 9723084(Long), 2025(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 191(Long)
2026-01-06 17:28:43.138 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:28:43.138 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=9723084, year=2025, social_seniority=0, standard_quota=5.0, days_employed=365, actual_quota=5.0, last_year_balance=0, current_year_used=0 WHERE id=191 AND deleted=0

2026-01-06 17:28:43.139 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:28:43.139 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9723084(Long), 2025(Integer)
2026-01-06 17:28:43.143 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:28:43.143 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9723084 AND year = 2025 AND deleted = 0

2026-01-06 17:28:43.143 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìù Processing leave application: user=9723084, dates=2025-06-01 to 2025-06-06, days=6
2026-01-06 17:28:43.143 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9723084 AND year = 2025 AND deleted = 0

2026-01-06 17:28:43.143 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC
2026-01-06 17:28:43.143 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==> Parameters: 9723084(Long)
2026-01-06 17:28:43.148 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - <==      Total: 0
2026-01-06 17:28:43.149 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectAvailableBalances
SQL         : SELECT * FROM leave_record WHERE user_id = 9723084 AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC

2026-01-06 17:28:43.149 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL
2026-01-06 17:28:43.149 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==> Parameters: 9723084(Long)
2026-01-06 17:28:43.154 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - <==      Total: 0
2026-01-06 17:28:43.154 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9723084 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL

2026-01-06 17:28:43.154 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.154 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 9723084(Long)
2026-01-06 17:28:43.159 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-06 17:28:43.159 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9723084 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.159 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Available balances by expiry: {2026-12-31=5.0}
2026-01-06 17:28:43.159 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:43.159 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 9723084(Long), 2025-06-01(LocalDate), 2025-06-06(LocalDate), -5.0(BigDecimal), ANNUAL(String), ÂëòÂ∑•ËØ∑ÂÅá (Êù•Ëá™ÂΩìÂπ¥È¢ùÂ∫¶, ËøáÊúü: 2026-12-31)(String), 2026-01-06T17:28:43.159709(LocalDateTime), 2026-12-31(LocalDate), null
2026-01-06 17:28:43.172 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:43.172 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (9723084, 2025-06-01, 2025-06-06, -5.0, 'ANNUAL', 'ÂëòÂ∑•ËØ∑ÂÅá (Êù•Ëá™ÂΩìÂπ¥È¢ùÂ∫¶, ËøáÊúü: 2026-12-31)', 2026-01-06T17:28:43.159709, 2026-12-31, )

2026-01-06 17:28:43.172 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚úÖ Allocated 5.0 days from balance expiring on 2026-12-31
2026-01-06 17:28:43.172 WARN  com.leave.system.service.impl.LeaveServiceImpl - ‚ö†Ô∏è  Insufficient balance: 1.0 days needed. Creating OVERDRAFT record.
2026-01-06 17:28:43.172 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:43.172 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 9723084(Long), 2025-06-01(LocalDate), 2025-06-06(LocalDate), -1.0(BigDecimal), ANNUAL(String), ÂëòÂ∑•ËØ∑ÂÅá (È¢ùÂ∫¶ÈÄèÊîØ)(String), 2026-01-06T17:28:43.172749(LocalDateTime), null, null
2026-01-06 17:28:43.187 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:43.187 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (9723084, 2025-06-01, 2025-06-06, -1.0, 'ANNUAL', 'ÂëòÂ∑•ËØ∑ÂÅá (È¢ùÂ∫¶ÈÄèÊîØ)', 2026-01-06T17:28:43.172749, , )

2026-01-06 17:28:43.187 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚úÖ Created OVERDRAFT record for 1.0 days (no expiry)
2026-01-06 17:28:43.187 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Leave application processed successfully
2026-01-06 17:28:43.187 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:43.187 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9723084(Long)
2026-01-06 17:28:43.193 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:43.193 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9723084 AND deleted = 0

2026-01-06 17:28:43.193 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:28:43.193 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 9723084(Long), 2026(Integer)
2026-01-06 17:28:43.198 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-06 17:28:43.198 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 9723084 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:28:43.198 INFO  com.leave.system.service.impl.LeaveServiceImpl - üîç Calculating carry-over for user 9723084 from year 2025 to 2026
2026-01-06 17:28:43.198 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 9723084 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:28:43.198 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìä Last year quota: 5.0
2026-01-06 17:28:43.198 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND expiry_date IS NOT NULL
2026-01-06 17:28:43.198 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 9723084(Long), 2025(Integer)
2026-01-06 17:28:43.203 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 1
2026-01-06 17:28:43.203 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 9723084 AND YEAR(start_date) = 2025 AND expiry_date IS NOT NULL

2026-01-06 17:28:43.203 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìã Found 1 bucketed records (with expiry) in year 2025
2026-01-06 17:28:43.203 DEBUG com.leave.system.service.impl.LeaveServiceImpl -   Record: type=ANNUAL, days=-5.0, expiry=2026-12-31
2026-01-06 17:28:43.203 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚ûñ Usage/Deduction: -5.0 days (type=ANNUAL)
2026-01-06 17:28:43.203 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Calculation: 5.0 (quota) + -5.0 (net records) = 0.0 remaining
2026-01-06 17:28:43.203 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Final carry-over for user 9723084 year 2026: 0.0 days
2026-01-06 17:28:43.203 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-06 17:28:43.203 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 9723084(Long), 2026-01-01(LocalDate)
2026-01-06 17:28:43.208 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 0
2026-01-06 17:28:43.208 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 9723084 AND type = 'CARRY_OVER' AND start_date = 2026-01-01

2026-01-06 17:28:43.208 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:43.208 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 9723084(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), ‰∏äÂπ¥Áªì‰ΩôÂπ¥ÂÅáÁªìËΩ¨ (ËøáÊúü: 2026-12-31)(String), 2026-01-06T17:28:43.208451(LocalDateTime), 2026-12-31(LocalDate), null
2026-01-06 17:28:43.218 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:43.218 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (9723084, 2026-01-01, 2026-01-01, 0.0, 'CARRY_OVER', '‰∏äÂπ¥Áªì‰ΩôÂπ¥ÂÅáÁªìËΩ¨ (ËøáÊúü: 2026-12-31)', 2026-01-06T17:28:43.208451, 2026-12-31, )

2026-01-06 17:28:43.218 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Created carry-over record: 0.0 days (expires 2026-12-31)
2026-01-06 17:28:43.218 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:28:43.218 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 9723084(Long), 2026(Integer)
2026-01-06 17:28:43.223 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:28:43.223 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 9723084 AND year = 2026

2026-01-06 17:28:43.223 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:43.223 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 9723084(Long), 2026(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0.0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:28:43.233 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:28:43.233 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (9723084, 2026, 0, 5.0, 365, 5.0, 0.0, 0, 0)

2026-01-06 17:28:43.233 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 9723084 year 2026
2026-01-06 17:28:43.233 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:43.233 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9723084(Long)
2026-01-06 17:28:43.238 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:43.238 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9723084 AND deleted = 0

2026-01-06 17:28:43.238 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:28:43.238 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9723084(Long), 2026(Integer)
2026-01-06 17:28:43.243 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:28:43.243 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9723084 AND year = 2026 AND deleted = 0

2026-01-06 17:28:43.243 DEBUG com.leave.system.service.impl.LeaveServiceImpl - üîÑ Refreshing account for user 9723084 year 2026 based on today 2026-01-06
2026-01-06 17:28:43.244 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date ASC
2026-01-06 17:28:43.244 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9723084(Long), 2026(Integer)
2026-01-06 17:28:43.249 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-06 17:28:43.249 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9723084 AND YEAR(start_date) = 2026 ORDER BY start_date ASC

2026-01-06 17:28:43.250 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.250 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 9723084(Long)
2026-01-06 17:28:43.254 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-06 17:28:43.254 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9723084 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.365 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:43.365 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 3723364(Long), test_deduct_3723364(String), password(String), Test Deduct(String), 2016-01-06(LocalDate), 2016-01-06(LocalDate), ACTIVE(String)
2026-01-06 17:28:43.376 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:28:43.376 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 3723364, 'test_deduct_3723364', 'password', 'Test Deduct', 2016-01-06, 2016-01-06, 'ACTIVE' )

2026-01-06 17:28:43.376 DEBUG com.leave.system.mapper.LeaveAccountMapper.insert - ==>  Preparing: INSERT INTO leave_account ( user_id, year, standard_quota, days_employed, actual_quota, last_year_balance ) VALUES ( ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:43.377 DEBUG com.leave.system.mapper.LeaveAccountMapper.insert - ==> Parameters: 3723364(Long), 2025(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 10.0(BigDecimal)
2026-01-06 17:28:43.390 DEBUG com.leave.system.mapper.LeaveAccountMapper.insert - <==    Updates: 1
2026-01-06 17:28:43.390 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insert
SQL         : INSERT INTO leave_account ( id, user_id, year, standard_quota, days_employed, actual_quota, last_year_balance ) VALUES ( 193, 3723364, 2025, 5.0, 365, 5.0, 10.0 )

2026-01-06 17:28:43.391 INFO  com.leave.system.service.impl.LeaveServiceImpl - üîÑ Routing manual ADJUSTMENT_DEDUCT record to priority deduction logic. Days: 4.0
2026-01-06 17:28:43.391 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:28:43.391 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3723364(Long), 2025(Integer)
2026-01-06 17:28:43.395 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:28:43.395 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3723364 AND year = 2025 AND deleted = 0

2026-01-06 17:28:43.395 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC
2026-01-06 17:28:43.395 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==> Parameters: 3723364(Long)
2026-01-06 17:28:43.408 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - <==      Total: 0
2026-01-06 17:28:43.408 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectAvailableBalances
SQL         : SELECT * FROM leave_record WHERE user_id = 3723364 AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC

2026-01-06 17:28:43.408 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚ÑπÔ∏è Detected implicit carry-over (from account): 10.0 days
2026-01-06 17:28:43.408 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL
2026-01-06 17:28:43.408 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==> Parameters: 3723364(Long)
2026-01-06 17:28:43.412 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - <==      Total: 0
2026-01-06 17:28:43.412 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3723364 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL

2026-01-06 17:28:43.413 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.413 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 3723364(Long)
2026-01-06 17:28:43.418 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-06 17:28:43.418 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3723364 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.418 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Available balances by expiry: {2025-12-31=10.0, 2026-12-31=5.0}
2026-01-06 17:28:43.419 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:43.419 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 3723364(Long), 2025-06-01(LocalDate), 2025-06-01(LocalDate), -4.0(BigDecimal), ADJUSTMENT_DEDUCT(String), È¢ùÂ∫¶Êâ£Èô§ (Êù•Ëá™ÁªìËΩ¨È¢ùÂ∫¶, ËøáÊúü: 2025-12-31)(String), 2026-01-06T17:28:43.418940(LocalDateTime), 2025-12-31(LocalDate), null
2026-01-06 17:28:43.430 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:43.430 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (3723364, 2025-06-01, 2025-06-01, -4.0, 'ADJUSTMENT_DEDUCT', 'È¢ùÂ∫¶Êâ£Èô§ (Êù•Ëá™ÁªìËΩ¨È¢ùÂ∫¶, ËøáÊúü: 2025-12-31)', 2026-01-06T17:28:43.418940, 2025-12-31, )

2026-01-06 17:28:43.430 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚úÖ Allocated 4.0 days from balance expiring on 2025-12-31
2026-01-06 17:28:43.430 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:28:43.430 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:28:43.430 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:28:43.436 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 8
2026-01-06 17:28:43.436 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:28:43.436 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.436 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.441 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:43.441 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.441 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:28:43.441 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:28:43.441 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.441 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.446 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.446 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.446 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.446 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.451 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:43.451 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.451 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.451 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:28:43.456 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.456 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.456 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.456 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.462 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:43.462 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.462 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 6291610: 0
2026-01-06 17:28:43.462 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 0
2026-01-06 17:28:43.462 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.462 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.468 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.468 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.468 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.468 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.473 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:43.473 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.473 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.473 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:28:43.478 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.478 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.478 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.478 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.484 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:43.484 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.484 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 4292011: 0
2026-01-06 17:28:43.484 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4292011: 0
2026-01-06 17:28:43.484 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.484 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.490 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.490 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.490 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.491 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.495 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:43.495 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.496 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.496 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4292011(Long)
2026-01-06 17:28:43.502 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.502 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.502 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.502 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.508 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:43.508 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.508 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 2292895: 0
2026-01-06 17:28:43.508 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2292895: 0
2026-01-06 17:28:43.509 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.509 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.514 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.514 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.514 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.514 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.518 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:43.518 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.518 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.518 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2292895(Long)
2026-01-06 17:28:43.523 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.523 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.523 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.523 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.528 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:43.528 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.528 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 3293412: 0
2026-01-06 17:28:43.528 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3293412: 0
2026-01-06 17:28:43.528 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.528 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.533 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.533 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.533 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.533 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.538 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:43.538 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.538 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.538 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3293412(Long)
2026-01-06 17:28:43.544 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.544 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.544 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.544 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.554 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-06 17:28:43.554 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.554 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6722095: 6.0 + 0 extra = 6.0
2026-01-06 17:28:43.554 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6722095: 6.0
2026-01-06 17:28:43.554 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.554 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.559 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-06 17:28:43.559 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.559 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.559 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.564 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:28:43.564 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.564 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.564 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6722095(Long)
2026-01-06 17:28:43.570 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.570 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.570 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.571 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.575 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:28:43.575 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.575 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4722485: 3.0 + 0 extra = 3.0
2026-01-06 17:28:43.575 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4722485: 3.0
2026-01-06 17:28:43.575 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.575 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.580 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.580 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.580 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.580 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.588 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:28:43.588 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.588 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.588 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4722485(Long)
2026-01-06 17:28:43.596 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.596 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.596 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.596 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3723364(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.601 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:43.602 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3723364 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.602 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 3723364: 0
2026-01-06 17:28:43.602 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3723364: 0
2026-01-06 17:28:43.602 INFO  com.leave.system.scheduled.ScheduledTasks - ‚ÑπÔ∏è Adding implicit carry-over diff for user 3723364: 10.0
2026-01-06 17:28:43.602 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.602 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3723364(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.607 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.607 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3723364 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.607 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.607 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3723364(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.612 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:43.612 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3723364 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.612 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.612 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3723364(Long)
2026-01-06 17:28:43.618 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.618 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3723364 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.618 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:43.618 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 3723364(Long), 2025-12-31(LocalDate), 2025-12-31(LocalDate), -10.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)(String), null, 2025-12-31(LocalDate), 0(Integer)
2026-01-06 17:28:43.627 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:43.628 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (3723364, 2025-12-31, 2025-12-31, -10.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)', , 2025-12-31, 0)

2026-01-06 17:28:43.628 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 10.0 days for user 3723364 (target expiry date: 2025-12-31)
2026-01-06 17:28:43.628 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 1 users affected, 10.0 total days expired
2026-01-06 17:28:43.628 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:28:43.628 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 3723364(Long), EXPIRED(String)
2026-01-06 17:28:43.634 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:28:43.635 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 3723364 AND type = 'EXPIRED')

2026-01-06 17:28:43.658 DEBUG c.l.s.mapper.LeaveAccountMapper.deleteByUserId - ==>  Preparing: DELETE FROM leave_account WHERE user_id = ?
2026-01-06 17:28:43.658 DEBUG c.l.s.mapper.LeaveAccountMapper.deleteByUserId - ==> Parameters: 2723651(Long)
2026-01-06 17:28:43.679 DEBUG c.l.s.mapper.LeaveAccountMapper.deleteByUserId - <==    Updates: 0
2026-01-06 17:28:43.680 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.deleteByUserId
SQL         : DELETE FROM leave_account WHERE user_id = 2723651

2026-01-06 17:28:43.680 INFO  com.leave.system.service.impl.LeaveServiceImpl - Soft deleted all leave accounts for user 2723651
2026-01-06 17:28:43.689 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - ==>  Preparing: UPDATE leave_record SET deleted=1 WHERE deleted=0 AND (user_id = ?)
2026-01-06 17:28:43.690 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - ==> Parameters: 2723651(Long)
2026-01-06 17:28:43.700 DEBUG com.leave.system.mapper.LeaveRecordMapper.delete - <==    Updates: 0
2026-01-06 17:28:43.700 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.delete
SQL         : UPDATE leave_record SET deleted=1 WHERE deleted=0 AND (user_id = 2723651)

2026-01-06 17:28:43.701 DEBUG com.leave.system.mapper.SysUserMapper.delete - ==>  Preparing: UPDATE sys_user SET deleted=1 WHERE deleted=0 AND (username = ?)
2026-01-06 17:28:43.701 DEBUG com.leave.system.mapper.SysUserMapper.delete - ==> Parameters: test_expiry_2723651(String)
2026-01-06 17:28:43.711 DEBUG com.leave.system.mapper.SysUserMapper.delete - <==    Updates: 0
2026-01-06 17:28:43.711 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.delete
SQL         : UPDATE sys_user SET deleted=1 WHERE deleted=0 AND (username = 'test_expiry_2723651')

2026-01-06 17:28:43.712 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:43.712 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 2723651(Long), test_expiry_2723651(String), password(String), Test Expiry(String), 2020-01-01(LocalDate), 2020-01-01(LocalDate), ACTIVE(String)
2026-01-06 17:28:43.722 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:28:43.722 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 2723651, 'test_expiry_2723651', 'password', 'Test Expiry', 2020-01-01, 2020-01-01, 'ACTIVE' )

2026-01-06 17:28:43.727 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:43.727 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2723651(Long)
2026-01-06 17:28:43.731 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:43.731 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2723651 AND deleted = 0

2026-01-06 17:28:43.732 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:28:43.732 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 2723651(Long), 2025(Integer)
2026-01-06 17:28:43.737 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:28:43.738 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 2723651 AND year = 2025 - 1 AND deleted = 0

2026-01-06 17:28:43.738 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:28:43.738 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 2723651(Long), 2025(Integer)
2026-01-06 17:28:43.743 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:28:43.743 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 2723651 AND year = 2025

2026-01-06 17:28:43.744 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:43.744 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 2723651(Long), 2025(Integer), 6(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:28:43.754 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:28:43.755 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (2723651, 2025, 6, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:28:43.758 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 2723651 year 2025
2026-01-06 17:28:43.772 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:28:43.772 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 2723651(Long), 2025(Integer)
2026-01-06 17:28:43.778 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:28:43.778 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 2723651 AND year = 2025)

2026-01-06 17:28:43.779 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:28:43.779 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 2723651(Long), 2025(Integer), 6(Integer), 5.0(BigDecimal), 365(Integer), 0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 194(Long)
2026-01-06 17:28:43.874 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:28:43.874 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=2723651, year=2025, social_seniority=6, standard_quota=5.0, days_employed=365, actual_quota=0, last_year_balance=0.0, current_year_used=0.0 WHERE id=194 AND deleted=0

2026-01-06 17:28:43.875 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:43.875 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 2723651(Long), 2025-01-01(LocalDate), 2025-01-01(LocalDate), 5.0(BigDecimal), CARRY_OVER(String), 2025-12-31(LocalDate), 2026-01-06T17:28:43.875079(LocalDateTime)
2026-01-06 17:28:43.896 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:28:43.897 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 518, 2723651, 2025-01-01, 2025-01-01, 5.0, 'CARRY_OVER', 2025-12-31, 2026-01-06T17:28:43.875079 )

2026-01-06 17:28:43.897 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:43.897 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 2723651(Long), 2025-06-01(LocalDate), 2025-06-01(LocalDate), -2.0(BigDecimal), ANNUAL(String), 2026-12-31(LocalDate), 2026-01-06T17:28:43.897346(LocalDateTime)
2026-01-06 17:28:43.907 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:28:43.908 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, expiry_date, create_time ) VALUES ( 519, 2723651, 2025-06-01, 2025-06-01, -2.0, 'ANNUAL', 2026-12-31, 2026-01-06T17:28:43.897346 )

2026-01-06 17:28:43.913 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:28:43.914 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:28:43.914 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:28:43.921 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 8
2026-01-06 17:28:43.921 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:28:43.922 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.922 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.927 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:43.927 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.927 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 33: 0
2026-01-06 17:28:43.927 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 0
2026-01-06 17:28:43.928 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.928 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.933 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.933 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.933 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.933 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.939 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:43.939 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.939 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.939 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:28:43.945 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.945 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.945 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.945 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.950 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:43.950 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.950 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 6291610: 0
2026-01-06 17:28:43.950 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6291610: 0
2026-01-06 17:28:43.950 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.950 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.956 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.957 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.957 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.957 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6291610(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.963 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:43.963 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.963 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.963 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6291610(Long)
2026-01-06 17:28:43.967 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.967 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6291610 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.967 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.967 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.970 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:43.971 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.971 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 4292011: 0
2026-01-06 17:28:43.971 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4292011: 0
2026-01-06 17:28:43.971 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.971 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.976 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:43.976 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.976 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:43.977 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4292011(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.981 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:43.981 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:43.981 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:43.982 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4292011(Long)
2026-01-06 17:28:43.988 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:43.988 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4292011 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:43.988 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:43.988 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:43.998 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:43.998 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:43.998 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 2292895: 0
2026-01-06 17:28:43.998 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2292895: 0
2026-01-06 17:28:43.998 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:43.998 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.007 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:44.007 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:44.007 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:44.007 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2292895(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.015 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:44.015 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:44.015 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:44.016 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2292895(Long)
2026-01-06 17:28:44.023 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:44.023 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2292895 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:44.023 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:44.023 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.029 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:28:44.029 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:44.029 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 3293412: 0
2026-01-06 17:28:44.029 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3293412: 0
2026-01-06 17:28:44.029 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:44.029 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.036 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:44.036 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:44.036 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:44.036 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3293412(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.041 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:44.041 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:44.041 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:44.041 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3293412(Long)
2026-01-06 17:28:44.048 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:44.048 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3293412 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:44.048 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:44.048 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.058 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-06 17:28:44.059 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:44.059 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6722095: 6.0 + 0 extra = 6.0
2026-01-06 17:28:44.059 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6722095: 6.0
2026-01-06 17:28:44.059 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:44.059 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.064 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-06 17:28:44.065 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:44.065 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:44.065 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6722095(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.069 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:28:44.069 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:44.069 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:44.069 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6722095(Long)
2026-01-06 17:28:44.074 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:44.074 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6722095 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:44.074 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:44.074 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.082 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:28:44.082 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:44.082 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4722485: 3.0 + 0 extra = 3.0
2026-01-06 17:28:44.082 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4722485: 3.0
2026-01-06 17:28:44.082 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:44.082 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.088 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:44.089 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:44.089 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:44.089 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4722485(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.094 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:28:44.094 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:44.094 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:44.094 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4722485(Long)
2026-01-06 17:28:44.109 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:44.109 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4722485 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:44.110 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:28:44.110 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2723651(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.119 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:28:44.119 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2723651 AND expiry_date = 2025-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:28:44.119 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 2723651: 5.0 + 0 extra = 5.0
2026-01-06 17:28:44.119 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2723651: 5.0
2026-01-06 17:28:44.120 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:28:44.120 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2723651(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.126 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:28:44.126 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2723651 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:44.126 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:28:44.126 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2723651(Long), 2025-12-31(LocalDate)
2026-01-06 17:28:44.134 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:28:44.135 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2723651 AND type = 'EXPIRED' AND start_date = 2025-12-31 AND deleted = 0

2026-01-06 17:28:44.135 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:44.136 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2723651(Long)
2026-01-06 17:28:44.141 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:28:44.141 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2723651 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:44.141 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:44.141 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 2723651(Long), 2025-12-31(LocalDate), 2025-12-31(LocalDate), -5.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)(String), null, 2025-12-31(LocalDate), 0(Integer)
2026-01-06 17:28:44.150 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:44.150 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (2723651, 2025-12-31, 2025-12-31, -5.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2025-12-31)', , 2025-12-31, 0)

2026-01-06 17:28:44.150 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 5.0 days for user 2723651 (target expiry date: 2025-12-31)
2026-01-06 17:28:44.150 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2025 completed: 1 users affected, 5.0 total days expired
2026-01-06 17:28:44.159 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND type = ?)
2026-01-06 17:28:44.159 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 2723651(Long), EXPIRED(String)
2026-01-06 17:28:44.164 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 1
2026-01-06 17:28:44.164 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 2723651 AND type = 'EXPIRED')

2026-01-06 17:28:44.171 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( ?, ?, ?, ?, ? )
2026-01-06 17:28:44.172 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 8724171(Long), test_overdraft_8724171(String), password(String), Test Overdraft(String), ACTIVE(String)
2026-01-06 17:28:44.182 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:28:44.182 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, status ) VALUES ( 8724171, 'test_overdraft_8724171', 'password', 'Test Overdraft', 'ACTIVE' )

2026-01-06 17:28:44.183 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:44.183 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8724171(Long)
2026-01-06 17:28:44.187 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:44.187 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8724171 AND deleted = 0

2026-01-06 17:28:44.188 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:28:44.188 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 8724171(Long), 2026(Integer)
2026-01-06 17:28:44.192 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:28:44.192 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 8724171 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:28:44.192 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:28:44.192 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 8724171(Long), 2026(Integer)
2026-01-06 17:28:44.198 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:28:44.199 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 8724171 AND year = 2026

2026-01-06 17:28:44.199 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:44.199 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 8724171(Long), 2026(Integer), 0(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:28:44.210 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:28:44.210 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (8724171, 2026, 0, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:28:44.210 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 8724171 year 2026
2026-01-06 17:28:44.210 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==>  Preparing: SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = ? AND year = ?)
2026-01-06 17:28:44.210 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - ==> Parameters: 8724171(Long), 2026(Integer)
2026-01-06 17:28:44.218 DEBUG c.l.system.mapper.LeaveAccountMapper.selectList - <==      Total: 1
2026-01-06 17:28:44.218 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectList
SQL         : SELECT id,user_id,year,social_seniority,standard_quota,days_employed,actual_quota,last_year_balance,current_year_used,deleted,total_balance FROM leave_account WHERE deleted=0 AND (user_id = 8724171 AND year = 2026)

2026-01-06 17:28:44.218 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==>  Preparing: UPDATE leave_account SET user_id=?, year=?, social_seniority=?, standard_quota=?, days_employed=?, actual_quota=?, last_year_balance=?, current_year_used=? WHERE id=? AND deleted=0
2026-01-06 17:28:44.218 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - ==> Parameters: 8724171(Long), 2026(Integer), 0(Integer), 0(BigDecimal), 365(Integer), 0(BigDecimal), 0(BigDecimal), 0.0(BigDecimal), 195(Long)
2026-01-06 17:28:44.230 DEBUG c.l.system.mapper.LeaveAccountMapper.updateById - <==    Updates: 1
2026-01-06 17:28:44.230 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateById
SQL         : UPDATE leave_account SET user_id=8724171, year=2026, social_seniority=0, standard_quota=0, days_employed=365, actual_quota=0, last_year_balance=0, current_year_used=0.0 WHERE id=195 AND deleted=0

2026-01-06 17:28:44.230 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:28:44.230 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8724171(Long), 2026(Integer)
2026-01-06 17:28:44.234 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:28:44.234 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8724171 AND year = 2026 AND deleted = 0

2026-01-06 17:28:44.234 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìù Processing leave application: user=8724171, dates=2026-06-01 to 2026-06-03, days=3
2026-01-06 17:28:44.235 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8724171 AND year = 2026 AND deleted = 0

2026-01-06 17:28:44.235 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:44.235 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8724171(Long)
2026-01-06 17:28:44.242 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:44.242 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8724171 AND deleted = 0

2026-01-06 17:28:44.242 DEBUG com.leave.system.service.impl.LeaveServiceImpl - üîÑ Refreshing account for user 8724171 year 2026 based on today 2026-01-06
2026-01-06 17:28:44.242 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC
2026-01-06 17:28:44.242 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==> Parameters: 8724171(Long)
2026-01-06 17:28:44.246 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - <==      Total: 0
2026-01-06 17:28:44.246 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectAvailableBalances
SQL         : SELECT * FROM leave_record WHERE user_id = 8724171 AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC

2026-01-06 17:28:44.247 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL
2026-01-06 17:28:44.247 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==> Parameters: 8724171(Long)
2026-01-06 17:28:44.251 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - <==      Total: 0
2026-01-06 17:28:44.251 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 8724171 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL

2026-01-06 17:28:44.251 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:44.251 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 8724171(Long)
2026-01-06 17:28:44.256 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-06 17:28:44.256 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 8724171 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:28:44.257 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Available balances by expiry: {2027-12-31=0.0}
2026-01-06 17:28:44.257 WARN  com.leave.system.service.impl.LeaveServiceImpl - ‚ö†Ô∏è  Insufficient balance: 3 days needed. Creating OVERDRAFT record.
2026-01-06 17:28:44.257 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:44.257 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 8724171(Long), 2026-06-01(LocalDate), 2026-06-03(LocalDate), -3(BigDecimal), ANNUAL(String), ÂëòÂ∑•ËØ∑ÂÅá (È¢ùÂ∫¶ÈÄèÊîØ)(String), 2026-01-06T17:28:44.257080(LocalDateTime), null, null
2026-01-06 17:28:44.267 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:44.267 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (8724171, 2026-06-01, 2026-06-03, -3, 'ANNUAL', 'ÂëòÂ∑•ËØ∑ÂÅá (È¢ùÂ∫¶ÈÄèÊîØ)', 2026-01-06T17:28:44.257080, , )

2026-01-06 17:28:44.267 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ‚úÖ Created OVERDRAFT record for 3 days (no expiry)
2026-01-06 17:28:44.267 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Leave application processed successfully
2026-01-06 17:28:44.268 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = ? AND expiry_date IS NULL)
2026-01-06 17:28:44.268 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 8724171(Long)
2026-01-06 17:28:44.273 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 0
2026-01-06 17:28:44.273 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0 AND (user_id = 8724171 AND expiry_date IS NULL)

2026-01-06 17:28:44.286 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==>  Preparing: INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:44.286 DEBUG com.leave.system.mapper.SysUserMapper.insert - ==> Parameters: 3724286(Long), test_carryover_3724286(String), password(String), Test CarryOver(String), 2020-01-01(LocalDate), 2020-01-01(LocalDate), ACTIVE(String)
2026-01-06 17:28:44.296 DEBUG com.leave.system.mapper.SysUserMapper.insert - <==    Updates: 1
2026-01-06 17:28:44.296 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.insert
SQL         : INSERT INTO sys_user ( id, username, password, real_name, first_work_date, entry_date, status ) VALUES ( 3724286, 'test_carryover_3724286', 'password', 'Test CarryOver', 2020-01-01, 2020-01-01, 'ACTIVE' )

2026-01-06 17:28:44.301 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:44.301 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3724286(Long)
2026-01-06 17:28:44.396 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:44.396 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3724286 AND deleted = 0

2026-01-06 17:28:44.396 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:28:44.396 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 3724286(Long), 2025(Integer)
2026-01-06 17:28:44.403 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 0
2026-01-06 17:28:44.403 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 3724286 AND year = 2025 - 1 AND deleted = 0

2026-01-06 17:28:44.403 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:28:44.403 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 3724286(Long), 2025(Integer)
2026-01-06 17:28:44.408 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:28:44.408 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 3724286 AND year = 2025

2026-01-06 17:28:44.408 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:44.409 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 3724286(Long), 2025(Integer), 6(Integer), 5.0(BigDecimal), 365(Integer), 5.0(BigDecimal), 0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:28:44.422 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:28:44.422 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (3724286, 2025, 6, 5.0, 365, 5.0, 0, 0, 0)

2026-01-06 17:28:44.422 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 3724286 year 2025
2026-01-06 17:28:44.433 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==>  Preparing: INSERT INTO leave_record ( user_id, start_date, end_date, days, type, remarks, create_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-06 17:28:44.433 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - ==> Parameters: 3724286(Long), 2025-01-01(LocalDate), 2025-01-01(LocalDate), -3.0(BigDecimal), EXPIRED(String), Old expiry(String), 2026-01-06T17:28:44.432775(LocalDateTime)
2026-01-06 17:28:44.450 DEBUG com.leave.system.mapper.LeaveRecordMapper.insert - <==    Updates: 1
2026-01-06 17:28:44.450 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insert
SQL         : INSERT INTO leave_record ( id, user_id, start_date, end_date, days, type, remarks, create_time ) VALUES ( 522, 3724286, 2025-01-01, 2025-01-01, -3.0, 'EXPIRED', 'Old expiry', 2026-01-06T17:28:44.432775 )

2026-01-06 17:28:44.455 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:44.455 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3724286(Long)
2026-01-06 17:28:44.460 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:44.460 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3724286 AND deleted = 0

2026-01-06 17:28:44.460 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-06 17:28:44.460 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 3724286(Long), 2026(Integer)
2026-01-06 17:28:44.466 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-06 17:28:44.466 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 3724286 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:28:44.466 INFO  com.leave.system.service.impl.LeaveServiceImpl - üîç Calculating carry-over for user 3724286 from year 2025 to 2026
2026-01-06 17:28:44.466 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 3724286 AND year = 2026 - 1 AND deleted = 0

2026-01-06 17:28:44.466 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìä Last year quota: 5.0
2026-01-06 17:28:44.466 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND expiry_date IS NOT NULL
2026-01-06 17:28:44.466 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 3724286(Long), 2025(Integer)
2026-01-06 17:28:44.471 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 0
2026-01-06 17:28:44.471 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 3724286 AND YEAR(start_date) = 2025 AND expiry_date IS NOT NULL

2026-01-06 17:28:44.471 INFO  com.leave.system.service.impl.LeaveServiceImpl - üìã Found 0 bucketed records (with expiry) in year 2025
2026-01-06 17:28:44.471 INFO  com.leave.system.service.impl.LeaveServiceImpl - üí∞ Calculation: 5.0 (quota) + 0 (net records) = 5.0 remaining
2026-01-06 17:28:44.471 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Final carry-over for user 3724286 year 2026: 5.0 days
2026-01-06 17:28:44.471 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-06 17:28:44.471 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 3724286(Long), 2026-01-01(LocalDate)
2026-01-06 17:28:44.477 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 0
2026-01-06 17:28:44.477 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 3724286 AND type = 'CARRY_OVER' AND start_date = 2026-01-01

2026-01-06 17:28:44.477 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:44.477 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 3724286(Long), 2026-01-01(LocalDate), 2026-01-01(LocalDate), 5.0(BigDecimal), CARRY_OVER(String), ‰∏äÂπ¥Áªì‰ΩôÂπ¥ÂÅáÁªìËΩ¨ (ËøáÊúü: 2026-12-31)(String), 2026-01-06T17:28:44.477243(LocalDateTime), 2026-12-31(LocalDate), null
2026-01-06 17:28:44.488 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:28:44.488 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (3724286, 2026-01-01, 2026-01-01, 5.0, 'CARRY_OVER', '‰∏äÂπ¥Áªì‰ΩôÂπ¥ÂÅáÁªìËΩ¨ (ËøáÊúü: 2026-12-31)', 2026-01-06T17:28:44.477243, 2026-12-31, )

2026-01-06 17:28:44.489 INFO  com.leave.system.service.impl.LeaveServiceImpl - ‚úÖ Created carry-over record: 5.0 days (expires 2026-12-31)
2026-01-06 17:28:44.489 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-06 17:28:44.489 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 3724286(Long), 2026(Integer)
2026-01-06 17:28:44.495 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 0
2026-01-06 17:28:44.495 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 3724286 AND year = 2026

2026-01-06 17:28:44.495 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==>  Preparing: INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-06 17:28:44.495 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - ==> Parameters: 3724286(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 6(Integer), 0.0(BigDecimal), 5.0(BigDecimal), 0(BigDecimal), 0(Integer)
2026-01-06 17:28:44.505 DEBUG c.l.system.mapper.LeaveAccountMapper.insertAccount - <==    Updates: 1
2026-01-06 17:28:44.505 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.insertAccount
SQL         : INSERT INTO leave_account (user_id, year, social_seniority, standard_quota, days_employed, actual_quota, last_year_balance, current_year_used, deleted) VALUES (3724286, 2026, 6, 5.0, 6, 0.0, 5.0, 0, 0)

2026-01-06 17:28:44.505 INFO  com.leave.system.service.impl.LeaveServiceImpl - Created new account for user 3724286 year 2026
2026-01-06 17:28:44.516 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-06 17:28:44.516 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3724286(Long)
2026-01-06 17:28:44.523 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-06 17:28:44.523 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3724286 AND deleted = 0

2026-01-06 17:28:44.523 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-06 17:28:44.523 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3724286(Long), 2026(Integer)
2026-01-06 17:28:44.527 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-06 17:28:44.527 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3724286 AND year = 2026 AND deleted = 0

2026-01-06 17:28:44.527 DEBUG com.leave.system.service.impl.LeaveServiceImpl - üîÑ Refreshing account for user 3724286 year 2026 based on today 2026-01-06
2026-01-06 17:28:44.527 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date ASC
2026-01-06 17:28:44.528 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3724286(Long), 2026(Integer)
2026-01-06 17:28:44.533 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-06 17:28:44.533 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3724286 AND YEAR(start_date) = 2026 ORDER BY start_date ASC

2026-01-06 17:28:44.533 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:28:44.533 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 3724286(Long)
2026-01-06 17:28:44.539 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 1
2026-01-06 17:28:44.539 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3724286 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:41:53.710 INFO  com.leave.system.DebugUser3Test - Starting DebugUser3Test using Java 17.0.6 with PID 32933 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:41:53.711 DEBUG com.leave.system.DebugUser3Test - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:41:53.711 INFO  com.leave.system.DebugUser3Test - No active profile set, falling back to 1 default profile: "default"
2026-01-06 17:41:54.295 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@5f08fe00'
2026-01-06 17:41:54.295 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@2abafa97'
2026-01-06 17:41:54.368 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:41:54.384 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:41:54.394 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:41:54.407 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:41:54.417 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:41:54.425 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:41:54.444 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:41:54.453 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:10
2026-01-06 17:41:54.462 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:41:54.700 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@451816fd
2026-01-06 17:41:54.702 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:41:54.839 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:41:54.848 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:41:54.858 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:41:54.871 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:41:54.871 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:41:54.874 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:41:54.874 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:41:54.875 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:41:54.875 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:41:54.995 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:41:55.072 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3c3ab672, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3e6acec2, org.springframework.security.web.context.SecurityContextHolderFilter@4fc3529, org.springframework.security.web.header.HeaderWriterFilter@74830d73, org.springframework.web.filter.CorsFilter@3d764641, org.springframework.security.web.authentication.logout.LogoutFilter@2152fde5, com.leave.system.security.JwtAuthenticationFilter@54be6213, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@192f5f39, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4cd5fc46, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1e8bccfb, org.springframework.security.web.session.SessionManagementFilter@1255de25, org.springframework.security.web.access.ExceptionTranslationFilter@6bf0f70a, org.springframework.security.web.access.intercept.AuthorizationFilter@681d704e]
2026-01-06 17:41:55.237 INFO  com.leave.system.DebugUser3Test - Started DebugUser3Test in 1.701 seconds (process running for 2.066)
2026-01-06 17:41:55.237 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:41:55.238 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:41:55.675 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0
2026-01-06 17:41:55.678 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 
2026-01-06 17:41:55.687 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 10
2026-01-06 17:41:55.687 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0

2026-01-06 17:42:05.609 INFO  com.leave.system.DebugUser3Test - Starting DebugUser3Test using Java 17.0.6 with PID 33092 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:42:05.609 DEBUG com.leave.system.DebugUser3Test - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:42:05.610 INFO  com.leave.system.DebugUser3Test - The following 1 profile is active: "test"
2026-01-06 17:42:06.176 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@377949f1'
2026-01-06 17:42:06.176 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@5460edd3'
2026-01-06 17:42:06.241 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:42:06.258 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:42:06.268 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:42:06.280 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:42:06.289 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:42:06.298 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:42:06.318 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:42:06.326 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:25
2026-01-06 17:42:06.336 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:42:06.454 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c497a55
2026-01-06 17:42:06.456 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:42:06.588 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:42:06.596 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:42:06.607 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:42:06.690 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:42:06.691 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:42:06.693 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:42:06.694 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:42:06.694 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:42:06.694 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:42:06.803 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:42:06.880 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@37c87fcc, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ca2be53, org.springframework.security.web.context.SecurityContextHolderFilter@3e01796a, org.springframework.security.web.header.HeaderWriterFilter@3cead673, org.springframework.web.filter.CorsFilter@78f5cbc5, org.springframework.security.web.authentication.logout.LogoutFilter@2965dd88, com.leave.system.security.JwtAuthenticationFilter@2ef041bb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e91facf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5e8f0f98, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@70697478, org.springframework.security.web.session.SessionManagementFilter@6906be0f, org.springframework.security.web.access.ExceptionTranslationFilter@67e11bda, org.springframework.security.web.access.intercept.AuthorizationFilter@1f5d7fd5]
2026-01-06 17:42:07.047 INFO  com.leave.system.DebugUser3Test - Started DebugUser3Test in 1.593 seconds (process running for 1.943)
2026-01-06 17:42:07.047 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:42:07.047 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:42:07.410 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0
2026-01-06 17:42:07.410 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 
2026-01-06 17:42:07.426 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 10
2026-01-06 17:42:07.426 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0

2026-01-06 17:42:27.633 INFO  com.leave.system.DebugUser3Test - Starting DebugUser3Test using Java 17.0.6 with PID 33363 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:42:27.633 DEBUG com.leave.system.DebugUser3Test - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:42:27.633 INFO  com.leave.system.DebugUser3Test - No active profile set, falling back to 1 default profile: "default"
2026-01-06 17:42:28.182 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@5f08fe00'
2026-01-06 17:42:28.182 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@2abafa97'
2026-01-06 17:42:28.243 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:42:28.260 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:42:28.269 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:42:28.279 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:42:28.288 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:42:28.297 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:42:28.313 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:42:28.320 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:0
2026-01-06 17:42:28.330 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:42:28.459 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@451816fd
2026-01-06 17:42:28.461 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:42:28.583 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:42:28.589 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:42:28.599 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:42:28.613 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:42:28.613 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:42:28.615 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:42:28.615 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:42:28.616 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:42:28.616 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:42:28.715 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:42:28.797 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@498e41a4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@be616f0, org.springframework.security.web.context.SecurityContextHolderFilter@516c20de, org.springframework.security.web.header.HeaderWriterFilter@13ee97af, org.springframework.web.filter.CorsFilter@1f5d7fd5, org.springframework.security.web.authentication.logout.LogoutFilter@4fc3529, com.leave.system.security.JwtAuthenticationFilter@54be6213, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7a62d697, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@edbc2bf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@cf08c97, org.springframework.security.web.session.SessionManagementFilter@e706aa, org.springframework.security.web.access.ExceptionTranslationFilter@54941dfd, org.springframework.security.web.access.intercept.AuthorizationFilter@d13379e]
2026-01-06 17:42:28.959 INFO  com.leave.system.DebugUser3Test - Started DebugUser3Test in 1.478 seconds (process running for 1.824)
2026-01-06 17:42:28.960 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:42:28.960 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:42:29.317 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==>  Preparing: SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0
2026-01-06 17:42:29.317 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - ==> Parameters: 
2026-01-06 17:42:29.323 DEBUG c.leave.system.mapper.LeaveRecordMapper.selectList - <==      Total: 10
2026-01-06 17:42:29.324 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectList
SQL         : SELECT id,user_id,start_date,end_date,days,type,remarks,expiry_date,create_time,deleted FROM leave_record WHERE deleted=0

2026-01-06 17:45:31.694 INFO  com.leave.system.DebugUser3Test - Starting DebugUser3Test using Java 17.0.6 with PID 33668 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:45:31.694 DEBUG com.leave.system.DebugUser3Test - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:45:31.695 INFO  com.leave.system.DebugUser3Test - The following 1 profile is active: "test"
2026-01-06 17:45:32.258 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@6a3fbcb1'
2026-01-06 17:45:32.258 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@153cb763'
2026-01-06 17:45:32.319 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:45:32.334 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:45:32.343 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:45:32.354 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:45:32.363 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:45:32.372 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:45:32.390 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:45:32.398 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:8
2026-01-06 17:45:32.408 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:45:32.519 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2864f887
2026-01-06 17:45:32.520 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:45:32.639 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:45:32.646 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:45:32.659 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:45:32.749 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:45:32.749 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:45:32.752 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:45:32.752 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:45:32.752 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:45:32.752 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:45:32.850 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:45:32.937 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@839755f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71d99732, org.springframework.security.web.context.SecurityContextHolderFilter@ca2be53, org.springframework.security.web.header.HeaderWriterFilter@38e7860c, org.springframework.web.filter.CorsFilter@2328ec73, org.springframework.security.web.authentication.logout.LogoutFilter@1f1fbc9f, com.leave.system.security.JwtAuthenticationFilter@40016ce1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@70697478, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@42b43a6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@42a05533, org.springframework.security.web.session.SessionManagementFilter@1f5d7fd5, org.springframework.security.web.access.ExceptionTranslationFilter@336d28a1, org.springframework.security.web.access.intercept.AuthorizationFilter@4392362c]
2026-01-06 17:45:33.094 INFO  com.leave.system.DebugUser3Test - Started DebugUser3Test in 1.56 seconds (process running for 1.91)
2026-01-06 17:45:33.094 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:45:33.094 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:48:24.932 INFO  com.leave.system.DebugUser3Test - Starting DebugUser3Test using Java 17.0.6 with PID 34004 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:48:24.932 DEBUG com.leave.system.DebugUser3Test - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:48:24.932 INFO  com.leave.system.DebugUser3Test - The following 1 profile is active: "test"
2026-01-06 17:48:25.498 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@7f0a133d'
2026-01-06 17:48:25.498 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@565aa4ac'
2026-01-06 17:48:25.561 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:48:25.576 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:48:25.586 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:48:25.597 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:48:25.606 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:48:25.615 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:48:25.630 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:48:25.638 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:3
2026-01-06 17:48:25.648 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:48:25.851 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d67d5a4
2026-01-06 17:48:25.853 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:48:25.983 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:48:25.989 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:48:26.000 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:48:26.015 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:48:26.016 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:48:26.018 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:48:26.018 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:48:26.019 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:48:26.019 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:48:26.120 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:48:26.205 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@70697478, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@42b43a6, org.springframework.security.web.context.SecurityContextHolderFilter@5e8f0f98, org.springframework.security.web.header.HeaderWriterFilter@2976ef56, org.springframework.web.filter.CorsFilter@1d622556, org.springframework.security.web.authentication.logout.LogoutFilter@32c0fecc, com.leave.system.security.JwtAuthenticationFilter@21c75084, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5310e451, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@52d63b7e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4b9f7edc, org.springframework.security.web.session.SessionManagementFilter@3e01796a, org.springframework.security.web.access.ExceptionTranslationFilter@3cead673, org.springframework.security.web.access.intercept.AuthorizationFilter@ca2be53]
2026-01-06 17:48:26.365 INFO  com.leave.system.DebugUser3Test - Started DebugUser3Test in 1.597 seconds (process running for 1.993)
2026-01-06 17:48:26.366 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:48:26.366 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:48:59.458 INFO  com.leave.system.CleanupDataTest - Starting CleanupDataTest using Java 17.0.6 with PID 35054 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:48:59.459 DEBUG com.leave.system.CleanupDataTest - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:48:59.459 INFO  com.leave.system.CleanupDataTest - The following 1 profile is active: "test"
2026-01-06 17:49:00.035 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@6a3fbcb1'
2026-01-06 17:49:00.036 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@153cb763'
2026-01-06 17:49:00.104 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:49:00.159 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:49:00.177 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:49:00.191 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:49:00.202 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:49:00.214 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:49:00.231 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:49:00.239 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:29
2026-01-06 17:49:00.249 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:49:00.453 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2864f887
2026-01-06 17:49:00.455 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:49:00.585 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:49:00.594 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:49:00.604 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:49:00.618 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:49:00.618 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:49:00.620 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:49:00.621 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:49:00.621 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:49:00.621 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:49:00.718 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:49:00.799 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@839755f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71d99732, org.springframework.security.web.context.SecurityContextHolderFilter@ca2be53, org.springframework.security.web.header.HeaderWriterFilter@38e7860c, org.springframework.web.filter.CorsFilter@2328ec73, org.springframework.security.web.authentication.logout.LogoutFilter@1f1fbc9f, com.leave.system.security.JwtAuthenticationFilter@40016ce1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@70697478, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@42b43a6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@42a05533, org.springframework.security.web.session.SessionManagementFilter@1f5d7fd5, org.springframework.security.web.access.ExceptionTranslationFilter@336d28a1, org.springframework.security.web.access.intercept.AuthorizationFilter@4392362c]
2026-01-06 17:49:00.961 INFO  com.leave.system.CleanupDataTest - Started CleanupDataTest in 1.666 seconds (process running for 2.02)
2026-01-06 17:49:00.962 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:49:00.962 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:49:22.132 INFO  com.leave.system.DebugUser3Test - Starting DebugUser3Test using Java 17.0.6 with PID 35274 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:49:22.132 DEBUG com.leave.system.DebugUser3Test - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:49:22.133 INFO  com.leave.system.DebugUser3Test - The following 1 profile is active: "test"
2026-01-06 17:49:22.866 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@4665428b'
2026-01-06 17:49:22.867 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@27960b1e'
2026-01-06 17:49:22.931 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:49:22.948 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:49:22.957 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:49:22.968 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:49:22.977 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:49:22.991 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:49:23.002 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:49:23.011 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:29
2026-01-06 17:49:23.020 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:49:23.128 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2475fba3
2026-01-06 17:49:23.129 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:49:23.251 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:49:23.259 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:49:23.270 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:49:23.286 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:49:23.286 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:49:23.288 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:49:23.290 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:49:23.290 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:49:23.290 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:49:23.425 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:49:23.513 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24b3f778, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@164dea80, org.springframework.security.web.context.SecurityContextHolderFilter@be616f0, org.springframework.security.web.header.HeaderWriterFilter@78e043e4, org.springframework.web.filter.CorsFilter@4392362c, org.springframework.security.web.authentication.logout.LogoutFilter@3e6acec2, com.leave.system.security.JwtAuthenticationFilter@51af8049, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@cf08c97, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@37c87fcc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@338a4c61, org.springframework.security.web.session.SessionManagementFilter@d13379e, org.springframework.security.web.access.ExceptionTranslationFilter@4491eaeb, org.springframework.security.web.access.intercept.AuthorizationFilter@2b6fcca1]
2026-01-06 17:49:23.672 INFO  com.leave.system.DebugUser3Test - Started DebugUser3Test in 1.703 seconds (process running for 2.316)
2026-01-06 17:49:23.672 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:49:23.672 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:50:12.071 INFO  com.leave.system.CleanupDataTest - Starting CleanupDataTest using Java 17.0.6 with PID 35536 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:50:12.071 DEBUG com.leave.system.CleanupDataTest - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:50:12.072 INFO  com.leave.system.CleanupDataTest - The following 1 profile is active: "test"
2026-01-06 17:50:12.644 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@1a21f43f'
2026-01-06 17:50:12.644 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@613f7eb7'
2026-01-06 17:50:12.715 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:50:12.735 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:50:12.747 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:50:12.761 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:50:12.770 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:50:12.780 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:50:12.799 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:50:12.807 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:6
2026-01-06 17:50:12.818 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:50:12.932 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5dc7841c
2026-01-06 17:50:12.933 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:50:13.051 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:50:13.058 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:50:13.069 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:50:13.082 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:50:13.083 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:50:13.086 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:50:13.089 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:50:13.089 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:50:13.089 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:50:13.188 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:50:13.273 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@10d4b573, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@50785f86, org.springframework.security.web.context.SecurityContextHolderFilter@51141f64, org.springframework.security.web.header.HeaderWriterFilter@25421809, org.springframework.web.filter.CorsFilter@7c3c3d67, org.springframework.security.web.authentication.logout.LogoutFilter@1c8e8fed, com.leave.system.security.JwtAuthenticationFilter@605c7a9e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@35ceec81, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@d13379e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1e258d3b, org.springframework.security.web.session.SessionManagementFilter@4cd5fc46, org.springframework.security.web.access.ExceptionTranslationFilter@2faf6e4a, org.springframework.security.web.access.intercept.AuthorizationFilter@77eb607e]
2026-01-06 17:50:13.440 INFO  com.leave.system.CleanupDataTest - Started CleanupDataTest in 1.534 seconds (process running for 1.903)
2026-01-06 17:50:13.440 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:50:13.441 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:50:33.115 INFO  com.leave.system.CleanupDataTest - Starting CleanupDataTest using Java 17.0.6 with PID 35837 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:50:33.116 DEBUG com.leave.system.CleanupDataTest - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:50:33.116 INFO  com.leave.system.CleanupDataTest - The following 1 profile is active: "test"
2026-01-06 17:50:33.664 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@644a3add'
2026-01-06 17:50:33.664 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@1f78d415'
2026-01-06 17:50:33.729 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:50:33.746 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:50:33.755 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:50:33.767 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:50:33.777 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:50:33.786 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:50:33.805 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:50:33.816 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:10
2026-01-06 17:50:33.826 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:50:33.968 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@18d30e7
2026-01-06 17:50:33.969 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:50:34.094 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:50:34.101 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:50:34.111 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:50:34.127 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:50:34.128 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:50:34.130 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:50:34.130 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:50:34.131 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:50:34.131 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:50:34.227 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:50:34.317 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2b6fcca1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@39f93225, org.springframework.security.web.context.SecurityContextHolderFilter@7c8df667, org.springframework.security.web.header.HeaderWriterFilter@71262020, org.springframework.web.filter.CorsFilter@24b3f778, org.springframework.security.web.authentication.logout.LogoutFilter@846b47, com.leave.system.security.JwtAuthenticationFilter@76596288, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@be616f0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f5d7fd5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@164dea80, org.springframework.security.web.session.SessionManagementFilter@32c0fecc, org.springframework.security.web.access.ExceptionTranslationFilter@714bffd5, org.springframework.security.web.access.intercept.AuthorizationFilter@7c3c3d67]
2026-01-06 17:50:34.477 INFO  com.leave.system.CleanupDataTest - Started CleanupDataTest in 1.513 seconds (process running for 1.865)
2026-01-06 17:50:34.477 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:50:34.477 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:50:34.864 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2025 (Target Expiry: 2025-12-31)
2026-01-06 17:50:34.866 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:50:34.866 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2025(Integer)
2026-01-06 17:50:34.874 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 0
2026-01-06 17:50:34.874 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2025 AND deleted = 0

2026-01-06 17:50:34.874 INFO  com.leave.system.scheduled.ScheduledTasks - No accounts found for year 2025
2026-01-06 17:51:43.593 INFO  com.leave.system.CleanupDataTest - Starting CleanupDataTest using Java 17.0.6 with PID 36168 (started by cccc in /Users/cccc/IdeaProjects/leave-management/backend)
2026-01-06 17:51:43.593 DEBUG com.leave.system.CleanupDataTest - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-06 17:51:43.593 INFO  com.leave.system.CleanupDataTest - The following 1 profile is active: "test"
2026-01-06 17:51:44.253 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@1a21f43f'
2026-01-06 17:51:44.254 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@613f7eb7'
2026-01-06 17:51:44.318 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-06 17:51:44.341 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-06 17:51:44.352 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-06 17:51:44.363 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-06 17:51:44.374 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-06 17:51:44.382 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-06 17:51:44.401 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-06 17:51:44.412 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:0
2026-01-06 17:51:44.424 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-06 17:51:44.543 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5dc7841c
2026-01-06 17:51:44.547 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-06 17:51:44.681 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-06 17:51:44.690 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-06 17:51:44.700 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-06 17:51:44.720 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-06 17:51:44.720 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-06 17:51:44.722 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: ÈíâÈíâÊï∞ÊçÆÂêåÊ≠• with cron: 0 00 10 ? * MON
2026-01-06 17:51:44.723 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáËøáÊúüÊ∏ÖÁêÜ with cron: 0 0 3 1 1 ?
2026-01-06 17:51:44.723 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: Âπ¥ÂÅáË¥¶Êà∑ÊâπÈáèÂàùÂßãÂåñ with cron: 0 0 1 1 1 ?
2026-01-06 17:51:44.724 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-06 17:51:44.825 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-06 17:51:44.913 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@10d4b573, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@50785f86, org.springframework.security.web.context.SecurityContextHolderFilter@51141f64, org.springframework.security.web.header.HeaderWriterFilter@25421809, org.springframework.web.filter.CorsFilter@7c3c3d67, org.springframework.security.web.authentication.logout.LogoutFilter@1c8e8fed, com.leave.system.security.JwtAuthenticationFilter@605c7a9e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@35ceec81, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@d13379e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1e258d3b, org.springframework.security.web.session.SessionManagementFilter@4cd5fc46, org.springframework.security.web.access.ExceptionTranslationFilter@2faf6e4a, org.springframework.security.web.access.intercept.AuthorizationFilter@77eb607e]
2026-01-06 17:51:45.093 INFO  com.leave.system.CleanupDataTest - Started CleanupDataTest in 1.677 seconds (process running for 2.027)
2026-01-06 17:51:45.093 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-06 17:51:45.094 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-06 17:51:45.486 INFO  com.leave.system.scheduled.ScheduledTasks - üîÑ Starting leave expiry cleanup for year: 2026 (Target Expiry: 2026-12-31)
2026-01-06 17:51:45.487 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-06 17:51:45.487 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2026(Integer)
2026-01-06 17:51:45.499 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 35
2026-01-06 17:51:45.499 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2026 AND deleted = 0

2026-01-06 17:51:45.499 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.500 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.506 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.506 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.506 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 1: 0
2026-01-06 17:51:45.506 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 1: 0
2026-01-06 17:51:45.512 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.512 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.517 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.517 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.518 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.518 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.522 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.523 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.523 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.523 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 1(Long)
2026-01-06 17:51:45.527 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.528 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.528 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.528 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.533 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:51:45.533 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.533 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 2: 5.0 + 0 extra = 5.0
2026-01-06 17:51:45.533 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2: 5.0
2026-01-06 17:51:45.534 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.534 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.538 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.539 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.539 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.539 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.543 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:51:45.544 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.544 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.544 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2(Long)
2026-01-06 17:51:45.548 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.549 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.549 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.549 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.553 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.553 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.554 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 3: 0
2026-01-06 17:51:45.554 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3: 0
2026-01-06 17:51:45.554 INFO  com.leave.system.scheduled.ScheduledTasks - ‚ÑπÔ∏è Adding implicit carry-over diff for user 3: 7.0
2026-01-06 17:51:45.554 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.554 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.559 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 1
2026-01-06 17:51:45.559 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.559 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.559 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.564 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.564 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.564 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.564 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3(Long)
2026-01-06 17:51:45.569 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.569 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.571 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, COALESCE(?, 0))
2026-01-06 17:51:45.571 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 3(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -5.0(BigDecimal), EXPIRED(String), Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)(String), null, 2026-12-31(LocalDate), 0(Integer)
2026-01-06 17:51:45.587 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-06 17:51:45.588 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (3, 2026-12-31, 2026-12-31, -5.0, 'EXPIRED', 'Âπ¥ÂÅáÂ∑≤ËøáÊúüËá™Âä®Ê∏ÖÁêÜ (Âà∞ÊúüÊó•Êúü: 2026-12-31)', , 2026-12-31, COALESCE(0, 0))

2026-01-06 17:51:45.589 INFO  com.leave.system.scheduled.ScheduledTasks - ‚è±Ô∏è  Expired 5.0 days for user 3 (target expiry date: 2026-12-31)
2026-01-06 17:51:45.589 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.589 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.596 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:51:45.597 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.597 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4: 3.0 + 0 extra = 3.0
2026-01-06 17:51:45.597 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4: 3.0
2026-01-06 17:51:45.597 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.598 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.604 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 1
2026-01-06 17:51:45.605 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.605 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.605 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.611 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:51:45.611 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.611 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.611 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4(Long)
2026-01-06 17:51:45.616 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.617 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.617 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.617 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.622 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:51:45.622 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.622 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 5: 3.0 + 0 extra = 3.0
2026-01-06 17:51:45.622 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 5: 3.0
2026-01-06 17:51:45.622 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.622 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.628 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.628 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.628 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.628 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.633 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:51:45.633 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.633 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.633 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 5(Long)
2026-01-06 17:51:45.638 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.638 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.638 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.638 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.643 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.643 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.643 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 6: 0
2026-01-06 17:51:45.643 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6: 0
2026-01-06 17:51:45.643 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.643 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.648 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.648 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.648 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.649 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.653 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.654 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.654 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.654 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6(Long)
2026-01-06 17:51:45.658 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.659 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.659 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.659 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.665 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.665 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.665 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 7: 0
2026-01-06 17:51:45.665 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 7: 0
2026-01-06 17:51:45.665 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.665 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.670 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.671 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.671 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.671 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.678 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.678 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.678 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.678 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 7(Long)
2026-01-06 17:51:45.683 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.683 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.683 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.683 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.690 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.690 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.690 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 8: 0
2026-01-06 17:51:45.690 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 8: 0
2026-01-06 17:51:45.690 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.690 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.695 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.695 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.695 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.696 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.701 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.701 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.701 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.701 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 8(Long)
2026-01-06 17:51:45.706 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.706 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.706 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.706 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.712 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.712 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.712 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 9: 0
2026-01-06 17:51:45.712 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 9: 0
2026-01-06 17:51:45.712 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.712 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.716 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.716 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.716 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.716 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.722 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.723 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.723 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.723 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 9(Long)
2026-01-06 17:51:45.728 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.728 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.729 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.729 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.734 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.734 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.734 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 10: 0
2026-01-06 17:51:45.734 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 10: 0
2026-01-06 17:51:45.734 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.734 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.739 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.739 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.739 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.739 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.746 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.747 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.747 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.747 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 10(Long)
2026-01-06 17:51:45.751 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.752 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.752 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.752 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.757 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.757 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.757 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 11: 0
2026-01-06 17:51:45.757 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 11: 0
2026-01-06 17:51:45.757 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.757 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.761 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.762 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.762 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.762 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.768 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.768 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.768 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.768 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 11(Long)
2026-01-06 17:51:45.773 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.773 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.773 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.773 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.778 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.778 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.778 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 12: 0
2026-01-06 17:51:45.778 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 12: 0
2026-01-06 17:51:45.778 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.778 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.783 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.783 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.783 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.784 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.788 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.789 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.789 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.789 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 12(Long)
2026-01-06 17:51:45.793 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.793 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.793 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.793 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.798 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.798 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.798 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 13: 0
2026-01-06 17:51:45.798 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 13: 0
2026-01-06 17:51:45.798 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.798 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.803 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.803 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.803 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.803 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.807 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.807 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.807 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.807 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 13(Long)
2026-01-06 17:51:45.811 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.811 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.811 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.811 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.815 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.815 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.815 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 14: 0
2026-01-06 17:51:45.815 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 14: 0
2026-01-06 17:51:45.816 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.816 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.819 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.819 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.820 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.820 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.824 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.824 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.824 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.824 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 14(Long)
2026-01-06 17:51:45.828 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.828 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.828 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.828 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.832 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.833 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.833 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 15: 0
2026-01-06 17:51:45.833 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 15: 0
2026-01-06 17:51:45.833 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.833 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.838 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.838 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.838 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.838 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.842 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.842 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.842 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.842 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 15(Long)
2026-01-06 17:51:45.846 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.846 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.846 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.846 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.851 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.851 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.851 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 16: 0
2026-01-06 17:51:45.851 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 16: 0
2026-01-06 17:51:45.851 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.852 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.856 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.856 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.856 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.856 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.861 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.861 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.861 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.861 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 16(Long)
2026-01-06 17:51:45.866 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.866 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.866 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.866 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.871 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.871 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.871 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 17: 0
2026-01-06 17:51:45.871 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 17: 0
2026-01-06 17:51:45.871 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.875 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.879 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.879 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.879 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.879 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.885 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.885 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.885 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.885 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 17(Long)
2026-01-06 17:51:45.895 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:45.895 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:45.895 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:45.895 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.900 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:45.900 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:45.900 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 18: 0
2026-01-06 17:51:45.900 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 18: 0
2026-01-06 17:51:45.900 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:45.900 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.906 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:45.906 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.906 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:45.906 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:45.999 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:45.999 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:45.999 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:45.999 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 18(Long)
2026-01-06 17:51:46.003 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.003 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.003 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.003 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.008 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.009 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.009 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 19: 0
2026-01-06 17:51:46.009 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 19: 0
2026-01-06 17:51:46.009 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.009 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.014 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.014 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.014 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.014 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.019 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.019 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.019 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.019 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 19(Long)
2026-01-06 17:51:46.027 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.027 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.027 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.027 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.033 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.033 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.033 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 20: 0
2026-01-06 17:51:46.033 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 20: 0
2026-01-06 17:51:46.033 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.033 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.040 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.040 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.040 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.040 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.046 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.046 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.046 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.046 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 20(Long)
2026-01-06 17:51:46.051 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.051 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.051 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.051 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.057 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.057 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.057 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 21: 0
2026-01-06 17:51:46.057 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 21: 0
2026-01-06 17:51:46.057 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.057 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.062 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.062 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.062 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.062 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.067 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.067 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.067 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.067 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 21(Long)
2026-01-06 17:51:46.073 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.073 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.073 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.073 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.078 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.078 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.078 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 22: 0
2026-01-06 17:51:46.078 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 22: 0
2026-01-06 17:51:46.078 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.078 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.083 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.083 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.083 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.083 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.088 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.088 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.088 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.088 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 22(Long)
2026-01-06 17:51:46.093 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.093 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.093 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.093 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.098 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.098 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.098 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 23: 0
2026-01-06 17:51:46.098 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 23: 0
2026-01-06 17:51:46.098 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.098 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.103 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.104 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.104 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.104 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.108 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.108 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.108 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.108 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 23(Long)
2026-01-06 17:51:46.113 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.113 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.113 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.114 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.118 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.118 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.118 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 24: 0
2026-01-06 17:51:46.118 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 24: 0
2026-01-06 17:51:46.118 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.118 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.123 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.123 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.123 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.123 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.127 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.127 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.127 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.127 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 24(Long)
2026-01-06 17:51:46.132 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.132 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.132 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.132 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.137 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.137 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.137 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 25: 0
2026-01-06 17:51:46.137 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 25: 0
2026-01-06 17:51:46.137 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.137 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.143 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.143 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.143 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.143 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.148 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.148 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.148 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.149 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 25(Long)
2026-01-06 17:51:46.154 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.154 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.154 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.154 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.159 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.159 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.159 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 26: 0
2026-01-06 17:51:46.159 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 26: 0
2026-01-06 17:51:46.159 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.159 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.164 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.164 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.164 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.165 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.169 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.169 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.169 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.169 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 26(Long)
2026-01-06 17:51:46.176 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.176 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.176 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.176 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.183 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.183 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.183 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 27: 0
2026-01-06 17:51:46.183 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 27: 0
2026-01-06 17:51:46.184 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.184 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.189 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.190 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.190 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.190 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.195 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.196 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.196 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.196 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 27(Long)
2026-01-06 17:51:46.202 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.202 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.202 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.202 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.209 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.209 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.209 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 28: 0
2026-01-06 17:51:46.209 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 28: 0
2026-01-06 17:51:46.209 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.209 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.216 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.216 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.216 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.216 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.221 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.221 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.221 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.221 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 28(Long)
2026-01-06 17:51:46.226 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.226 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.226 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.226 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.231 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.231 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.231 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 29: 0
2026-01-06 17:51:46.231 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 29: 0
2026-01-06 17:51:46.231 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.231 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.236 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.236 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.236 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.236 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.241 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.241 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.242 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.242 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 29(Long)
2026-01-06 17:51:46.246 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.246 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.246 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.246 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.252 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.252 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.253 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 30: 0
2026-01-06 17:51:46.253 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 30: 0
2026-01-06 17:51:46.253 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.253 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.258 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.258 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.258 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.258 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.262 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.262 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.262 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.263 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 30(Long)
2026-01-06 17:51:46.268 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.268 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.268 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.268 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.273 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.273 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.273 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 31: 0
2026-01-06 17:51:46.273 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 31: 0
2026-01-06 17:51:46.273 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.273 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.278 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.278 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.278 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.278 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.283 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.283 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.283 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.283 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 31(Long)
2026-01-06 17:51:46.290 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.290 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.290 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.290 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.294 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.294 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.294 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 32: 0
2026-01-06 17:51:46.294 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 32: 0
2026-01-06 17:51:46.294 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.294 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.299 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.300 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.300 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.300 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.304 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.304 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.304 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.304 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 32(Long)
2026-01-06 17:51:46.310 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.313 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.313 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.313 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.319 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-06 17:51:46.319 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.319 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 33: 4.0 + 0 extra = 4.0
2026-01-06 17:51:46.319 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 4.0
2026-01-06 17:51:46.319 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.319 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.324 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 1
2026-01-06 17:51:46.324 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.324 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.324 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.328 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-06 17:51:46.328 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.329 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.329 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-06 17:51:46.332 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.332 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.333 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.333 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.339 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.339 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.339 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 34: 0
2026-01-06 17:51:46.339 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 34: 0
2026-01-06 17:51:46.339 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.339 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.345 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.345 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.345 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.345 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.349 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.349 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.349 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.349 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 34(Long)
2026-01-06 17:51:46.354 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.354 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.354 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-06 17:51:46.354 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.358 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 0
2026-01-06 17:51:46.359 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-06 17:51:46.359 DEBUG com.leave.system.scheduled.ScheduledTasks - No CARRY_OVER found. Summing all credits for user 35: 0
2026-01-06 17:51:46.359 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 35: 0
2026-01-06 17:51:46.359 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0
2026-01-06 17:51:46.359 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.363 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-06 17:51:46.363 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.363 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-06 17:51:46.363 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-06 17:51:46.368 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-06 17:51:46.368 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-06 17:51:46.368 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-06 17:51:46.368 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 35(Long)
2026-01-06 17:51:46.372 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-06 17:51:46.372 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-06 17:51:46.373 INFO  com.leave.system.scheduled.ScheduledTasks - ‚úÖ Expiry cleanup for year 2026 completed: 1 users affected, 5.0 total days expired
