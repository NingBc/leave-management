import{_ as E,u as N,r as f,c as m,t as A,d as L,a as Q,s as V,o as W,b as j,e as h,f as d,g as s,h as I,i as u,j as p,k as n,w as c,l as g,m as M,n as H,p as P,q as R,v as T,F as Y,x as G,y as z,z as J,A as K}from"./index-ClRhICUb.js";const O={class:"home-container"},X={class:"welcome-section"},Z={class:"welcome-card"},ee={class:"greeting"},te={key:0,class:"daily-quote"},se={class:"stats-section"},ae={class:"stat-card"},oe={class:"stat-icon",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},ne={class:"stat-content"},ce={class:"stat-value"},le={class:"stat-card"},ie={class:"stat-icon",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"}},re={class:"stat-content"},de={class:"stat-value"},ue={class:"stat-card"},_e={class:"stat-icon",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}},ve={class:"stat-content"},fe={class:"stat-value"},he={key:0,class:"quick-actions"},pe=["onClick"],ye={class:"action-title"},me={__name:"Home",setup(ge){const S=H(),l=N(),i=f({}),y=f(""),_=f([]),w=f(window.innerWidth),r=m(()=>w.value<768),k=()=>{w.value=window.innerWidth},C=[{title:"æˆ‘çš„ä¼‘å‡",icon:A,path:"/leave/my",color:"#667eea"},{title:"å¹´å‡ç®¡ç†",icon:L,path:"/leave/manage",color:"#f093fb"},{title:"ç”¨æˆ·ç®¡ç†",icon:Q,path:"/system/user",color:"#4facfe"},{title:"ç³»ç»Ÿè®¾ç½®",icon:V,path:"/system/role",color:"#43e97b"}],b=m(()=>{if(!_.value||_.value.length===0)return[];const e=new Set,t=a=>{a.forEach(o=>{o.path&&e.add(o.path),o.children&&o.children.length>0&&t(o.children)})};return t(_.value),C.filter(a=>e.has(a.path))}),F=m(()=>{if(!i.value.entryDate)return 0;const e=new Date(i.value.entryDate),a=Math.abs(new Date-e);return Math.ceil(a/(1e3*60*60*24))}),U=e=>{if(!e)return"-";const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},q=e=>{S.push(e)},x=async()=>{try{const e=l.userId;if(!e)return;const t=await M.get(`/system/user/${e}`);i.value=t}catch(e){console.error("Failed to load user info:",e)}},$=async()=>{try{const t=l.userId==6?"https://api.oick.cn/api/dog?apikey=4fb8e9f4b65be468e0cdbe226701a370":"https://api.oick.cn/api/dutang?apikey=4ca862840fce3181c75d8d029f0876ec",a=await fetch(t);if(a.ok){const o=await a.json();y.value=o}}catch(e){console.error("Failed to fetch daily quote:",e)}},B=async()=>{if(l.userMenus&&l.userMenus.length>0)_.value=l.userMenus;else try{const e=l.userId;if(!e)return;const t=await M.get("/system/menu/user-menus",{params:{userId:e}});l.setUserMenus(t),_.value=t}catch(e){console.error("Failed to load user menus:",e)}};return W(()=>{x(),B(),$(),window.addEventListener("resize",k)}),j(()=>{window.removeEventListener("resize",k)}),(e,t)=>{const a=g("el-icon"),o=g("el-col"),D=g("el-row");return d(),h("div",O,[s("div",X,[s("div",Z,[s("div",ee,[s("h1",null,"ä½ å¥½ï¼Œ"+u(i.value.realName||p(l).username||"ç”¨æˆ·")+"ï¼",1)]),y.value?(d(),h("div",te," ðŸµ "+u(y.value),1)):I("",!0)])]),s("div",se,[n(D,{gutter:r.value?12:20},{default:c(()=>[n(o,{span:r.value?24:8},{default:c(()=>[s("div",ae,[s("div",oe,[n(a,{size:28},{default:c(()=>[n(p(P))]),_:1})]),s("div",ne,[s("div",ce,u(F.value),1),t[0]||(t[0]=s("div",{class:"stat-label"},"åœ¨èŒå¤©æ•°",-1))])])]),_:1},8,["span"]),n(o,{span:r.value?24:8},{default:c(()=>[s("div",le,[s("div",ie,[n(a,{size:28},{default:c(()=>[n(p(R))]),_:1})]),s("div",re,[s("div",de,u(U(i.value.entryDate)),1),t[1]||(t[1]=s("div",{class:"stat-label"},"å…¥èŒæ—¥æœŸ",-1))])])]),_:1},8,["span"]),n(o,{span:r.value?24:8},{default:c(()=>[s("div",ue,[s("div",_e,[n(a,{size:28},{default:c(()=>[n(p(T))]),_:1})]),s("div",ve,[s("div",fe,u(i.value.socialSeniority||0)+" å¹´",1),t[2]||(t[2]=s("div",{class:"stat-label"},"ç¤¾ä¼šå·¥é¾„",-1))])])]),_:1},8,["span"])]),_:1},8,["gutter"])]),b.value.length>0?(d(),h("div",he,[t[3]||(t[3]=s("h3",{class:"section-title"},"å¿«æ·æ“ä½œ",-1)),n(D,{gutter:r.value?12:20},{default:c(()=>[(d(!0),h(Y,null,G(b.value,v=>(d(),z(o,{span:r.value?12:6,key:v.path},{default:c(()=>[s("div",{class:"action-card",onClick:we=>q(v.path)},[n(a,{size:32,style:J({color:v.color})},{default:c(()=>[(d(),z(K(v.icon)))]),_:2},1032,["style"]),s("div",ye,u(v.title),1)],8,pe)]),_:2},1032,["span"]))),128))]),_:1},8,["gutter"])])):I("",!0)])}}},be=E(me,[["__scopeId","data-v-9ada2d1f"]]);export{be as default};
