import{_ as E,r as c,c as T,o as z,e as A,f as y,g as w,k as l,w as a,l as d,m as v,B as m,y as g,h as S,A as j,E as q,D as k}from"./index-CEIzmG_u.js";const F={class:"toolbar"},G={class:"dialog-footer"},H={__name:"Menu",setup(J){const f=c([]),i=c(!1),_=c("add"),o=c({id:null,parentId:0,menuName:"",path:"",component:"",perms:"",icon:"",orderNum:1}),C=T(()=>_.value==="add"?"添加菜单":"编辑菜单"),b=async()=>{try{const n=await v.get("/system/menu/list");f.value=n}catch(n){console.error(n)}},V=(n,e=null)=>{_.value=n,n==="add"?o.value={id:null,parentId:e?e.id:0,menuName:"",path:"",component:"",perms:"",icon:"",orderNum:1}:o.value={...e},i.value=!0},x=async()=>{try{_.value==="add"?(await v.post("/system/menu/add",o.value),k.success("菜单已添加")):(await v.put("/system/menu/update",o.value),k.success("菜单已更新")),i.value=!1,b()}catch(n){console.error(n)}},h=async n=>{try{await q.confirm("确定要删除该菜单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await v.delete(`/system/menu/delete/${n.id}`),k.success("菜单已删除"),b()}catch(e){e!=="cancel"&&console.error(e)}};return z(()=>{b()}),(n,e)=>{const s=d("el-button"),u=d("el-table-column"),B=d("el-icon"),U=d("el-table"),M=d("el-tree-select"),r=d("el-form-item"),p=d("el-input"),D=d("el-input-number"),$=d("el-form"),I=d("el-dialog");return y(),A("div",null,[w("div",F,[e[11]||(e[11]=w("span",null,null,-1)),l(s,{type:"primary",onClick:e[0]||(e[0]=t=>V("add"))},{default:a(()=>[...e[10]||(e[10]=[m("添加菜单",-1)])]),_:1})]),l(U,{data:f.value,style:{width:"100%"},"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:a(()=>[l(u,{prop:"menuName",label:"菜单名称",width:"200"}),l(u,{prop:"icon",label:"图标",width:"80",align:"center"},{default:a(t=>[t.row.icon?(y(),g(B,{key:0},{default:a(()=>[(y(),g(j(t.row.icon)))]),_:2},1024)):S("",!0)]),_:1}),l(u,{prop:"orderNum",label:"排序",width:"80",align:"center"}),l(u,{prop:"perms",label:"权限标识",width:"200"}),l(u,{prop:"component",label:"组件路径",width:"200"}),l(u,{prop:"path",label:"路由地址"}),l(u,{label:"操作",width:"250",fixed:"right"},{default:a(t=>[l(s,{link:"",type:"primary",size:"small",onClick:N=>V("add",t.row)},{default:a(()=>[...e[12]||(e[12]=[m("新增下级",-1)])]),_:1},8,["onClick"]),l(s,{link:"",type:"primary",size:"small",onClick:N=>V("edit",t.row)},{default:a(()=>[...e[13]||(e[13]=[m("编辑",-1)])]),_:1},8,["onClick"]),l(s,{link:"",type:"danger",size:"small",onClick:N=>h(t.row)},{default:a(()=>[...e[14]||(e[14]=[m("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),l(I,{modelValue:i.value,"onUpdate:modelValue":e[9]||(e[9]=t=>i.value=t),title:C.value,width:"600px"},{footer:a(()=>[w("span",G,[l(s,{onClick:e[8]||(e[8]=t=>i.value=!1)},{default:a(()=>[...e[15]||(e[15]=[m("取消",-1)])]),_:1}),l(s,{type:"primary",onClick:x},{default:a(()=>[...e[16]||(e[16]=[m("确认",-1)])]),_:1})])]),default:a(()=>[l($,{model:o.value,"label-width":"100px"},{default:a(()=>[l(r,{label:"上级菜单"},{default:a(()=>[l(M,{modelValue:o.value.parentId,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.parentId=t),data:[{id:0,menuName:"主类目",children:f.value}],props:{label:"menuName",value:"id",children:"children"},"check-strictly":"",placeholder:"选择上级菜单",style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),l(r,{label:"菜单名称"},{default:a(()=>[l(p,{modelValue:o.value.menuName,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.menuName=t),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),l(r,{label:"显示排序"},{default:a(()=>[l(D,{modelValue:o.value.orderNum,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.orderNum=t),min:0},null,8,["modelValue"])]),_:1}),l(r,{label:"路由地址"},{default:a(()=>[l(p,{modelValue:o.value.path,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.path=t),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1}),l(r,{label:"组件路径"},{default:a(()=>[l(p,{modelValue:o.value.component,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.component=t),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1}),l(r,{label:"权限标识"},{default:a(()=>[l(p,{modelValue:o.value.perms,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.perms=t),placeholder:"请输入权限标识"},null,8,["modelValue"])]),_:1}),l(r,{label:"图标"},{default:a(()=>[l(p,{modelValue:o.value.icon,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.icon=t),placeholder:"请输入图标名称 (如: Menu)"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},L=E(H,[["__scopeId","data-v-a36db9c9"]]);export{L as default};
