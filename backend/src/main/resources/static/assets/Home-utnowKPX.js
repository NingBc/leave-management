import{_ as $,u as B,r as h,c as p,t as E,d as N,a as q,s as A,o as L,b as V,e as m,f as _,g as e,h as W,i as v,j as f,k as a,w as l,l as y,m as D,n as H,p as P,q as R,v as T,F as j,x as Q,y as M,z as Y,A as G}from"./index-ClnmXTUe.js";const J={class:"home-container"},K={class:"welcome-section"},O={class:"welcome-card"},X={class:"greeting"},Z={class:"stats-section"},ee={class:"stat-card"},te={class:"stat-icon",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},se={class:"stat-content"},ae={class:"stat-value"},oe={class:"stat-card"},ne={class:"stat-icon",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"}},le={class:"stat-content"},ce={class:"stat-value"},ie={class:"stat-card"},re={class:"stat-icon",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}},de={class:"stat-content"},ue={class:"stat-value"},_e={key:0,class:"quick-actions"},ve=["onClick"],fe={class:"action-title"},he={__name:"Home",setup(pe){const z=H(),c=B(),i=h({}),d=h([]),g=h(window.innerWidth),r=p(()=>g.value<768),w=()=>{g.value=window.innerWidth},S=[{title:"我的休假",icon:E,path:"/leave/my",color:"#667eea"},{title:"年假管理",icon:N,path:"/leave/manage",color:"#f093fb"},{title:"用户管理",icon:q,path:"/system/user",color:"#4facfe"},{title:"系统设置",icon:A,path:"/system/role",color:"#43e97b"}],k=p(()=>{if(!d.value||d.value.length===0)return[];const s=new Set,t=n=>{n.forEach(o=>{o.path&&s.add(o.path),o.children&&o.children.length>0&&t(o.children)})};return t(d.value),S.filter(n=>s.has(n.path))}),I=p(()=>{if(!i.value.entryDate)return 0;const s=new Date(i.value.entryDate),n=Math.abs(new Date-s);return Math.ceil(n/(1e3*60*60*24))}),C=s=>{if(!s)return"-";const t=new Date(s);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},x=s=>{z.push(s)},F=async()=>{try{const s=c.userId;if(!s)return;const t=await D.get(`/system/user/${s}`);i.value=t}catch(s){console.error("Failed to load user info:",s)}},U=async()=>{if(c.userMenus&&c.userMenus.length>0)d.value=c.userMenus;else try{const s=c.userId;if(!s)return;const t=await D.get("/system/menu/user-menus",{params:{userId:s}});c.setUserMenus(t),d.value=t}catch(s){console.error("Failed to load user menus:",s)}};return L(()=>{F(),U(),window.addEventListener("resize",w)}),V(()=>{window.removeEventListener("resize",w)}),(s,t)=>{const n=y("el-icon"),o=y("el-col"),b=y("el-row");return _(),m("div",J,[e("div",K,[e("div",O,[e("div",X,[e("h1",null,"你好，"+v(i.value.realName||f(c).username||"用户")+"！",1)])])]),e("div",Z,[a(b,{gutter:r.value?12:20},{default:l(()=>[a(o,{span:r.value?24:8},{default:l(()=>[e("div",ee,[e("div",te,[a(n,{size:28},{default:l(()=>[a(f(P))]),_:1})]),e("div",se,[e("div",ae,v(I.value),1),t[0]||(t[0]=e("div",{class:"stat-label"},"在职天数",-1))])])]),_:1},8,["span"]),a(o,{span:r.value?24:8},{default:l(()=>[e("div",oe,[e("div",ne,[a(n,{size:28},{default:l(()=>[a(f(R))]),_:1})]),e("div",le,[e("div",ce,v(C(i.value.entryDate)),1),t[1]||(t[1]=e("div",{class:"stat-label"},"入职日期",-1))])])]),_:1},8,["span"]),a(o,{span:r.value?24:8},{default:l(()=>[e("div",ie,[e("div",re,[a(n,{size:28},{default:l(()=>[a(f(T))]),_:1})]),e("div",de,[e("div",ue,v(i.value.socialSeniority||0)+" 年",1),t[2]||(t[2]=e("div",{class:"stat-label"},"社会工龄",-1))])])]),_:1},8,["span"])]),_:1},8,["gutter"])]),k.value.length>0?(_(),m("div",_e,[t[3]||(t[3]=e("h3",{class:"section-title"},"快捷操作",-1)),a(b,{gutter:r.value?12:20},{default:l(()=>[(_(!0),m(j,null,Q(k.value,u=>(_(),M(o,{span:r.value?12:6,key:u.path},{default:l(()=>[e("div",{class:"action-card",onClick:me=>x(u.path)},[a(n,{size:32,style:Y({color:u.color})},{default:l(()=>[(_(),M(G(u.icon)))]),_:2},1032,["style"]),e("div",fe,v(u.title),1)],8,ve)]),_:2},1032,["span"]))),128))]),_:1},8,["gutter"])])):W("",!0)])}}},ge=$(he,[["__scopeId","data-v-9889a5f6"]]);export{ge as default};
