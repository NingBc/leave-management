2026-01-23 10:33:44.483 INFO  com.leave.system.LeaveSystemApplication - Starting LeaveSystemApplication using Java 17.0.6 with PID 14245 (/Users/cccc/IdeaProjects/leave-management/backend/target/classes started by cccc in /Users/cccc/IdeaProjects/leave-management)
2026-01-23 10:33:44.486 DEBUG com.leave.system.LeaveSystemApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-23 10:33:44.486 INFO  com.leave.system.LeaveSystemApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-23 10:33:45.184 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 7899 (http)
2026-01-23 10:33:45.188 INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-7899"]
2026-01-23 10:33:45.188 INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-23 10:33:45.189 INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2026-01-23 10:33:45.210 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-23 10:33:45.210 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 689 ms
2026-01-23 10:33:45.280 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@57f8951a'
2026-01-23 10:33:45.280 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@49edcb30'
2026-01-23 10:33:45.343 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-23 10:33:45.359 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-23 10:33:45.367 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-23 10:33:45.376 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-23 10:33:45.389 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-23 10:33:45.396 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-23 10:33:45.408 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-23 10:33:45.414 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:0
2026-01-23 10:33:45.430 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-23 10:33:45.579 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@748904e8
2026-01-23 10:33:45.580 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-23 10:33:45.633 DEBUG com.leave.system.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-01-23 10:33:45.830 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-23 10:33:45.837 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-23 10:33:45.847 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-23 10:33:45.884 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-23 10:33:45.885 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-23 10:33:45.887 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: 钉钉数据同步 with cron: 0 03 14 ? * MON
2026-01-23 10:33:45.888 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: 年假过期清理 with cron: 0 0 1 1 1 ?
2026-01-23 10:33:45.888 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: 年假账户批量初始化 with cron: 0 0 3 1 1 ?
2026-01-23 10:33:45.888 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-23 10:33:45.977 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-23 10:33:46.080 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@459d2ee6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5342eec5, org.springframework.security.web.context.SecurityContextHolderFilter@114b203, org.springframework.security.web.header.HeaderWriterFilter@839755f, org.springframework.web.filter.CorsFilter@60e47aab, org.springframework.security.web.authentication.logout.LogoutFilter@1b19712f, com.leave.system.security.JwtAuthenticationFilter@2c8ff67, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@537b3be1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@15d58530, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@261a66b8, org.springframework.security.web.session.SessionManagementFilter@6b7c4734, org.springframework.security.web.access.ExceptionTranslationFilter@164dea80, org.springframework.security.web.access.intercept.AuthorizationFilter@588d630d]
2026-01-23 10:33:46.219 INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-7899"]
2026-01-23 10:33:46.227 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 7899 (http) with context path ''
2026-01-23 10:33:46.232 INFO  com.leave.system.LeaveSystemApplication - Started LeaveSystemApplication in 2.149 seconds (process running for 2.424)
2026-01-23 10:33:46.232 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-23 10:33:46.233 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-23 10:37:24.166 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-23 10:37:24.167 INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-23 10:37:24.169 INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-01-23 10:37:24.174 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /system/user/1
2026-01-23 10:37:24.174 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /system/menu/user-menus?userId=1
2026-01-23 10:37:24.210 WARN  com.leave.system.security.JwtAuthenticationFilter - JWT parsing failed: JWT expired at 2026-01-13T08:43:47Z. Current time: 2026-01-23T02:37:24Z, a difference of 842017210 milliseconds.  Allowed clock skew: 0 milliseconds.
2026-01-23 10:37:24.210 WARN  com.leave.system.security.JwtAuthenticationFilter - JWT parsing failed: JWT expired at 2026-01-13T08:43:47Z. Current time: 2026-01-23T02:37:24Z, a difference of 842017210 milliseconds.  Allowed clock skew: 0 milliseconds.
2026-01-23 10:37:24.211 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-23 10:37:24.211 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-23 10:37:24.212 WARN  o.s.web.servlet.handler.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/system/menu/user-menus' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2026-01-23 10:37:24.219 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /error?userId=1
2026-01-23 10:37:24.219 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /error
2026-01-23 10:37:24.219 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /error?userId=1
2026-01-23 10:37:24.219 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /error
2026-01-23 10:37:24.226 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/error
2026-01-23 10:37:24.226 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/error
2026-01-23 10:37:24.227 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.SpaErrorController.handleError
2026-01-23 10:37:24.227 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.SpaErrorController.handleError
2026-01-23 10:37:24.227 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:37:24.227 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:37:24.229 INFO  com.leave.system.aspect.WebLogAspect - Response     : "forward:/index.html"
2026-01-23 10:37:24.229 INFO  com.leave.system.aspect.WebLogAspect - Response     : "forward:/index.html"
2026-01-23 10:37:24.238 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /index.html?userId=1
2026-01-23 10:37:24.238 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /index.html
2026-01-23 10:37:24.240 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /index.html?userId=1
2026-01-23 10:37:24.240 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /index.html
2026-01-23 10:37:24.244 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-23 10:37:24.244 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-23 10:37:24.248 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /system/menu/user-menus?userId=1
2026-01-23 10:37:24.249 WARN  com.leave.system.security.JwtAuthenticationFilter - JWT parsing failed: JWT expired at 2026-01-13T08:43:47Z. Current time: 2026-01-23T02:37:24Z, a difference of 842017249 milliseconds.  Allowed clock skew: 0 milliseconds.
2026-01-23 10:37:24.249 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-23 10:37:24.249 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /error?userId=1
2026-01-23 10:37:24.249 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /error?userId=1
2026-01-23 10:37:24.250 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/error
2026-01-23 10:37:24.250 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.SpaErrorController.handleError
2026-01-23 10:37:24.250 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:37:24.250 INFO  com.leave.system.aspect.WebLogAspect - Response     : "forward:/index.html"
2026-01-23 10:37:24.250 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /index.html?userId=1
2026-01-23 10:37:24.251 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /index.html?userId=1
2026-01-23 10:37:24.251 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-23 10:37:34.512 DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-23 10:37:34.532 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-23 10:37:34.535 DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-23 10:37:34.573 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/auth/login
2026-01-23 10:37:34.573 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.AuthController.login
2026-01-23 10:37:34.573 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [AuthController.LoginRequest(username=admin, password=123456)]
2026-01-23 10:37:34.667 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:37:34.668 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:37:34.691 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:37:34.692 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:37:35.013 DEBUG o.s.s.authentication.dao.DaoAuthenticationProvider - Authenticated user
2026-01-23 10:37:35.022 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:37:35.022 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:37:35.027 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:37:35.027 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:37:35.030 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"登录成功","data":{"userId":1,"token":"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc2OTEzNTg1NSwiZXhwIjoxNzY5NzQwNjU1fQ.rG0EtXBwB29vQk0o4JlDvr04FdxmebBYGJ3ClAgLk8c","username":"admin"}}
2026-01-23 10:37:35.081 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /system/user/1
2026-01-23 10:37:35.081 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /system/menu/user-menus?userId=1
2026-01-23 10:37:35.083 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:37:35.084 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:37:35.088 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:37:35.088 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:37:35.088 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:37:35.089 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:37:35.090 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /system/menu/user-menus?userId=1
2026-01-23 10:37:35.091 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/system/menu/user-menus
2026-01-23 10:37:35.092 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.MenuController.getUserMenus
2026-01-23 10:37:35.092 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [1]
2026-01-23 10:37:35.092 INFO  com.leave.system.service.impl.MenuServiceImpl - getUserMenus called for userId: 1
2026-01-23 10:37:35.092 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:37:35.092 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 10:37:35.095 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:37:35.096 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:37:35.099 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:37:35.099 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 10:37:35.100 DEBUG c.l.system.mapper.RoleMenuMapper.selectByRoleId - ==>  Preparing: SELECT * FROM role_menu WHERE role_id = ?
2026-01-23 10:37:35.100 DEBUG c.l.system.mapper.RoleMenuMapper.selectByRoleId - ==> Parameters: 1(Long)
2026-01-23 10:37:35.102 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /system/user/1
2026-01-23 10:37:35.102 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/system/user/1
2026-01-23 10:37:35.103 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.UserController.getById
2026-01-23 10:37:35.103 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [1]
2026-01-23 10:37:35.103 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:37:35.103 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 10:37:35.106 DEBUG c.l.system.mapper.RoleMenuMapper.selectByRoleId - <==      Total: 10
2026-01-23 10:37:35.106 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.RoleMenuMapper.selectByRoleId
SQL         : SELECT * FROM role_menu WHERE role_id = 1

2026-01-23 10:37:35.108 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:37:35.108 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 10:37:35.111 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"id":1,"username":"admin","password":null,"realName":"系统管理员","employeeNumber":"ADMIN001","firstWorkDate":"2020-01-01","entryDate":"2020-01-01","socialSeniority":6,"roleId":1,"dingtalkUserId":null,"status":"ACTIVE","resignationDate":null,"createTime":"2026-01-07T06:53:33","updateTime":"2026-01-07T14:54:37","deleted":0}}
2026-01-23 10:37:35.114 DEBUG c.l.system.mapper.SysMenuMapper.selectMenusByIds - ==>  Preparing: SELECT * FROM sys_menu WHERE id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY parent_id, order_num, id
2026-01-23 10:37:35.114 DEBUG c.l.system.mapper.SysMenuMapper.selectMenusByIds - ==> Parameters: 1(Long), 2(Long), 3(Long), 4(Long), 5(Long), 6(Long), 7(Long), 8(Long), 9(Long), 10(Long)
2026-01-23 10:37:35.119 DEBUG c.l.system.mapper.SysMenuMapper.selectMenusByIds - <==      Total: 10
2026-01-23 10:37:35.119 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysMenuMapper.selectMenusByIds
SQL         : SELECT * FROM sys_menu WHERE id IN ( 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 ) ORDER BY parent_id, order_num, id

2026-01-23 10:37:35.121 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"parentId":0,"menuName":"首页","path":"/dashboard","component":"Dashboard","icon":"HomeFilled","orderNum":1,"deleted":0,"children":[]},{"id":2,"parentId":0,"menuName":"休假管理","path":"/leave","component":null,"icon":"Calendar","orderNum":2,"deleted":0,"children":[{"id":5,"parentId":2,"menuName":"我的休假","path":"/leave/my","component":"leave/MyLeave","icon":null,"orderNum":1,"deleted":0,"children":[]},{"id":6,"parentId":2,"menuName":"休假管理(管理员)","path":"/leave/manage","component":"leave/ManageLeave","icon":null,"orderNum":2,"deleted":0,"children":[]}]},{"id":3,"parentId":0,"menuName":"系统管理","path":"/system","component":null,"icon":"Setting","orderNum":3,"deleted":0,"children":[{"id":7,"parentId":3,"menuName":"用户管理","path":"/system/user","component":"system/User","icon":null,"orderNum":1,"deleted":0,"children":[]},{"id":8,"parentId":3,"menuName":"角色管理","path":"/system/role","component":"system/Role","icon":null,"orderNum":2,"deleted":0,"children":[]},{"id":9,"parentId":3,"menuName":"菜单管理","path":"/system/menu","component":"system/Menu","icon":null,"orderNum":3,"deleted":0,"children":[]}]},{"id":4,"parentId":0,"menuName":"系统监控","path":"/monitor","component":null,"icon":"Monitor","orderNum":4,"deleted":0,"children":[{"id":10,"parentId":4,"menuName":"定时任务","path":"/monitor/job","component":"monitor/Job","icon":null,"orderNum":1,"deleted":0,"children":[]}]}]}
2026-01-23 10:37:35.125 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /system/menu/user-menus?userId=1
2026-01-23 10:37:35.126 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:37:35.126 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:37:35.130 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:37:35.130 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:37:35.132 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /system/menu/user-menus?userId=1
2026-01-23 10:37:35.132 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/system/menu/user-menus
2026-01-23 10:37:35.132 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.MenuController.getUserMenus
2026-01-23 10:37:35.132 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [1]
2026-01-23 10:37:35.132 INFO  com.leave.system.service.impl.MenuServiceImpl - getUserMenus called for userId: 1
2026-01-23 10:37:35.132 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:37:35.132 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 10:37:35.137 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:37:35.137 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 10:37:35.137 DEBUG c.l.system.mapper.RoleMenuMapper.selectByRoleId - ==>  Preparing: SELECT * FROM role_menu WHERE role_id = ?
2026-01-23 10:37:35.137 DEBUG c.l.system.mapper.RoleMenuMapper.selectByRoleId - ==> Parameters: 1(Long)
2026-01-23 10:37:35.148 DEBUG c.l.system.mapper.RoleMenuMapper.selectByRoleId - <==      Total: 10
2026-01-23 10:37:35.149 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.RoleMenuMapper.selectByRoleId
SQL         : SELECT * FROM role_menu WHERE role_id = 1

2026-01-23 10:37:35.149 DEBUG c.l.system.mapper.SysMenuMapper.selectMenusByIds - ==>  Preparing: SELECT * FROM sys_menu WHERE id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY parent_id, order_num, id
2026-01-23 10:37:35.149 DEBUG c.l.system.mapper.SysMenuMapper.selectMenusByIds - ==> Parameters: 1(Long), 2(Long), 3(Long), 4(Long), 5(Long), 6(Long), 7(Long), 8(Long), 9(Long), 10(Long)
2026-01-23 10:37:35.155 DEBUG c.l.system.mapper.SysMenuMapper.selectMenusByIds - <==      Total: 10
2026-01-23 10:37:35.155 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysMenuMapper.selectMenusByIds
SQL         : SELECT * FROM sys_menu WHERE id IN ( 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 ) ORDER BY parent_id, order_num, id

2026-01-23 10:37:35.155 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"parentId":0,"menuName":"首页","path":"/dashboard","component":"Dashboard","icon":"HomeFilled","orderNum":1,"deleted":0,"children":[]},{"id":2,"parentId":0,"menuName":"休假管理","path":"/leave","component":null,"icon":"Calendar","orderNum":2,"deleted":0,"children":[{"id":5,"parentId":2,"menuName":"我的休假","path":"/leave/my","component":"leave/MyLeave","icon":null,"orderNum":1,"deleted":0,"children":[]},{"id":6,"parentId":2,"menuName":"休假管理(管理员)","path":"/leave/manage","component":"leave/ManageLeave","icon":null,"orderNum":2,"deleted":0,"children":[]}]},{"id":3,"parentId":0,"menuName":"系统管理","path":"/system","component":null,"icon":"Setting","orderNum":3,"deleted":0,"children":[{"id":7,"parentId":3,"menuName":"用户管理","path":"/system/user","component":"system/User","icon":null,"orderNum":1,"deleted":0,"children":[]},{"id":8,"parentId":3,"menuName":"角色管理","path":"/system/role","component":"system/Role","icon":null,"orderNum":2,"deleted":0,"children":[]},{"id":9,"parentId":3,"menuName":"菜单管理","path":"/system/menu","component":"system/Menu","icon":null,"orderNum":3,"deleted":0,"children":[]}]},{"id":4,"parentId":0,"menuName":"系统监控","path":"/monitor","component":null,"icon":"Monitor","orderNum":4,"deleted":0,"children":[{"id":10,"parentId":4,"menuName":"定时任务","path":"/monitor/job","component":"monitor/Job","icon":null,"orderNum":1,"deleted":0,"children":[]}]}]}
2026-01-23 10:37:38.642 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /job/list
2026-01-23 10:37:38.647 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:37:38.648 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:37:38.654 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:37:38.654 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:37:38.658 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /job/list
2026-01-23 10:37:38.659 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/list
2026-01-23 10:37:38.659 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.listJobs
2026-01-23 10:37:38.659 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:37:38.659 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==>  Preparing: SELECT * FROM sys_job
2026-01-23 10:37:38.660 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==> Parameters: 
2026-01-23 10:37:38.675 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - <==      Total: 3
2026-01-23 10:37:38.675 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectAllJobs
SQL         : SELECT * FROM sys_job

2026-01-23 10:37:38.677 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"jobName":"钉钉数据同步","jobGroup":"DEFAULT","invokeTarget":"dingTalkService.syncLeaveData()","cronExpression":"0 03 14 ? * MON","status":0,"remark":"每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-19T06:02:08","deleted":0},{"id":2,"jobName":"年假过期清理","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.cleanupExpiredLeaveBalances(2026)","cronExpression":"0 0 1 1 1 ?","status":0,"remark":"每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:45:37","deleted":0},{"id":3,"jobName":"年假账户批量初始化","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.initAllAccounts(2027)","cronExpression":"0 0 3 1 1 ?","status":0,"remark":"每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:47:23","deleted":0}]}
2026-01-23 10:38:20.264 DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /job/update
2026-01-23 10:38:20.289 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:38:20.290 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:38:20.295 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:38:20.296 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:38:20.301 DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /job/update
2026-01-23 10:38:20.312 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/update
2026-01-23 10:38:20.312 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.updateJob
2026-01-23 10:38:20.314 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [SysJob(id=1, jobName=钉钉数据同步, jobGroup=DEFAULT, invokeTarget=dingTalkService.syncLeaveData(), cronExpression=0 40 10 ? * FRI, status=0, remark=每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。, createTime=2026-01-07T06:54:03, updateTime=2026-01-19T06:02:08, deleted=0)]
2026-01-23 10:38:20.318 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - ==>  Preparing: UPDATE sys_job SET job_name = ?, job_group = ?, invoke_target = ?, cron_expression = ?, status = ?, remark = ?, update_time = ? WHERE id = ?
2026-01-23 10:38:20.319 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - ==> Parameters: 钉钉数据同步(String), DEFAULT(String), dingTalkService.syncLeaveData()(String), 0 40 10 ? * FRI(String), 0(Integer), 每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。(String), 2026-01-23T10:38:20.314625(LocalDateTime), 1(Long)
2026-01-23 10:38:20.333 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - <==    Updates: 1
2026-01-23 10:38:20.333 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.updateJob
SQL         : UPDATE sys_job SET job_name = '钉钉数据同步', job_group = 'DEFAULT', invoke_target = 'dingTalkService.syncLeaveData()', cron_expression = '0 40 10 0 * FRI', status = '每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。', remark = 2026-01-23T10:38:20.314625, update_time = 1 WHERE id = ?

2026-01-23 10:38:20.333 INFO  com.leave.system.service.impl.SysJobServiceImpl - Cancelled scheduled task for job ID: 1
2026-01-23 10:38:20.333 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - ==>  Preparing: SELECT * FROM sys_job WHERE id = ?
2026-01-23 10:38:20.333 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - ==> Parameters: 1(Long)
2026-01-23 10:38:20.340 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - <==      Total: 1
2026-01-23 10:38:20.340 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectJobById
SQL         : SELECT * FROM sys_job WHERE id = 1

2026-01-23 10:38:20.340 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: 钉钉数据同步 with cron: 0 40 10 ? * FRI
2026-01-23 10:38:20.341 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"任务更新成功","data":null}
2026-01-23 10:38:20.360 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /job/list
2026-01-23 10:38:20.361 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:38:20.361 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:38:20.374 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:38:20.374 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:38:20.376 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /job/list
2026-01-23 10:38:20.376 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/list
2026-01-23 10:38:20.376 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.listJobs
2026-01-23 10:38:20.376 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:38:20.377 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==>  Preparing: SELECT * FROM sys_job
2026-01-23 10:38:20.377 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==> Parameters: 
2026-01-23 10:38:20.392 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - <==      Total: 3
2026-01-23 10:38:20.392 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectAllJobs
SQL         : SELECT * FROM sys_job

2026-01-23 10:38:20.393 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"jobName":"钉钉数据同步","jobGroup":"DEFAULT","invokeTarget":"dingTalkService.syncLeaveData()","cronExpression":"0 40 10 ? * FRI","status":0,"remark":"每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:38:20","deleted":0},{"id":2,"jobName":"年假过期清理","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.cleanupExpiredLeaveBalances(2026)","cronExpression":"0 0 1 1 1 ?","status":0,"remark":"每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:45:37","deleted":0},{"id":3,"jobName":"年假账户批量初始化","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.initAllAccounts(2027)","cronExpression":"0 0 3 1 1 ?","status":0,"remark":"每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:47:23","deleted":0}]}
2026-01-23 10:40:00.000 INFO  com.leave.system.service.impl.SysJobServiceImpl - Executing job: 钉钉数据同步 - dingTalkService.syncLeaveData()
2026-01-23 10:40:00.039 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Starting DingTalk leave data sync...
2026-01-23 10:40:00.282 INFO  com.leave.system.service.impl.DingTalkServiceImpl - AccessToken fetched successfully.
2026-01-23 10:40:00.283 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Sync lookback period: 7 days
2026-01-23 10:40:00.283 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Syncing data from 2026-01-16 00:00:00 to 2026-01-23 23:59:59
2026-01-23 10:40:00.286 DEBUG c.l.s.m.SysUserMapper.selectUsersWithDingtalkId - ==>  Preparing: SELECT * FROM sys_user WHERE dingtalk_userid IS NOT NULL AND dingtalk_userid != '' AND deleted = 0
2026-01-23 10:40:00.286 DEBUG c.l.s.m.SysUserMapper.selectUsersWithDingtalkId - ==> Parameters: 
2026-01-23 10:40:00.292 DEBUG c.l.s.m.SysUserMapper.selectUsersWithDingtalkId - <==      Total: 7
2026-01-23 10:40:00.292 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUsersWithDingtalkId
SQL         : SELECT * FROM sys_user WHERE dingtalk_userid IS NOT NULL AND dingtalk_userid != '' AND deleted = 0

2026-01-23 10:40:00.292 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 7 users to sync.
2026-01-23 10:40:00.292 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: zhanghao (DingTalk ID: 2865622217540402722)
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user zhanghao
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.686 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: yanglinlin (DingTalk ID: 01375608291585141889)
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user yanglinlin
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.927 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:40:00.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:40:00.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:40:00.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:00.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: caoliping (DingTalk ID: 152349662726400963)
2026-01-23 10:40:01.208 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user caoliping
2026-01-23 10:40:01.208 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:40:01.208 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:40:01.208 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.208 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.209 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: yangjimei (DingTalk ID: 044350215026473446)
2026-01-23 10:40:01.486 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user yangjimei
2026-01-23 10:40:01.486 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.487 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: siguorui (DingTalk ID: 100106692021377785)
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user siguorui
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.734 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:40:01.735 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.735 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:40:01.735 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.735 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:40:01.735 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.735 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:40:01.735 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.735 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: yaoyan (DingTalk ID: 36316808521114156)
2026-01-23 10:40:01.953 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user yaoyan
2026-01-23 10:40:01.953 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:40:01.953 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:40:01.953 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.953 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:40:01.953 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.953 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:40:01.953 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.953 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:40:01.954 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.954 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:40:01.954 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.954 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:40:01.954 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.954 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:40:01.954 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.954 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:40:01.954 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:01.954 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: zhangningbo (DingTalk ID: 01525237116824149785)
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user zhangningbo
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:02.195 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:40:02.196 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:02.196 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:40:02.196 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:40:02.196 INFO  com.leave.system.service.impl.DingTalkServiceImpl - DingTalk leave data sync completed.
2026-01-23 10:40:02.209 INFO  com.leave.system.service.impl.SysJobServiceImpl - Job executed successfully: 钉钉数据同步
2026-01-23 10:51:27.959 INFO  com.leave.system.LeaveSystemApplication - Starting LeaveSystemApplication using Java 17.0.6 with PID 15491 (/Users/cccc/IdeaProjects/leave-management/backend/target/classes started by cccc in /Users/cccc/IdeaProjects/leave-management)
2026-01-23 10:51:27.959 DEBUG com.leave.system.LeaveSystemApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2026-01-23 10:51:27.960 INFO  com.leave.system.LeaveSystemApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-23 10:51:28.472 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 7899 (http)
2026-01-23 10:51:28.475 INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-0.0.0.0-7899"]
2026-01-23 10:51:28.476 INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2026-01-23 10:51:28.476 INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2026-01-23 10:51:28.494 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-01-23 10:51:28.494 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 516 ms
2026-01-23 10:51:28.558 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.leave.system.config.SqlLogInterceptor@70716259'
2026-01-23 10:51:28.558 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@6a950a3b'
2026-01-23 10:51:28.614 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveAccountMapper.xml]'
2026-01-23 10:51:28.631 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/LeaveRecordMapper.xml]'
2026-01-23 10:51:28.638 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/RoleMenuMapper.xml]'
2026-01-23 10:51:28.646 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysJobMapper.xml]'
2026-01-23 10:51:28.653 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysMenuMapper.xml]'
2026-01-23 10:51:28.659 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysRoleMapper.xml]'
2026-01-23 10:51:28.671 DEBUG c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [/Users/cccc/IdeaProjects/leave-management/backend/target/classes/mapper/SysUserMapper.xml]'
2026-01-23 10:51:28.676 DEBUG com.baomidou.mybatisplus.core.toolkit.Sequence - Initialization Sequence datacenterId:0 workerId:24
2026-01-23 10:51:28.685 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-23 10:51:28.802 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b3056a6
2026-01-23 10:51:28.803 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-23 10:51:28.849 DEBUG com.leave.system.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2026-01-23 10:51:28.973 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initializing scheduled tasks...
2026-01-23 10:51:28.979 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==>  Preparing: SELECT * FROM sys_job WHERE status = 0
2026-01-23 10:51:28.989 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - ==> Parameters: 
2026-01-23 10:51:29.005 DEBUG c.l.system.mapper.SysJobMapper.selectActiveJobs - <==      Total: 3
2026-01-23 10:51:29.005 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectActiveJobs
SQL         : SELECT * FROM sys_job WHERE status = 0

2026-01-23 10:51:29.008 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: 钉钉数据同步 with cron: 0 40 10 ? * FRI
2026-01-23 10:51:29.008 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: 年假过期清理 with cron: 0 0 1 1 1 ?
2026-01-23 10:51:29.008 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: 年假账户批量初始化 with cron: 0 0 3 1 1 ?
2026-01-23 10:51:29.008 INFO  com.leave.system.service.impl.SysJobServiceImpl - Initialized 3 scheduled tasks.
2026-01-23 10:51:29.094 INFO  o.s.b.a.web.servlet.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2026-01-23 10:51:29.185 INFO  o.s.security.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@533e2f4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@436a563f, org.springframework.security.web.context.SecurityContextHolderFilter@6d35ff7b, org.springframework.security.web.header.HeaderWriterFilter@5604b85, org.springframework.web.filter.CorsFilter@538e74fc, org.springframework.security.web.authentication.logout.LogoutFilter@77f03916, com.leave.system.security.JwtAuthenticationFilter@77ccded4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4e9e0c6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1a819901, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7ecb9e17, org.springframework.security.web.session.SessionManagementFilter@510e4d79, org.springframework.security.web.access.ExceptionTranslationFilter@1f68e4e8, org.springframework.security.web.access.intercept.AuthorizationFilter@2a075e70]
2026-01-23 10:51:29.320 INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-0.0.0.0-7899"]
2026-01-23 10:51:29.330 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 7899 (http) with context path ''
2026-01-23 10:51:29.334 INFO  com.leave.system.LeaveSystemApplication - Started LeaveSystemApplication in 1.574 seconds (process running for 1.775)
2026-01-23 10:51:29.335 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL start create  ...  
2026-01-23 10:51:29.335 DEBUG c.b.mybatisplus.autoconfigure.DdlApplicationRunner -   ...  DDL end create  ...  
2026-01-23 10:51:38.673 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-23 10:51:38.673 INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-23 10:51:38.674 INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-23 10:51:38.678 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /job/list
2026-01-23 10:51:38.678 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /system/menu/user-menus?userId=1
2026-01-23 10:51:38.718 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:51:38.718 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:51:38.718 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:51:38.718 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:51:38.723 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:51:38.723 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:51:38.723 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:51:38.723 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:51:38.727 WARN  o.s.web.servlet.handler.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/job/list' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2026-01-23 10:51:38.731 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /system/menu/user-menus?userId=1
2026-01-23 10:51:38.731 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /job/list
2026-01-23 10:51:38.739 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/list
2026-01-23 10:51:38.740 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.listJobs
2026-01-23 10:51:38.740 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:51:38.740 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==>  Preparing: SELECT * FROM sys_job
2026-01-23 10:51:38.740 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==> Parameters: 
2026-01-23 10:51:38.741 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/system/menu/user-menus
2026-01-23 10:51:38.741 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.MenuController.getUserMenus
2026-01-23 10:51:38.741 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [1]
2026-01-23 10:51:38.741 INFO  com.leave.system.service.impl.MenuServiceImpl - getUserMenus called for userId: 1
2026-01-23 10:51:38.741 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:38.741 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 10:51:38.747 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:38.747 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 10:51:38.747 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - <==      Total: 3
2026-01-23 10:51:38.747 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectAllJobs
SQL         : SELECT * FROM sys_job

2026-01-23 10:51:38.747 DEBUG c.l.system.mapper.RoleMenuMapper.selectByRoleId - ==>  Preparing: SELECT * FROM role_menu WHERE role_id = ?
2026-01-23 10:51:38.747 DEBUG c.l.system.mapper.RoleMenuMapper.selectByRoleId - ==> Parameters: 1(Long)
2026-01-23 10:51:38.752 DEBUG c.l.system.mapper.RoleMenuMapper.selectByRoleId - <==      Total: 10
2026-01-23 10:51:38.752 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.RoleMenuMapper.selectByRoleId
SQL         : SELECT * FROM role_menu WHERE role_id = 1

2026-01-23 10:51:38.759 DEBUG c.l.system.mapper.SysMenuMapper.selectMenusByIds - ==>  Preparing: SELECT * FROM sys_menu WHERE id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY parent_id, order_num, id
2026-01-23 10:51:38.759 DEBUG c.l.system.mapper.SysMenuMapper.selectMenusByIds - ==> Parameters: 1(Long), 2(Long), 3(Long), 4(Long), 5(Long), 6(Long), 7(Long), 8(Long), 9(Long), 10(Long)
2026-01-23 10:51:38.762 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"jobName":"钉钉数据同步","jobGroup":"DEFAULT","invokeTarget":"dingTalkService.syncLeaveData()","cronExpression":"0 40 10 ? * FRI","status":0,"remark":"每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:38:20","deleted":0},{"id":2,"jobName":"年假过期清理","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.cleanupExpiredLeaveBalances(2026)","cronExpression":"0 0 1 1 1 ?","status":0,"remark":"每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:45:37","deleted":0},{"id":3,"jobName":"年假账户批量初始化","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.initAllAccounts(2027)","cronExpression":"0 0 3 1 1 ?","status":0,"remark":"每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:47:23","deleted":0}]}
2026-01-23 10:51:38.766 DEBUG c.l.system.mapper.SysMenuMapper.selectMenusByIds - <==      Total: 10
2026-01-23 10:51:38.767 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysMenuMapper.selectMenusByIds
SQL         : SELECT * FROM sys_menu WHERE id IN ( 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 ) ORDER BY parent_id, order_num, id

2026-01-23 10:51:38.768 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"parentId":0,"menuName":"首页","path":"/dashboard","component":"Dashboard","icon":"HomeFilled","orderNum":1,"deleted":0,"children":[]},{"id":2,"parentId":0,"menuName":"休假管理","path":"/leave","component":null,"icon":"Calendar","orderNum":2,"deleted":0,"children":[{"id":5,"parentId":2,"menuName":"我的休假","path":"/leave/my","component":"leave/MyLeave","icon":null,"orderNum":1,"deleted":0,"children":[]},{"id":6,"parentId":2,"menuName":"休假管理(管理员)","path":"/leave/manage","component":"leave/ManageLeave","icon":null,"orderNum":2,"deleted":0,"children":[]}]},{"id":3,"parentId":0,"menuName":"系统管理","path":"/system","component":null,"icon":"Setting","orderNum":3,"deleted":0,"children":[{"id":7,"parentId":3,"menuName":"用户管理","path":"/system/user","component":"system/User","icon":null,"orderNum":1,"deleted":0,"children":[]},{"id":8,"parentId":3,"menuName":"角色管理","path":"/system/role","component":"system/Role","icon":null,"orderNum":2,"deleted":0,"children":[]},{"id":9,"parentId":3,"menuName":"菜单管理","path":"/system/menu","component":"system/Menu","icon":null,"orderNum":3,"deleted":0,"children":[]}]},{"id":4,"parentId":0,"menuName":"系统监控","path":"/monitor","component":null,"icon":"Monitor","orderNum":4,"deleted":0,"children":[{"id":10,"parentId":4,"menuName":"定时任务","path":"/monitor/job","component":"monitor/Job","icon":null,"orderNum":1,"deleted":0,"children":[]}]}]}
2026-01-23 10:51:40.038 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /system/user/list?current=1&size=10
2026-01-23 10:51:40.040 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /system/role/list
2026-01-23 10:51:40.048 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:51:40.048 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:51:40.049 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:51:40.049 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:51:40.054 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:51:40.055 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:51:40.056 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:51:40.056 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:51:40.063 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /system/role/list
2026-01-23 10:51:40.063 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /system/user/list?current=1&size=10
2026-01-23 10:51:40.064 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/system/role/list
2026-01-23 10:51:40.064 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.RoleController.list
2026-01-23 10:51:40.064 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:51:40.065 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/system/user/list
2026-01-23 10:51:40.065 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.UserController.list
2026-01-23 10:51:40.065 DEBUG c.l.system.mapper.SysRoleMapper.selectActiveRoles - ==>  Preparing: SELECT * FROM sys_role WHERE deleted = 0
2026-01-23 10:51:40.065 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [1, 10]
2026-01-23 10:51:40.065 DEBUG c.l.system.mapper.SysRoleMapper.selectActiveRoles - ==> Parameters: 
2026-01-23 10:51:40.071 DEBUG c.l.system.mapper.SysRoleMapper.selectActiveRoles - <==      Total: 2
2026-01-23 10:51:40.071 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysRoleMapper.selectActiveRoles
SQL         : SELECT * FROM sys_role WHERE deleted = 0

2026-01-23 10:51:40.072 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"roleName":"系统管理员","roleKey":"ROLE_ADMIN","description":"拥有系统所有权限","createTime":"2026-01-07T06:53:33","updateTime":"2026-01-07T06:53:33","deleted":0,"menuIds":null},{"id":2,"roleName":"普通员工","roleKey":"ROLE_USER","description":"只能查看和管理自己的年假","createTime":"2026-01-07T06:53:33","updateTime":"2026-01-07T14:54:44","deleted":0,"menuIds":null}]}
2026-01-23 10:51:40.096 DEBUG c.l.s.m.SysUserMapper.selectAllUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE deleted = 0
2026-01-23 10:51:40.096 DEBUG c.l.s.m.SysUserMapper.selectAllUsersPage_mpCount - ==> Parameters: 
2026-01-23 10:51:40.102 DEBUG c.l.s.m.SysUserMapper.selectAllUsersPage_mpCount - <==      Total: 1
2026-01-23 10:51:40.103 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectAllUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE deleted = 0 ORDER BY id ASC

2026-01-23 10:51:40.104 DEBUG c.l.system.mapper.SysUserMapper.selectAllUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 10:51:40.105 DEBUG c.l.system.mapper.SysUserMapper.selectAllUsersPage - ==> Parameters: 10(Long)
2026-01-23 10:51:40.111 DEBUG c.l.system.mapper.SysUserMapper.selectAllUsersPage - <==      Total: 10
2026-01-23 10:51:40.112 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectAllUsersPage
SQL         : SELECT * FROM sys_user WHERE deleted = 0 ORDER BY id ASC

2026-01-23 10:51:40.115 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":1,"username":"admin","password":"$2b$12$sDUO0pQ/tZBzMgNQWqVhwujpMkIWLuV97C/Gmb2Fi7GqoWQcXqXlu","realName":"系统管理员","employeeNumber":"ADMIN001","firstWorkDate":"2020-01-01","entryDate":"2020-01-01","socialSeniority":6,"roleId":1,"dingtalkUserId":null,"status":"ACTIVE","resignationDate":null,"createTime":"2026-01-07T06:53:33","updateTime":"2026-01-07T14:54:37","deleted":0},{"id":2,"username":"wangjianping","password":"$2a$10$8lJnDX2yY5v9y5rhOrDa/u00JLZDS/MRJrNIliEagWJs2GtWrsjMy","realName":"王建平","employeeNumber":"CBJ-001","firstWorkDate":"2006-09-01","entryDate":"2020-02-10","socialSeniority":19,"roleId":2,"dingtalkUserId":null,"status":"ACTIVE","resignationDate":null,"createTime":"2026-01-08T15:20:50","updateTime":"2026-01-08T07:20:55","deleted":0},{"id":3,"username":"wenyongguo","password":"$2a$10$SraJhOePoeAkA4Ifkpk2ge7kuKJP/MC1uILZUynN09ppGBJeo4CCO","realName":"温永国","employeeNumber":"CBJ-003","firstWorkDate":"2007-11-01","entryDate":"2020-03-01","socialSeniority":18,"roleId":2,"dingtalkUserId":null,"status":"ACTIVE","resignationDate":null,"createTime":"2026-01-08T15:20:50","updateTime":"2026-01-08T07:20:56","deleted":0},{"id":4,"username":"xujunyi","password":"$2a$10$aiJUxD01.MVLRbAC3w6qRed8.wYwvXOGgVjRt62jxR4ywqd6NSm3m","realName":"徐君毅","employeeNumber":"CBJ-005","firstWorkDate":"2008-07-01","entryDate":"2020-03-16","socialSeniority":17,"roleId":2,"dingtalkUserId":null,"status":"ACTIVE","resignationDate":null,"createTime":"2026-01-08T15:20:50","updateTime":"2026-01-08T07:20:56","deleted":0},{"id":5,"username":"zhanghao","password":"$2a$10$cblvNCOyJLmAUZcpbMdjfe/t.C2ouuL7WkLUTacHg3ynKhITYJnuW","realName":"张浩","employeeNumber":"CBJ-007","firstWorkDate":"2017-08-01","entryDate":"2020-04-01","socialSeniority":8,"roleId":2,"dingtalkUserId":"2865622217540402722","status":"ACTIVE","resignationDate":null,"createTime":"2026-01-08T15:20:50","updateTime":"2026-01-08T07:20:56","deleted":0},{"id":6,"username":"zhangjianxin","password":"$2a$10$vMLPEDC9oLci6Qxb99R6XOgP2cE/u3I8EB.U5ywzNDMqwOZMTsFHi","realName":"张建新","employeeNumber":"CBJ-009","firstWorkDate":"2015-10-07","entryDate":"2020-04-13","socialSeniority":10,"roleId":2,"dingtalkUserId":null,"status":"ACTIVE","resignationDate":null,"createTime":"2026-01-08T15:20:51","updateTime":"2026-01-08T07:20:56","deleted":0},{"id":7,"username":"yuanwei","password":"$2a$10$FZnf8PpCrv6LktF/g6ZOAO0YDTyHf0C4nwk30OsSuEM15CTYgKNMu","realName":"袁伟","employeeNumber":"CBJ-010","firstWorkDate":"2016-06-01","entryDate":"2020-04-27","socialSeniority":9,"roleId":2,"dingtalkUserId":null,"status":"ACTIVE","resignationDate":null,"createTime":"2026-01-08T15:20:51","updateTime":"2026-01-08T07:20:56","deleted":0},{"id":8,"username":"yangpanqiang","password":"$2a$10$WmtdEq2DtuSt9XqczcuwluCPsX6xm/QM5PuCh44PjYosDCe7IQygm","realName":"杨盼强","employeeNumber":"CBJ-011","firstWorkDate":"2010-10-08","entryDate":"2020-04-27","socialSeniority":15,"roleId":2,"dingtalkUserId":null,"status":"ACTIVE","resignationDate":null,"createTime":"2026-01-08T15:20:51","updateTime":"2026-01-08T07:20:56","deleted":0},{"id":9,"username":"xinghaibo","password":"$2a$10$yRVjDdWD3unvuH0PFS/E2eXTF2jxYpL.5FyJD.G7BBKxbE5iJ7LDy","realName":"邢海博","employeeNumber":"CBJ-012","firstWorkDate":"2010-07-01","entryDate":"2020-06-22","socialSeniority":15,"roleId":2,"dingtalkUserId":null,"status":"ACTIVE","resignationDate":null,"createTime":"2026-01-08T15:20:51","updateTime":"2026-01-08T07:20:56","deleted":0},{"id":10,"username":"jiayulong","password":"$2a$10$alfGcoIQbRuT3brMceZQ/OXyNgIhA/fvy5TmmtjtDFNqYk.x8B0uq","realName":"贾玉龙","employeeNumber":"CBJ-014","firstWorkDate":"2010-09-01","entryDate":"2020-08-24","socialSeniority":15,"roleId":2,"dingtalkUserId":null,"status":"ACTIVE","resignationDate":null,"createTime":"2026-01-08T15:20:51","updateTime":"2026-01-08T07:20:56","deleted":0}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 10:51:41.359 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/available-years
2026-01-23 10:51:41.359 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=1&size=10
2026-01-23 10:51:41.365 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:51:41.365 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:51:41.366 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:51:41.366 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:51:41.371 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:51:41.371 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:51:41.372 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:51:41.372 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:51:41.376 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/available-years
2026-01-23 10:51:41.376 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=1&size=10
2026-01-23 10:51:41.377 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/available-years
2026-01-23 10:51:41.377 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.getAvailableYears
2026-01-23 10:51:41.377 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:51:41.378 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 10:51:41.378 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 10:51:41.378 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 1, 10]
2026-01-23 10:51:41.378 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==>  Preparing: SELECT DISTINCT year FROM leave_account ORDER BY year DESC
2026-01-23 10:51:41.379 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==> Parameters: 
2026-01-23 10:51:41.384 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 10:51:41.384 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 10:51:41.390 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 10:51:41.390 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 10:51:41.391 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 10:51:41.392 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 10:51:41.392 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - <==      Total: 3
2026-01-23 10:51:41.393 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectDistinctYears
SQL         : SELECT DISTINCT year FROM leave_account ORDER BY year DESC

2026-01-23 10:51:41.394 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[2027,2026,2025]}
2026-01-23 10:51:41.398 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 10:51:41.399 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 10:51:41.400 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:41.400 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 10:51:41.407 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:41.408 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 10:51:41.414 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:41.415 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 10:51:41.423 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:41.423 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 10:51:41.423 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 10:51:41.428 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:51:41.428 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 1(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 23(Integer), 0.0(BigDecimal), 5.0(BigDecimal), 2.5(BigDecimal), 0(Integer), 71(Long)
2026-01-23 10:51:41.440 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:41.441 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 1, year = 2026, social_seniority = 6, standard_quota = 5.0, days_employed = 23, actual_quota = 0.0, last_year_balance = 5.0, current_year_used = 2.5, deleted = 0 WHERE id = 71

2026-01-23 10:51:41.441 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 1: employed=23 days, quota=0.0
2026-01-23 10:51:41.442 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:41.442 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 10:51:41.449 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 4
2026-01-23 10:51:41.450 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:41.452 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:41.452 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 10:51:41.458 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:41.458 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 10:51:41.458 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:41.458 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 10:51:41.463 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:41.463 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2026 AND deleted = 0

2026-01-23 10:51:41.463 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 2 year 2026 based on today 2026-01-23
2026-01-23 10:51:41.464 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:51:41.464 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 2(Long), 2026(Integer), 19(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 72(Long)
2026-01-23 10:51:41.475 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:41.476 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 2, year = 2026, social_seniority = 19, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 72

2026-01-23 10:51:41.476 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 2: employed=23 days, quota=0.5
2026-01-23 10:51:41.476 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:41.476 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 10:51:41.482 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:41.482 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:41.483 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:41.484 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 10:51:41.488 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:41.488 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 10:51:41.488 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:41.488 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 10:51:41.492 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:41.493 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2026 AND deleted = 0

2026-01-23 10:51:41.493 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 3 year 2026 based on today 2026-01-23
2026-01-23 10:51:41.493 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:51:41.494 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 3(Long), 2026(Integer), 18(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 5.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 73(Long)
2026-01-23 10:51:41.511 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:41.512 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 3, year = 2026, social_seniority = 18, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 5.0, current_year_used = 0.0, deleted = 0 WHERE id = 73

2026-01-23 10:51:41.512 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 3: employed=23 days, quota=0.5
2026-01-23 10:51:41.513 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:41.513 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 10:51:41.517 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:41.518 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:41.518 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:41.518 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 10:51:41.524 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:41.524 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 10:51:41.524 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:41.525 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 10:51:41.529 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:41.529 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2026 AND deleted = 0

2026-01-23 10:51:41.529 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 4 year 2026 based on today 2026-01-23
2026-01-23 10:51:41.529 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:51:41.530 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 4(Long), 2026(Integer), 17(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 12.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 74(Long)
2026-01-23 10:51:41.538 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:41.541 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 4, year = 2026, social_seniority = 17, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 12.0, current_year_used = 0.0, deleted = 0 WHERE id = 74

2026-01-23 10:51:41.541 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 4: employed=23 days, quota=0.5
2026-01-23 10:51:41.542 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:41.543 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 10:51:41.549 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:41.549 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:41.550 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:41.550 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 10:51:41.555 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:41.555 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 10:51:41.556 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:41.556 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 10:51:41.562 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:41.563 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2026 AND deleted = 0

2026-01-23 10:51:41.563 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 5 year 2026 based on today 2026-01-23
2026-01-23 10:51:41.564 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:51:41.565 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 5(Long), 2026(Integer), 8(Integer), 5.0(BigDecimal), 23(Integer), 0.0(BigDecimal), -2.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 75(Long)
2026-01-23 10:51:41.575 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:41.576 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 5, year = 2026, social_seniority = 8, standard_quota = 5.0, days_employed = 23, actual_quota = 0.0, last_year_balance = -2.0, current_year_used = 0.0, deleted = 0 WHERE id = 75

2026-01-23 10:51:41.576 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 5: employed=23 days, quota=0.0
2026-01-23 10:51:41.577 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:41.577 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 10:51:41.585 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:41.585 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:41.586 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:41.586 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 10:51:41.593 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:41.594 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 10:51:41.594 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:41.594 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 10:51:41.599 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:41.599 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2026 AND deleted = 0

2026-01-23 10:51:41.599 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 6 year 2026 based on today 2026-01-23
2026-01-23 10:51:41.601 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:51:41.601 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 6(Long), 2026(Integer), 10(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 76(Long)
2026-01-23 10:51:41.610 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:41.610 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 6, year = 2026, social_seniority = 10, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 76

2026-01-23 10:51:41.611 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 6: employed=23 days, quota=0.5
2026-01-23 10:51:41.611 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:41.611 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 10:51:41.616 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:41.616 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:41.616 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:41.616 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 10:51:41.620 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:41.620 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 10:51:41.621 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:41.621 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 10:51:41.626 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:41.626 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2026 AND deleted = 0

2026-01-23 10:51:41.626 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 7 year 2026 based on today 2026-01-23
2026-01-23 10:51:41.627 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:51:41.627 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 7(Long), 2026(Integer), 9(Integer), 5.0(BigDecimal), 23(Integer), 0.0(BigDecimal), 5.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 77(Long)
2026-01-23 10:51:41.637 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:41.638 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 7, year = 2026, social_seniority = 9, standard_quota = 5.0, days_employed = 23, actual_quota = 0.0, last_year_balance = 5.0, current_year_used = 0.0, deleted = 0 WHERE id = 77

2026-01-23 10:51:41.639 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 7: employed=23 days, quota=0.0
2026-01-23 10:51:41.639 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:41.639 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 10:51:41.647 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:41.647 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:41.648 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:41.648 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 10:51:41.651 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:41.652 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 10:51:41.652 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:41.652 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 10:51:41.662 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:41.662 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2026 AND deleted = 0

2026-01-23 10:51:41.662 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 8 year 2026 based on today 2026-01-23
2026-01-23 10:51:41.663 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:51:41.663 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 8(Long), 2026(Integer), 15(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 78(Long)
2026-01-23 10:51:41.685 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:41.685 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 8, year = 2026, social_seniority = 15, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 78

2026-01-23 10:51:41.685 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 8: employed=23 days, quota=0.5
2026-01-23 10:51:41.686 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:41.686 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 10:51:41.690 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:41.691 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:41.691 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:41.691 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 10:51:41.694 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:41.694 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 10:51:41.694 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:41.694 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 10:51:41.698 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:41.698 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2026 AND deleted = 0

2026-01-23 10:51:41.698 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 9 year 2026 based on today 2026-01-23
2026-01-23 10:51:41.699 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:51:41.699 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 9(Long), 2026(Integer), 15(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 79(Long)
2026-01-23 10:51:41.708 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:41.708 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 9, year = 2026, social_seniority = 15, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 79

2026-01-23 10:51:41.708 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 9: employed=23 days, quota=0.5
2026-01-23 10:51:41.709 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:41.709 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 10:51:41.713 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:41.713 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:41.713 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:41.713 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 10:51:41.717 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:41.717 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 10:51:41.717 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:41.718 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 10:51:41.721 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:41.722 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2026 AND deleted = 0

2026-01-23 10:51:41.722 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 10 year 2026 based on today 2026-01-23
2026-01-23 10:51:41.722 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:51:41.722 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 10(Long), 2026(Integer), 15(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 80(Long)
2026-01-23 10:51:41.731 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:41.731 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 10, year = 2026, social_seniority = 15, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 80

2026-01-23 10:51:41.731 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 10: employed=23 days, quota=0.5
2026-01-23 10:51:41.731 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:41.731 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 10:51:41.735 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:41.736 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:41.741 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":2.5,"deleted":null,"totalBalance":0.0,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":72,"userId":2,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":57,"userId":2,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":18,"userId":2,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":73,"userId":3,"year":2026,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":58,"userId":3,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":19,"userId":3,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":74,"userId":4,"year":2026,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":12.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":59,"userId":4,"startDate":"2026-12-31","endDate":"2026-12-31","days":-12.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":20,"userId":4,"startDate":"2026-01-01","endDate":"2026-01-01","days":12.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":75,"userId":5,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":-2.0,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":55,"userId":5,"startDate":"2026-01-08","endDate":"2026-01-08","days":3.5,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2027-12-31","createTime":"2026-01-08T08:42:17","deleted":0},{"id":21,"userId":5,"startDate":"2026-01-01","endDate":"2026-01-01","days":-2.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":76,"userId":6,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":60,"userId":6,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":22,"userId":6,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":77,"userId":7,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":61,"userId":7,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":23,"userId":7,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":78,"userId":8,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":62,"userId":8,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":24,"userId":8,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":79,"userId":9,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":63,"userId":9,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":25,"userId":9,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":80,"userId":10,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":64,"userId":10,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":26,"userId":10,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 10:51:56.381 DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /leave/updateAccount
2026-01-23 10:51:56.407 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:51:56.411 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:51:56.423 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:51:56.423 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:51:56.427 DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /leave/updateAccount
2026-01-23 10:51:56.446 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/updateAccount
2026-01-23 10:51:56.446 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.updateAccount
2026-01-23 10:51:56.450 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [LeaveAccount(id=71, userId=1, year=2026, socialSeniority=6, standardQuota=5, daysEmployed=23, actualQuota=0, lastYearBalance=5, currentYearUsed=2.5, deleted=null, totalBalance=0)]
2026-01-23 10:51:56.459 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ? WHERE id = ?
2026-01-23 10:51:56.460 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 1(Long), 2026(Integer), 6(Integer), 5(BigDecimal), 23(Integer), 0(BigDecimal), 5(BigDecimal), 2.5(BigDecimal), 71(Long)
2026-01-23 10:51:56.475 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:51:56.475 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 1, year = 2026, social_seniority = 6, standard_quota = 5, days_employed = 23, actual_quota = 0, last_year_balance = 5, current_year_used = 2.5 WHERE id = 71

2026-01-23 10:51:56.485 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"账户更新成功","data":null}
2026-01-23 10:51:56.535 DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /leave/add-record
2026-01-23 10:51:56.539 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:51:56.539 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:51:56.549 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:51:56.549 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:51:56.554 DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /leave/add-record
2026-01-23 10:51:56.560 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/add-record
2026-01-23 10:51:56.560 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.addRecord
2026-01-23 10:51:56.565 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [LeaveRecord(id=null, userId=1, startDate=2026-01-23, endDate=2026-01-23, days=0.5, type=ANNUAL, remarks=, expiryDate=null, createTime=null, deleted=0)]
2026-01-23 10:51:56.579 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔄 Routing manual ANNUAL record to priority deduction logic. Days: 0.5
2026-01-23 10:51:56.579 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.580 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 10:51:56.590 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.591 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.593 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.594 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 10:51:56.602 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.602 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 10:51:56.602 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.602 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC
2026-01-23 10:51:56.603 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==> Parameters: 1(Long)
2026-01-23 10:51:56.612 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - <==      Total: 2
2026-01-23 10:51:56.612 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectAvailableBalances
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC

2026-01-23 10:51:56.613 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL
2026-01-23 10:51:56.613 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==> Parameters: 1(Long)
2026-01-23 10:51:56.625 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - <==      Total: 5
2026-01-23 10:51:56.625 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL

2026-01-23 10:51:56.626 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 10:51:56.626 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 1(Long)
2026-01-23 10:51:56.631 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-23 10:51:56.631 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 10:51:56.632 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Available balances by expiry: {2027-12-31=0.0, 2026-12-31=0.0}
2026-01-23 10:51:56.632 WARN  com.leave.system.service.impl.LeaveServiceImpl - ⚠️  Insufficient balance: 0.5 days needed. Creating OVERDRAFT record.
2026-01-23 10:51:56.633 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, COALESCE(?, 0))
2026-01-23 10:51:56.634 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 1(Long), 2026-01-23(LocalDate), 2026-01-23(LocalDate), -0.5(BigDecimal), ANNUAL(String),  (额度透支)(String), 2026-01-23T10:51:56.632814(LocalDateTime), null, 0(Integer)
2026-01-23 10:51:56.648 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-23 10:51:56.650 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (1, 2026-01-23, 2026-01-23, -0.5, 'ANNUAL', ' (额度透支)', 2026-01-23T10:51:56.632814, , COALESCE(0, 0))

2026-01-23 10:51:56.650 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ✅ Created OVERDRAFT record for 0.5 days (no expiry)
2026-01-23 10:51:56.665 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"记录添加成功","data":null}
2026-01-23 10:51:56.680 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=1&size=10
2026-01-23 10:51:56.682 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:51:56.682 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:51:56.686 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:51:56.686 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:51:56.689 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=1&size=10
2026-01-23 10:51:56.689 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 10:51:56.689 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 10:51:56.689 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 1, 10]
2026-01-23 10:51:56.691 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 10:51:56.691 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 10:51:56.696 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 10:51:56.696 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 10:51:56.697 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 10:51:56.697 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 10:51:56.707 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 10:51:56.707 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 10:51:56.707 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.707 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 10:51:56.715 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.715 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 10:51:56.716 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.716 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 10:51:56.720 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.720 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.720 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.720 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:56.721 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 10:51:56.724 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 5
2026-01-23 10:51:56.724 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:56.724 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.724 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 10:51:56.729 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.729 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 10:51:56.729 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.729 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 10:51:56.744 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.744 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.744 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 2 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.745 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:56.745 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 10:51:56.752 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:56.752 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:56.752 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.752 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 10:51:56.756 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.756 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 10:51:56.757 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.757 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 10:51:56.763 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.763 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.763 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 3 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.763 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:56.763 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 10:51:56.768 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:56.768 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:56.768 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.768 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 10:51:56.772 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.772 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 10:51:56.772 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.772 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 10:51:56.779 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.779 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.779 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 4 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.779 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:56.780 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 10:51:56.784 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:56.784 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:56.785 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.785 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 10:51:56.792 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.792 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 10:51:56.792 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.793 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 10:51:56.798 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.798 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.798 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 5 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.798 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:56.799 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 10:51:56.802 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:56.802 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:56.803 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.803 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 10:51:56.810 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.810 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 10:51:56.810 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.810 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 10:51:56.815 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.815 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.815 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 6 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.815 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:56.815 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 10:51:56.819 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:56.820 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:56.820 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.820 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 10:51:56.827 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.827 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 10:51:56.827 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.827 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 10:51:56.834 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.834 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.834 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 7 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.834 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:56.834 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 10:51:56.840 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:56.840 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:56.840 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.840 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 10:51:56.845 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.845 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 10:51:56.845 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.845 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 10:51:56.849 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.849 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.849 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 8 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.849 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:56.849 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 10:51:56.854 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:56.854 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:56.854 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.854 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 10:51:56.862 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.862 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 10:51:56.862 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.862 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 10:51:56.870 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.870 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.870 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 9 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.870 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:56.870 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 10:51:56.886 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:56.886 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:56.886 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:51:56.886 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 10:51:56.890 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:51:56.890 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 10:51:56.890 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:51:56.890 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 10:51:56.897 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:51:56.897 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2026 AND deleted = 0

2026-01-23 10:51:56.897 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 10 year 2026 based on today 2026-01-23
2026-01-23 10:51:56.897 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:51:56.897 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 10:51:56.902 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:51:56.902 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:51:56.903 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":3.0,"deleted":null,"totalBalance":-0.5,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":72,"userId":2,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":57,"userId":2,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":18,"userId":2,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":73,"userId":3,"year":2026,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":58,"userId":3,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":19,"userId":3,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":74,"userId":4,"year":2026,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":12.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":59,"userId":4,"startDate":"2026-12-31","endDate":"2026-12-31","days":-12.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":20,"userId":4,"startDate":"2026-01-01","endDate":"2026-01-01","days":12.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":75,"userId":5,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":-2.0,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":55,"userId":5,"startDate":"2026-01-08","endDate":"2026-01-08","days":3.5,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2027-12-31","createTime":"2026-01-08T08:42:17","deleted":0},{"id":21,"userId":5,"startDate":"2026-01-01","endDate":"2026-01-01","days":-2.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":76,"userId":6,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":60,"userId":6,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":22,"userId":6,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":77,"userId":7,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":61,"userId":7,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":23,"userId":7,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":78,"userId":8,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":62,"userId":8,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":24,"userId":8,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":79,"userId":9,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":63,"userId":9,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":25,"userId":9,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":80,"userId":10,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":64,"userId":10,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":26,"userId":10,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 10:52:09.009 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /job/list
2026-01-23 10:52:09.016 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:52:09.016 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:52:09.024 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:52:09.025 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:52:09.028 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /job/list
2026-01-23 10:52:09.028 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/list
2026-01-23 10:52:09.028 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.listJobs
2026-01-23 10:52:09.028 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:52:09.029 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==>  Preparing: SELECT * FROM sys_job
2026-01-23 10:52:09.029 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==> Parameters: 
2026-01-23 10:52:09.034 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - <==      Total: 3
2026-01-23 10:52:09.034 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectAllJobs
SQL         : SELECT * FROM sys_job

2026-01-23 10:52:09.035 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"jobName":"钉钉数据同步","jobGroup":"DEFAULT","invokeTarget":"dingTalkService.syncLeaveData()","cronExpression":"0 40 10 ? * FRI","status":0,"remark":"每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:38:20","deleted":0},{"id":2,"jobName":"年假过期清理","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.cleanupExpiredLeaveBalances(2026)","cronExpression":"0 0 1 1 1 ?","status":0,"remark":"每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:45:37","deleted":0},{"id":3,"jobName":"年假账户批量初始化","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.initAllAccounts(2027)","cronExpression":"0 0 3 1 1 ?","status":0,"remark":"每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:47:23","deleted":0}]}
2026-01-23 10:54:21.483 DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /job/update
2026-01-23 10:54:21.493 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:54:21.494 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:54:21.507 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:54:21.507 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:54:21.510 DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /job/update
2026-01-23 10:54:21.514 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/update
2026-01-23 10:54:21.515 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.updateJob
2026-01-23 10:54:21.515 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [SysJob(id=1, jobName=钉钉数据同步, jobGroup=DEFAULT, invokeTarget=dingTalkService.syncLeaveData(), cronExpression=0 55 10 ? * FRI, status=0, remark=每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。, createTime=2026-01-07T06:54:03, updateTime=2026-01-23T10:38:20, deleted=0)]
2026-01-23 10:54:21.521 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - ==>  Preparing: UPDATE sys_job SET job_name = ?, job_group = ?, invoke_target = ?, cron_expression = ?, status = ?, remark = ?, update_time = ? WHERE id = ?
2026-01-23 10:54:21.522 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - ==> Parameters: 钉钉数据同步(String), DEFAULT(String), dingTalkService.syncLeaveData()(String), 0 55 10 ? * FRI(String), 0(Integer), 每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。(String), 2026-01-23T10:54:21.515805(LocalDateTime), 1(Long)
2026-01-23 10:54:21.579 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - <==    Updates: 1
2026-01-23 10:54:21.583 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.updateJob
SQL         : UPDATE sys_job SET job_name = '钉钉数据同步', job_group = 'DEFAULT', invoke_target = 'dingTalkService.syncLeaveData()', cron_expression = '0 55 10 0 * FRI', status = '每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。', remark = 2026-01-23T10:54:21.515805, update_time = 1 WHERE id = ?

2026-01-23 10:54:21.584 INFO  com.leave.system.service.impl.SysJobServiceImpl - Cancelled scheduled task for job ID: 1
2026-01-23 10:54:21.585 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - ==>  Preparing: SELECT * FROM sys_job WHERE id = ?
2026-01-23 10:54:21.585 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - ==> Parameters: 1(Long)
2026-01-23 10:54:21.592 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - <==      Total: 1
2026-01-23 10:54:21.592 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectJobById
SQL         : SELECT * FROM sys_job WHERE id = 1

2026-01-23 10:54:21.595 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: 钉钉数据同步 with cron: 0 55 10 ? * FRI
2026-01-23 10:54:21.596 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"任务更新成功","data":null}
2026-01-23 10:54:21.613 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /job/list
2026-01-23 10:54:21.626 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:54:21.626 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:54:21.644 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:54:21.644 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:54:21.647 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /job/list
2026-01-23 10:54:21.648 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/list
2026-01-23 10:54:21.648 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.listJobs
2026-01-23 10:54:21.648 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:54:21.648 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==>  Preparing: SELECT * FROM sys_job
2026-01-23 10:54:21.649 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==> Parameters: 
2026-01-23 10:54:21.662 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - <==      Total: 3
2026-01-23 10:54:21.663 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectAllJobs
SQL         : SELECT * FROM sys_job

2026-01-23 10:54:21.663 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"jobName":"钉钉数据同步","jobGroup":"DEFAULT","invokeTarget":"dingTalkService.syncLeaveData()","cronExpression":"0 55 10 ? * FRI","status":0,"remark":"每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:54:22","deleted":0},{"id":2,"jobName":"年假过期清理","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.cleanupExpiredLeaveBalances(2026)","cronExpression":"0 0 1 1 1 ?","status":0,"remark":"每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:45:37","deleted":0},{"id":3,"jobName":"年假账户批量初始化","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.initAllAccounts(2027)","cronExpression":"0 0 3 1 1 ?","status":0,"remark":"每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:47:23","deleted":0}]}
2026-01-23 10:55:00.003 INFO  com.leave.system.service.impl.SysJobServiceImpl - Executing job: 钉钉数据同步 - dingTalkService.syncLeaveData()
2026-01-23 10:55:00.019 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Starting DingTalk leave data sync...
2026-01-23 10:55:00.187 INFO  com.leave.system.service.impl.DingTalkServiceImpl - AccessToken fetched successfully.
2026-01-23 10:55:00.187 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Sync lookback period: 7 days
2026-01-23 10:55:00.187 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Syncing data from 2026-01-16 00:00:00 to 2026-01-23 23:59:59
2026-01-23 10:55:00.188 DEBUG c.l.s.m.SysUserMapper.selectUsersWithDingtalkId - ==>  Preparing: SELECT * FROM sys_user WHERE dingtalk_userid IS NOT NULL AND dingtalk_userid != '' AND deleted = 0
2026-01-23 10:55:00.188 DEBUG c.l.s.m.SysUserMapper.selectUsersWithDingtalkId - ==> Parameters: 
2026-01-23 10:55:00.193 DEBUG c.l.s.m.SysUserMapper.selectUsersWithDingtalkId - <==      Total: 7
2026-01-23 10:55:00.193 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUsersWithDingtalkId
SQL         : SELECT * FROM sys_user WHERE dingtalk_userid IS NOT NULL AND dingtalk_userid != '' AND deleted = 0

2026-01-23 10:55:00.193 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 7 users to sync.
2026-01-23 10:55:00.193 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: zhanghao (DingTalk ID: 2865622217540402722)
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user zhanghao
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.518 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:55:00.519 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.519 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:55:00.519 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.519 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:55:00.519 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.519 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:55:00.519 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.519 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: yanglinlin (DingTalk ID: 01375608291585141889)
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user yanglinlin
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.720 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: caoliping (DingTalk ID: 152349662726400963)
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user caoliping
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:00.934 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: yangjimei (DingTalk ID: 044350215026473446)
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user yangjimei
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.217 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: siguorui (DingTalk ID: 100106692021377785)
2026-01-23 10:55:01.434 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user siguorui
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.435 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: yaoyan (DingTalk ID: 36316808521114156)
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user yaoyan
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.0
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.647 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Fetching data for user: zhangningbo (DingTalk ID: 01525237116824149785)
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing 1 columns for user zhangningbo
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Found 8 daily entries for Annual Leave
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-16 00:00:00, value=0.0
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-17 00:00:00, value=0.0
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-18 00:00:00, value=0.0
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-19 00:00:00, value=0.0
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-20 00:00:00, value=0.0
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.862 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-21 00:00:00, value=0.5
2026-01-23 10:55:01.863 DEBUG c.l.s.m.LeaveRecordMapper.countAnnualLeaveUsage - ==>  Preparing: SELECT COUNT(*) FROM leave_record WHERE user_id = ? AND start_date = ? AND type = 'ANNUAL' AND days = ?
2026-01-23 10:55:01.863 DEBUG c.l.s.m.LeaveRecordMapper.countAnnualLeaveUsage - ==> Parameters: 33(Long), 2026-01-21(LocalDate), -0.5(BigDecimal)
2026-01-23 10:55:01.868 DEBUG c.l.s.m.LeaveRecordMapper.countAnnualLeaveUsage - <==      Total: 1
2026-01-23 10:55:01.868 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.countAnnualLeaveUsage
SQL         : SELECT COUNT(*) FROM leave_record WHERE user_id = 33 AND start_date = 2026-01-21 AND type = 'ANNUAL' AND days = -0.5

2026-01-23 10:55:01.868 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:01.868 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 33(Long), 2026(Integer)
2026-01-23 10:55:01.884 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:01.885 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 33 AND year = 2026 AND deleted = 0

2026-01-23 10:55:01.885 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📝 Processing leave application: user=33, dates=2026-01-21 to 2026-01-21, days=0.5
2026-01-23 10:55:01.885 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 33 AND year = 2026 AND deleted = 0

2026-01-23 10:55:01.885 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:01.885 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 33(Long)
2026-01-23 10:55:01.891 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:01.891 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 33 AND deleted = 0

2026-01-23 10:55:01.891 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 33 year 2026 based on today 2026-01-23
2026-01-23 10:55:01.891 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:55:01.891 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 33(Long), 2026(Integer), 7(Integer), 5.0(BigDecimal), 23(Integer), 0.0(BigDecimal), 5.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 103(Long)
2026-01-23 10:55:01.903 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:55:01.903 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 33, year = 2026, social_seniority = 7, standard_quota = 5.0, days_employed = 23, actual_quota = 0.0, last_year_balance = 5.0, current_year_used = 0.0, deleted = 0 WHERE id = 103

2026-01-23 10:55:01.903 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 33: employed=23 days, quota=0.0
2026-01-23 10:55:01.903 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC
2026-01-23 10:55:01.903 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - ==> Parameters: 33(Long)
2026-01-23 10:55:01.907 DEBUG c.l.s.m.LeaveRecordMapper.selectAvailableBalances - <==      Total: 1
2026-01-23 10:55:01.907 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectAvailableBalances
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date >= DATE(NOW()) AND type IN ('CARRY_OVER', 'ADJUSTMENT_ADD') ORDER BY expiry_date ASC

2026-01-23 10:55:01.907 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL
2026-01-23 10:55:01.907 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - ==> Parameters: 33(Long)
2026-01-23 10:55:01.912 DEBUG c.l.s.mapper.LeaveRecordMapper.selectUsageRecords - <==      Total: 5
2026-01-23 10:55:01.912 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT', 'EXPIRED') AND expiry_date IS NOT NULL

2026-01-23 10:55:01.912 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 10:55:01.913 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - ==> Parameters: 33(Long)
2026-01-23 10:55:01.918 DEBUG c.l.s.m.LeaveRecordMapper.selectFloatingRecords - <==      Total: 0
2026-01-23 10:55:01.918 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 10:55:01.918 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Available balances by expiry: {2026-12-31=1.0, 2027-12-31=0.0}
2026-01-23 10:55:01.919 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, COALESCE(?, 0))
2026-01-23 10:55:01.919 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 33(Long), 2026-01-21(LocalDate), 2026-01-21(LocalDate), -0.5(BigDecimal), ANNUAL(String), 员工请假 (来自结转额度, 过期: 2026-12-31)(String), 2026-01-23T10:55:01.918918(LocalDateTime), 2026-12-31(LocalDate), 0(Integer)
2026-01-23 10:55:01.928 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-23 10:55:01.928 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (33, 2026-01-21, 2026-01-21, -0.5, 'ANNUAL', '员工请假 (来自结转额度, 过期: 2026-12-31)', 2026-01-23T10:55:01.918918, 2026-12-31, COALESCE(0, 0))

2026-01-23 10:55:01.928 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ✅ Allocated 0.5 days from balance expiring on 2026-12-31
2026-01-23 10:55:01.928 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Leave application processed successfully
2026-01-23 10:55:01.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - ✅ Applied leave via applyLeave for user zhangningbo: 2026-01-21 - 0.5 days
2026-01-23 10:55:01.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-22 00:00:00, value=0.0
2026-01-23 10:55:01.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Processing entry: date=2026-01-23 00:00:00, value=0.0
2026-01-23 10:55:01.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - Skipping zero value entry
2026-01-23 10:55:01.928 INFO  com.leave.system.service.impl.DingTalkServiceImpl - DingTalk leave data sync completed.
2026-01-23 10:55:01.941 INFO  com.leave.system.service.impl.SysJobServiceImpl - Job executed successfully: 钉钉数据同步
2026-01-23 10:55:34.219 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=1&size=10
2026-01-23 10:55:34.219 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/available-years
2026-01-23 10:55:34.239 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:55:34.239 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:55:34.239 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:55:34.239 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:55:34.244 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:55:34.244 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:55:34.245 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:55:34.245 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:55:34.248 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/available-years
2026-01-23 10:55:34.248 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=1&size=10
2026-01-23 10:55:34.249 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/available-years
2026-01-23 10:55:34.249 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.getAvailableYears
2026-01-23 10:55:34.249 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:55:34.249 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 10:55:34.249 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 10:55:34.249 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==>  Preparing: SELECT DISTINCT year FROM leave_account ORDER BY year DESC
2026-01-23 10:55:34.249 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 1, 10]
2026-01-23 10:55:34.249 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==> Parameters: 
2026-01-23 10:55:34.252 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 10:55:34.252 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 10:55:34.254 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - <==      Total: 3
2026-01-23 10:55:34.254 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectDistinctYears
SQL         : SELECT DISTINCT year FROM leave_account ORDER BY year DESC

2026-01-23 10:55:34.255 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[2027,2026,2025]}
2026-01-23 10:55:34.259 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 10:55:34.259 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 10:55:34.260 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 10:55:34.260 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 10:55:34.266 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 10:55:34.266 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 10:55:34.266 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:34.266 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 10:55:34.270 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:34.270 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 10:55:34.270 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:34.270 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 10:55:34.277 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:34.277 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 10:55:34.277 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 10:55:34.277 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:34.277 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 10:55:34.284 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 5
2026-01-23 10:55:34.284 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:34.284 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:34.284 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 10:55:34.290 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:34.291 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 10:55:34.291 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:34.291 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 10:55:34.299 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:34.299 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2026 AND deleted = 0

2026-01-23 10:55:34.299 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 2 year 2026 based on today 2026-01-23
2026-01-23 10:55:34.300 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:34.300 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 10:55:34.304 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:34.304 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:34.305 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:34.305 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 10:55:34.310 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:34.310 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 10:55:34.311 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:34.311 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 10:55:34.318 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:34.318 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2026 AND deleted = 0

2026-01-23 10:55:34.318 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 3 year 2026 based on today 2026-01-23
2026-01-23 10:55:34.319 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:34.319 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 10:55:34.324 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:34.325 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:34.325 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:34.325 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 10:55:34.331 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:34.331 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 10:55:34.331 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:34.331 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 10:55:34.341 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:34.342 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2026 AND deleted = 0

2026-01-23 10:55:34.342 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 4 year 2026 based on today 2026-01-23
2026-01-23 10:55:34.342 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:34.343 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 10:55:34.349 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:34.350 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:34.350 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:34.350 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 10:55:34.359 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:34.359 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 10:55:34.359 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:34.359 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 10:55:34.366 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:34.366 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2026 AND deleted = 0

2026-01-23 10:55:34.366 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 5 year 2026 based on today 2026-01-23
2026-01-23 10:55:34.367 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:34.367 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 10:55:34.381 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:34.382 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:34.383 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:34.383 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 10:55:34.393 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:34.394 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 10:55:34.395 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:34.395 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 10:55:34.411 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:34.411 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2026 AND deleted = 0

2026-01-23 10:55:34.411 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 6 year 2026 based on today 2026-01-23
2026-01-23 10:55:34.413 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:34.414 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 10:55:34.433 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:34.437 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:34.438 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:34.438 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 10:55:34.445 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:34.445 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 10:55:34.446 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:34.446 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 10:55:34.452 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:34.452 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2026 AND deleted = 0

2026-01-23 10:55:34.453 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 7 year 2026 based on today 2026-01-23
2026-01-23 10:55:34.453 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:34.453 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 10:55:34.459 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:34.459 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:34.459 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:34.459 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 10:55:34.466 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:34.466 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 10:55:34.466 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:34.466 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 10:55:34.470 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:34.470 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2026 AND deleted = 0

2026-01-23 10:55:34.470 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 8 year 2026 based on today 2026-01-23
2026-01-23 10:55:34.471 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:34.471 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 10:55:34.477 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:34.477 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:34.477 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:34.477 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 10:55:34.483 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:34.484 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 10:55:34.484 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:34.484 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 10:55:34.489 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:34.489 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2026 AND deleted = 0

2026-01-23 10:55:34.490 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 9 year 2026 based on today 2026-01-23
2026-01-23 10:55:34.490 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:34.490 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 10:55:34.495 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:34.495 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:34.495 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:34.495 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 10:55:34.499 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:34.499 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 10:55:34.499 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:34.500 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 10:55:34.504 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:34.504 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2026 AND deleted = 0

2026-01-23 10:55:34.504 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 10 year 2026 based on today 2026-01-23
2026-01-23 10:55:34.504 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:34.504 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 10:55:34.510 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:34.510 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:34.511 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":3.0,"deleted":null,"totalBalance":-0.5,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":72,"userId":2,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":57,"userId":2,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":18,"userId":2,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":73,"userId":3,"year":2026,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":58,"userId":3,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":19,"userId":3,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":74,"userId":4,"year":2026,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":12.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":59,"userId":4,"startDate":"2026-12-31","endDate":"2026-12-31","days":-12.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":20,"userId":4,"startDate":"2026-01-01","endDate":"2026-01-01","days":12.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":75,"userId":5,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":-2.0,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":55,"userId":5,"startDate":"2026-01-08","endDate":"2026-01-08","days":3.5,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2027-12-31","createTime":"2026-01-08T08:42:17","deleted":0},{"id":21,"userId":5,"startDate":"2026-01-01","endDate":"2026-01-01","days":-2.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":76,"userId":6,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":60,"userId":6,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":22,"userId":6,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":77,"userId":7,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":61,"userId":7,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":23,"userId":7,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":78,"userId":8,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":62,"userId":8,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":24,"userId":8,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":79,"userId":9,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":63,"userId":9,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":25,"userId":9,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":80,"userId":10,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":64,"userId":10,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":26,"userId":10,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 10:55:35.420 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=4&size=10
2026-01-23 10:55:35.432 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:55:35.432 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:55:35.437 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:55:35.438 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:55:35.442 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=4&size=10
2026-01-23 10:55:35.443 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 10:55:35.443 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 10:55:35.443 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 4, 10]
2026-01-23 10:55:35.448 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 10:55:35.448 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 10:55:35.452 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 10:55:35.453 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 10:55:35.454 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?,?
2026-01-23 10:55:35.454 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 30(Long), 10(Long)
2026-01-23 10:55:35.462 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 5
2026-01-23 10:55:35.462 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 10:55:35.463 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:35.463 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 31(Long)
2026-01-23 10:55:35.468 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:35.468 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 31 AND deleted = 0

2026-01-23 10:55:35.468 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:35.468 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 31(Long), 2026(Integer)
2026-01-23 10:55:35.472 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:35.473 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 31 AND year = 2026 AND deleted = 0

2026-01-23 10:55:35.473 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 31 year 2026 based on today 2026-01-23
2026-01-23 10:55:35.474 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:55:35.474 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 31(Long), 2026(Integer), 15(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 101(Long)
2026-01-23 10:55:35.510 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:55:35.511 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 31, year = 2026, social_seniority = 15, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 101

2026-01-23 10:55:35.512 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 31: employed=23 days, quota=0.5
2026-01-23 10:55:35.512 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:35.513 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 31(Long), 2026(Integer)
2026-01-23 10:55:35.524 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:35.524 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:35.525 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:35.525 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 32(Long)
2026-01-23 10:55:35.531 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:35.532 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 32 AND deleted = 0

2026-01-23 10:55:35.532 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:35.532 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 32(Long), 2026(Integer)
2026-01-23 10:55:35.540 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:35.540 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 32 AND year = 2026 AND deleted = 0

2026-01-23 10:55:35.540 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 32 year 2026 based on today 2026-01-23
2026-01-23 10:55:35.541 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:55:35.542 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 32(Long), 2026(Integer), 8(Integer), 5.0(BigDecimal), 23(Integer), 0.0(BigDecimal), 5.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 102(Long)
2026-01-23 10:55:35.560 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:55:35.561 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 32, year = 2026, social_seniority = 8, standard_quota = 5.0, days_employed = 23, actual_quota = 0.0, last_year_balance = 5.0, current_year_used = 0.0, deleted = 0 WHERE id = 102

2026-01-23 10:55:35.562 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 32: employed=23 days, quota=0.0
2026-01-23 10:55:35.562 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:35.563 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 32(Long), 2026(Integer)
2026-01-23 10:55:35.570 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:35.570 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:35.571 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:35.571 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 33(Long)
2026-01-23 10:55:35.577 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:35.577 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 33 AND deleted = 0

2026-01-23 10:55:35.577 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:35.578 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 33(Long), 2026(Integer)
2026-01-23 10:55:35.582 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:35.583 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 33 AND year = 2026 AND deleted = 0

2026-01-23 10:55:35.583 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 33 year 2026 based on today 2026-01-23
2026-01-23 10:55:35.583 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:35.583 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 33(Long), 2026(Integer)
2026-01-23 10:55:35.592 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 6
2026-01-23 10:55:35.592 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:35.593 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:35.594 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 34(Long)
2026-01-23 10:55:35.599 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:35.600 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 34 AND deleted = 0

2026-01-23 10:55:35.600 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:35.600 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 34(Long), 2026(Integer)
2026-01-23 10:55:35.609 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:35.609 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 34 AND year = 2026 AND deleted = 0

2026-01-23 10:55:35.609 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 34 year 2026 based on today 2026-01-23
2026-01-23 10:55:35.610 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:55:35.611 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 34(Long), 2026(Integer), 6(Integer), 5.0(BigDecimal), 23(Integer), 0.0(BigDecimal), 5.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 104(Long)
2026-01-23 10:55:35.623 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:55:35.624 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 34, year = 2026, social_seniority = 6, standard_quota = 5.0, days_employed = 23, actual_quota = 0.0, last_year_balance = 5.0, current_year_used = 0.0, deleted = 0 WHERE id = 104

2026-01-23 10:55:35.625 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 34: employed=23 days, quota=0.0
2026-01-23 10:55:35.626 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:35.628 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 34(Long), 2026(Integer)
2026-01-23 10:55:35.636 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:35.637 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:35.638 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 10:55:35.640 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 35(Long)
2026-01-23 10:55:35.646 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 10:55:35.647 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 35 AND deleted = 0

2026-01-23 10:55:35.647 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 10:55:35.648 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 35(Long), 2026(Integer)
2026-01-23 10:55:35.652 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 10:55:35.653 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 35 AND year = 2026 AND deleted = 0

2026-01-23 10:55:35.653 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 35 year 2026 based on today 2026-01-23
2026-01-23 10:55:35.653 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 10:55:35.654 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 35(Long), 2026(Integer), 9(Integer), 5.0(BigDecimal), 23(Integer), 0.0(BigDecimal), 5.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 105(Long)
2026-01-23 10:55:35.665 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 10:55:35.665 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 35, year = 2026, social_seniority = 9, standard_quota = 5.0, days_employed = 23, actual_quota = 0.0, last_year_balance = 5.0, current_year_used = 0.0, deleted = 0 WHERE id = 105

2026-01-23 10:55:35.665 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 35: employed=23 days, quota=0.0
2026-01-23 10:55:35.666 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 10:55:35.666 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 35(Long), 2026(Integer)
2026-01-23 10:55:35.670 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 10:55:35.671 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 10:55:35.671 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":101,"userId":31,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yaoyan","realName":"要妍","employeeNumber":"CBJ-082","entryDate":"2022-03-07","records":[{"id":85,"userId":31,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:43","deleted":0},{"id":47,"userId":31,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":102,"userId":32,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"renzhipeng","realName":"任志鹏","employeeNumber":"CBJ-092","entryDate":"2022-03-30","records":[{"id":86,"userId":32,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:43","deleted":0},{"id":48,"userId":32,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":103,"userId":33,"year":2026,"socialSeniority":7,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":4.5,"deleted":null,"totalBalance":0.5,"username":"zhangningbo","realName":"张宁博","employeeNumber":"CBJ-104","entryDate":"2022-06-21","records":[{"id":131,"userId":33,"startDate":"2026-01-21","endDate":"2026-01-21","days":-0.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-23T10:55:02","deleted":0},{"id":129,"userId":33,"startDate":"2026-01-14","endDate":"2026-01-14","days":-1.0,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-19T14:03:02","deleted":0},{"id":128,"userId":33,"startDate":"2026-01-14","endDate":"2026-01-14","days":-1.0,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-19T06:09:52","deleted":0},{"id":127,"userId":33,"startDate":"2026-01-13","endDate":"2026-01-13","days":-1.0,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-19T06:09:52","deleted":0},{"id":52,"userId":33,"startDate":"2026-01-04","endDate":"2026-01-04","days":-1.0,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:40:25","deleted":0},{"id":49,"userId":33,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":104,"userId":34,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"xubin","realName":"许滨","employeeNumber":"CBJ-106","entryDate":"2023-02-13","records":[{"id":88,"userId":34,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:43","deleted":0},{"id":50,"userId":34,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":105,"userId":35,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"xiaonan","realName":"肖南","employeeNumber":"CBJ-108","entryDate":"2023-02-22","records":[{"id":89,"userId":35,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:43","deleted":0},{"id":51,"userId":35,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":4,"pages":4}}
2026-01-23 10:55:53.084 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /job/list
2026-01-23 10:55:53.096 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:55:53.096 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:55:53.102 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:55:53.102 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:55:53.107 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /job/list
2026-01-23 10:55:53.108 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/list
2026-01-23 10:55:53.108 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.listJobs
2026-01-23 10:55:53.108 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:55:53.111 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==>  Preparing: SELECT * FROM sys_job
2026-01-23 10:55:53.111 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==> Parameters: 
2026-01-23 10:55:53.116 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - <==      Total: 3
2026-01-23 10:55:53.116 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectAllJobs
SQL         : SELECT * FROM sys_job

2026-01-23 10:55:53.117 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"jobName":"钉钉数据同步","jobGroup":"DEFAULT","invokeTarget":"dingTalkService.syncLeaveData()","cronExpression":"0 55 10 ? * FRI","status":0,"remark":"每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:54:22","deleted":0},{"id":2,"jobName":"年假过期清理","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.cleanupExpiredLeaveBalances(2026)","cronExpression":"0 0 1 1 1 ?","status":0,"remark":"每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:45:37","deleted":0},{"id":3,"jobName":"年假账户批量初始化","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.initAllAccounts(2027)","cronExpression":"0 0 3 1 1 ?","status":0,"remark":"每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:47:23","deleted":0}]}
2026-01-23 10:56:06.248 DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /job/update
2026-01-23 10:56:06.258 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:56:06.258 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:56:06.264 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:56:06.265 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:56:06.269 DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /job/update
2026-01-23 10:56:06.272 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/update
2026-01-23 10:56:06.272 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.updateJob
2026-01-23 10:56:06.272 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [SysJob(id=2, jobName=年假过期清理, jobGroup=DEFAULT, invokeTarget=scheduledTasks.cleanupExpiredLeaveBalances(2026), cronExpression=0 00 11 * * ?, status=0, remark=每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。, createTime=2026-01-07T06:54:03, updateTime=2026-01-08T08:45:37, deleted=0)]
2026-01-23 10:56:06.273 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - ==>  Preparing: UPDATE sys_job SET job_name = ?, job_group = ?, invoke_target = ?, cron_expression = ?, status = ?, remark = ?, update_time = ? WHERE id = ?
2026-01-23 10:56:06.273 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - ==> Parameters: 年假过期清理(String), DEFAULT(String), scheduledTasks.cleanupExpiredLeaveBalances(2026)(String), 0 00 11 * * ?(String), 0(Integer), 每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。(String), 2026-01-23T10:56:06.272470(LocalDateTime), 2(Long)
2026-01-23 10:56:06.299 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - <==    Updates: 1
2026-01-23 10:56:06.300 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.updateJob
SQL         : UPDATE sys_job SET job_name = '年假过期清理', job_group = 'DEFAULT', invoke_target = 'scheduledTasks.cleanupExpiredLeaveBalances(2026)', cron_expression = '0 00 11 * * 0', status = '每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。', remark = 2026-01-23T10:56:06.272470, update_time = 2 WHERE id = ?

2026-01-23 10:56:06.300 INFO  com.leave.system.service.impl.SysJobServiceImpl - Cancelled scheduled task for job ID: 2
2026-01-23 10:56:06.300 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - ==>  Preparing: SELECT * FROM sys_job WHERE id = ?
2026-01-23 10:56:06.300 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - ==> Parameters: 2(Long)
2026-01-23 10:56:06.308 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - <==      Total: 1
2026-01-23 10:56:06.308 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectJobById
SQL         : SELECT * FROM sys_job WHERE id = 2

2026-01-23 10:56:06.309 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: 年假过期清理 with cron: 0 00 11 * * ?
2026-01-23 10:56:06.309 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"任务更新成功","data":null}
2026-01-23 10:56:06.334 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /job/list
2026-01-23 10:56:06.343 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:56:06.343 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:56:06.350 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:56:06.350 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:56:06.352 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /job/list
2026-01-23 10:56:06.353 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/list
2026-01-23 10:56:06.353 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.listJobs
2026-01-23 10:56:06.353 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:56:06.353 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==>  Preparing: SELECT * FROM sys_job
2026-01-23 10:56:06.353 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==> Parameters: 
2026-01-23 10:56:06.356 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - <==      Total: 3
2026-01-23 10:56:06.357 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectAllJobs
SQL         : SELECT * FROM sys_job

2026-01-23 10:56:06.357 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"jobName":"钉钉数据同步","jobGroup":"DEFAULT","invokeTarget":"dingTalkService.syncLeaveData()","cronExpression":"0 55 10 ? * FRI","status":0,"remark":"每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:54:22","deleted":0},{"id":2,"jobName":"年假过期清理","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.cleanupExpiredLeaveBalances(2026)","cronExpression":"0 00 11 * * ?","status":0,"remark":"每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:56:06","deleted":0},{"id":3,"jobName":"年假账户批量初始化","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.initAllAccounts(2027)","cronExpression":"0 0 3 1 1 ?","status":0,"remark":"每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-08T08:47:23","deleted":0}]}
2026-01-23 10:56:19.658 DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /job/update
2026-01-23 10:56:19.664 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:56:19.665 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:56:19.670 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:56:19.670 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:56:19.675 DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /job/update
2026-01-23 10:56:19.676 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/update
2026-01-23 10:56:19.676 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.updateJob
2026-01-23 10:56:19.676 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [SysJob(id=3, jobName=年假账户批量初始化, jobGroup=DEFAULT, invokeTarget=scheduledTasks.initAllAccounts(2027), cronExpression=0 02 11 * * ?, status=0, remark=每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。, createTime=2026-01-07T06:54:03, updateTime=2026-01-08T08:47:23, deleted=0)]
2026-01-23 10:56:19.677 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - ==>  Preparing: UPDATE sys_job SET job_name = ?, job_group = ?, invoke_target = ?, cron_expression = ?, status = ?, remark = ?, update_time = ? WHERE id = ?
2026-01-23 10:56:19.678 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - ==> Parameters: 年假账户批量初始化(String), DEFAULT(String), scheduledTasks.initAllAccounts(2027)(String), 0 02 11 * * ?(String), 0(Integer), 每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。(String), 2026-01-23T10:56:19.676997(LocalDateTime), 3(Long)
2026-01-23 10:56:19.696 DEBUG com.leave.system.mapper.SysJobMapper.updateJob - <==    Updates: 1
2026-01-23 10:56:19.697 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.updateJob
SQL         : UPDATE sys_job SET job_name = '年假账户批量初始化', job_group = 'DEFAULT', invoke_target = 'scheduledTasks.initAllAccounts(2027)', cron_expression = '0 02 11 * * 0', status = '每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。', remark = 2026-01-23T10:56:19.676997, update_time = 3 WHERE id = ?

2026-01-23 10:56:19.697 INFO  com.leave.system.service.impl.SysJobServiceImpl - Cancelled scheduled task for job ID: 3
2026-01-23 10:56:19.698 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - ==>  Preparing: SELECT * FROM sys_job WHERE id = ?
2026-01-23 10:56:19.698 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - ==> Parameters: 3(Long)
2026-01-23 10:56:19.705 DEBUG c.leave.system.mapper.SysJobMapper.selectJobById - <==      Total: 1
2026-01-23 10:56:19.705 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectJobById
SQL         : SELECT * FROM sys_job WHERE id = 3

2026-01-23 10:56:19.706 INFO  com.leave.system.service.impl.SysJobServiceImpl - Scheduled job: 年假账户批量初始化 with cron: 0 02 11 * * ?
2026-01-23 10:56:19.706 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"任务更新成功","data":null}
2026-01-23 10:56:19.714 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /job/list
2026-01-23 10:56:19.716 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 10:56:19.716 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 10:56:19.722 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 10:56:19.722 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 10:56:19.726 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /job/list
2026-01-23 10:56:19.727 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/list
2026-01-23 10:56:19.727 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.listJobs
2026-01-23 10:56:19.727 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 10:56:19.727 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==>  Preparing: SELECT * FROM sys_job
2026-01-23 10:56:19.728 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==> Parameters: 
2026-01-23 10:56:19.733 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - <==      Total: 3
2026-01-23 10:56:19.733 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectAllJobs
SQL         : SELECT * FROM sys_job

2026-01-23 10:56:19.734 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"jobName":"钉钉数据同步","jobGroup":"DEFAULT","invokeTarget":"dingTalkService.syncLeaveData()","cronExpression":"0 55 10 ? * FRI","status":0,"remark":"每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:54:22","deleted":0},{"id":2,"jobName":"年假过期清理","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.cleanupExpiredLeaveBalances(2026)","cronExpression":"0 00 11 * * ?","status":0,"remark":"每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:56:06","deleted":0},{"id":3,"jobName":"年假账户批量初始化","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.initAllAccounts(2027)","cronExpression":"0 02 11 * * ?","status":0,"remark":"每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:56:20","deleted":0}]}
2026-01-23 11:00:00.001 INFO  com.leave.system.service.impl.SysJobServiceImpl - Executing job: 年假过期清理 - scheduledTasks.cleanupExpiredLeaveBalances(2026)
2026-01-23 11:00:00.022 INFO  com.leave.system.scheduled.ScheduledTasks - 🔄 Starting leave expiry cleanup for year: 2026 (Target Expiry: 2026-12-31)
2026-01-23 11:00:00.034 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==>  Preparing: SELECT * FROM leave_account WHERE year = ? AND deleted = 0
2026-01-23 11:00:00.038 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - ==> Parameters: 2026(Integer)
2026-01-23 11:00:00.046 DEBUG c.l.s.m.LeaveAccountMapper.selectAccountsByYear - <==      Total: 35
2026-01-23 11:00:00.046 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountsByYear
SQL         : SELECT * FROM leave_account WHERE year = 2026 AND deleted = 0

2026-01-23 11:00:00.047 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.047 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.052 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.052 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.054 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 1: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.055 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 1: 5.0
2026-01-23 11:00:00.056 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.056 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 1(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.065 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 2
2026-01-23 11:00:00.065 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.066 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.066 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 1(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.070 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.070 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.070 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.070 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 1(Long)
2026-01-23 11:00:00.075 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 1
2026-01-23 11:00:00.076 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.076 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.076 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.080 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.080 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.080 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 2: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.080 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 2: 10.0
2026-01-23 11:00:00.080 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.080 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 2(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.090 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.090 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.090 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.090 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 2(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.102 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.102 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.102 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.102 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 2(Long)
2026-01-23 11:00:00.108 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.108 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.108 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.108 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.113 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.113 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.113 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 3: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.113 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 3: 5.0
2026-01-23 11:00:00.113 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.113 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 3(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.118 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.118 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.118 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.118 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 3(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.123 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.124 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.124 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.124 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 3(Long)
2026-01-23 11:00:00.129 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.129 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.129 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.129 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.134 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 2
2026-01-23 11:00:00.134 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.134 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 4: 12.0 + 0 extra = 12.0
2026-01-23 11:00:00.134 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 4: 12.0
2026-01-23 11:00:00.134 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.134 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 4(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.138 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.138 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.139 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.139 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 4(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.149 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.150 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.150 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.150 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 4(Long)
2026-01-23 11:00:00.156 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.156 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.157 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.157 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.162 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.163 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.163 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 5: -2.0 + 0 extra = -2.0
2026-01-23 11:00:00.163 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 5: -2.0
2026-01-23 11:00:00.163 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.163 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 5(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.168 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.169 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.169 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.169 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 5(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.174 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-23 11:00:00.174 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.174 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.174 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 5(Long)
2026-01-23 11:00:00.178 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 1
2026-01-23 11:00:00.178 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.178 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.179 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.183 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.183 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.183 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 6: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.184 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 6: 10.0
2026-01-23 11:00:00.184 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.184 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 6(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.190 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.191 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.191 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.191 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 6(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.198 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.199 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.200 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.200 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 6(Long)
2026-01-23 11:00:00.205 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.205 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.205 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.206 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.210 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.210 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.211 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 7: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.211 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 7: 5.0
2026-01-23 11:00:00.211 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.211 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 7(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.217 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.217 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.217 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.217 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 7(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.223 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.223 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.224 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.224 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 7(Long)
2026-01-23 11:00:00.228 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.228 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.228 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.228 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.236 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.236 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.236 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 8: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.236 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 8: 10.0
2026-01-23 11:00:00.236 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.236 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 8(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.241 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.241 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.241 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.241 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 8(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.248 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.248 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.248 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.248 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 8(Long)
2026-01-23 11:00:00.252 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.253 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.253 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.253 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.258 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.258 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.258 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 9: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.258 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 9: 10.0
2026-01-23 11:00:00.258 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.258 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 9(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.262 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.263 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.263 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.263 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 9(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.270 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.270 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.270 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.270 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 9(Long)
2026-01-23 11:00:00.274 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.274 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.274 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.274 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.280 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.280 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.280 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 10: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.280 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 10: 10.0
2026-01-23 11:00:00.281 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.281 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 10(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.285 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.285 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.286 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.286 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 10(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.291 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.291 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.291 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.291 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 10(Long)
2026-01-23 11:00:00.295 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.295 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.295 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.295 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.300 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.300 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.300 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 11: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.300 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 11: 10.0
2026-01-23 11:00:00.300 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.300 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 11(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.306 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.306 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.306 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.306 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 11(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.313 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.313 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.314 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.314 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 11(Long)
2026-01-23 11:00:00.320 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.320 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.320 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.320 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.325 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.325 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.325 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 12: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.325 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 12: 5.0
2026-01-23 11:00:00.325 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.325 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 12(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.329 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.329 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.330 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.330 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 12(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.334 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.334 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.334 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.334 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 12(Long)
2026-01-23 11:00:00.339 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.339 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.339 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.339 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.344 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.344 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.344 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 13: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.344 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 13: 10.0
2026-01-23 11:00:00.344 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.344 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 13(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.352 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.352 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.352 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.352 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 13(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.357 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.357 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.357 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.357 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 13(Long)
2026-01-23 11:00:00.361 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.361 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.361 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.361 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.372 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.372 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.372 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 14: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.372 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 14: 10.0
2026-01-23 11:00:00.372 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.372 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 14(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.379 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.379 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.379 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.379 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 14(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.385 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.385 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.385 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.385 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 14(Long)
2026-01-23 11:00:00.390 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.390 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.391 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.391 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.396 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.396 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.396 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 15: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.396 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 15: 10.0
2026-01-23 11:00:00.396 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.396 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 15(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.401 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.401 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.401 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.401 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 15(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.406 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.406 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.406 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.406 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 15(Long)
2026-01-23 11:00:00.410 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.410 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.410 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.410 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.416 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.416 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.416 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 16: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.416 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 16: 10.0
2026-01-23 11:00:00.416 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.416 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 16(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.427 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.427 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.428 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.428 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 16(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.436 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.436 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.436 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.436 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 16(Long)
2026-01-23 11:00:00.443 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.443 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.444 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.444 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.452 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.453 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.453 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 17: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.453 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 17: 10.0
2026-01-23 11:00:00.453 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.454 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 17(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.459 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.459 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.459 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.460 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 17(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.464 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.464 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.464 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.464 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 17(Long)
2026-01-23 11:00:00.468 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.468 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.468 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.468 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.472 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.472 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.472 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 18: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.472 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 18: 5.0
2026-01-23 11:00:00.472 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.472 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 18(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.477 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.477 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.477 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.477 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 18(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.484 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.484 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.484 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.484 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 18(Long)
2026-01-23 11:00:00.490 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.490 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.490 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.490 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.494 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.494 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.494 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 19: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.494 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 19: 10.0
2026-01-23 11:00:00.494 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.494 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 19(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.498 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.498 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.498 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.498 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 19(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.502 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.502 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.503 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.503 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 19(Long)
2026-01-23 11:00:00.509 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.509 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.509 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.509 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.524 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.525 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.525 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 20: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.525 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 20: 10.0
2026-01-23 11:00:00.525 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.525 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 20(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.542 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.542 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.543 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.543 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 20(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.549 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.549 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.549 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.549 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 20(Long)
2026-01-23 11:00:00.554 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.554 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.554 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.554 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.558 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.559 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.559 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 21: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.559 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 21: 5.0
2026-01-23 11:00:00.559 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.559 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 21(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.564 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.564 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.564 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.564 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 21(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.575 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.576 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.576 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.576 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 21(Long)
2026-01-23 11:00:00.580 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.581 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.581 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.581 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.589 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.589 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.589 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 22: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.589 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 22: 5.0
2026-01-23 11:00:00.589 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.589 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 22(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.594 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.594 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.594 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.594 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 22(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.601 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.601 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.601 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.601 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 22(Long)
2026-01-23 11:00:00.608 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.608 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.609 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.609 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.619 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.619 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.619 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 23: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.619 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 23: 5.0
2026-01-23 11:00:00.619 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.619 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 23(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.626 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.626 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.626 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.626 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 23(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.631 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.631 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.631 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.631 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 23(Long)
2026-01-23 11:00:00.635 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.635 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.635 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.635 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.639 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.639 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.639 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 24: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.639 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 24: 5.0
2026-01-23 11:00:00.639 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.640 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 24(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.644 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.644 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.644 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.644 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 24(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.663 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.663 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.663 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.663 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 24(Long)
2026-01-23 11:00:00.674 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.674 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.674 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.674 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.683 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.683 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.683 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 25: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.683 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 25: 10.0
2026-01-23 11:00:00.683 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.683 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 25(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.699 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.699 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.699 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.699 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 25(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.718 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.718 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.718 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.718 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 25(Long)
2026-01-23 11:00:00.726 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.726 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.726 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.726 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.732 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.732 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.732 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 26: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.732 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 26: 5.0
2026-01-23 11:00:00.732 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.732 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 26(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.738 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.738 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.738 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.738 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 26(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.749 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.749 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.750 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.750 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 26(Long)
2026-01-23 11:00:00.754 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.754 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.754 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.754 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.759 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.759 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.759 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 27: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.759 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 27: 5.0
2026-01-23 11:00:00.759 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.759 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 27(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.765 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.765 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.765 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.765 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 27(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.772 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.773 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.773 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.773 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 27(Long)
2026-01-23 11:00:00.778 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.778 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.778 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.779 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.784 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.784 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.784 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 28: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.784 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 28: 10.0
2026-01-23 11:00:00.784 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.784 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 28(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.796 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.796 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.796 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.796 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 28(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.805 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.805 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.805 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.805 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 28(Long)
2026-01-23 11:00:00.816 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.816 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.817 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.817 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.822 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.822 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.822 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 29: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.822 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 29: 5.0
2026-01-23 11:00:00.823 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.823 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 29(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.828 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.828 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.828 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.828 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 29(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.835 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.835 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.835 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.835 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 29(Long)
2026-01-23 11:00:00.846 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.847 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.847 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.847 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.856 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.856 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.856 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 30: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.856 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 30: 10.0
2026-01-23 11:00:00.856 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.856 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 30(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.866 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.866 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.866 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.866 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 30(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.874 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.874 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.874 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.874 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 30(Long)
2026-01-23 11:00:00.880 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.880 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.880 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.880 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.886 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.886 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.887 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 31: 10.0 + 0 extra = 10.0
2026-01-23 11:00:00.887 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 31: 10.0
2026-01-23 11:00:00.887 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.887 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 31(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.891 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.891 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.891 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.891 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 31(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.910 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.910 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.910 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.910 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 31(Long)
2026-01-23 11:00:00.916 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.916 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.916 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.916 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.936 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.936 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.936 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 32: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.936 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 32: 5.0
2026-01-23 11:00:00.936 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.936 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 32(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.944 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:00.944 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.944 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.944 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 32(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.958 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:00.958 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.958 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.958 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 32(Long)
2026-01-23 11:00:00.962 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.963 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.963 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.963 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.968 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.968 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.968 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 33: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.968 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 33: 5.0
2026-01-23 11:00:00.968 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.968 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 33(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:00.974 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 5
2026-01-23 11:00:00.974 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:00.974 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:00.974 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 33(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.978 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 0
2026-01-23 11:00:00.978 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:00.978 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:00.978 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 33(Long)
2026-01-23 11:00:00.984 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:00.984 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:00.984 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, COALESCE(?, 0))
2026-01-23 11:00:00.985 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 33(Long), 2026-12-31(LocalDate), 2026-12-31(LocalDate), -0.5(BigDecimal), EXPIRED(String), 年假已过期自动清理 (到期日期: 2026-12-31)(String), 2026-01-23T11:00:00.984783(LocalDateTime), 2026-12-31(LocalDate), 0(Integer)
2026-01-23 11:00:00.992 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-23 11:00:00.993 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (33, 2026-12-31, 2026-12-31, -0.5, 'EXPIRED', '年假已过期自动清理 (到期日期: 2026-12-31)', 2026-01-23T11:00:00.984783, 2026-12-31, COALESCE(0, 0))

2026-01-23 11:00:00.993 INFO  com.leave.system.scheduled.ScheduledTasks - ⏱️  Expired 0.5 days for user 33 (target expiry date: 2026-12-31)
2026-01-23 11:00:00.993 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:00.993 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:00.996 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:00.996 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:00.997 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 34: 5.0 + 0 extra = 5.0
2026-01-23 11:00:00.997 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 34: 5.0
2026-01-23 11:00:00.997 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:00.997 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 34(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:01.001 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:01.001 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:01.001 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:01.001 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 34(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:01.005 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:01.006 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:01.006 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:01.006 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 34(Long)
2026-01-23 11:00:01.009 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:01.010 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:01.010 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date = ? AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0
2026-01-23 11:00:01.010 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:01.015 DEBUG c.l.s.m.LeaveRecordMapper.selectExpiringRecords - <==      Total: 1
2026-01-23 11:00:01.016 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiringRecords
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND expiry_date = 2026-12-31 AND type IN ('ADJUSTMENT_ADD', 'CARRY_OVER') AND deleted = 0

2026-01-23 11:00:01.016 DEBUG com.leave.system.scheduled.ScheduledTasks - Using CARRY_OVER snapshot as base for user 35: 5.0 + 0 extra = 5.0
2026-01-23 11:00:01.016 DEBUG com.leave.system.scheduled.ScheduledTasks - Summing all credits for user 35: 5.0
2026-01-23 11:00:01.016 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = ? AND deleted = 0 AND create_time > ?
2026-01-23 11:00:01.016 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - ==> Parameters: 35(Long), 2026-12-31(LocalDate), 2026-01-08T08:38:11(LocalDateTime)
2026-01-23 11:00:01.020 DEBUG c.l.s.m.L.selectUsageRecordsForExpiryCleanup - <==      Total: 0
2026-01-23 11:00:01.020 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectUsageRecordsForExpiryCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND type IN ('ANNUAL', 'ADJUSTMENT_DEDUCT') AND expiry_date = 2026-12-31 AND deleted = 0 AND create_time > 2026-01-08T08:38:11

2026-01-23 11:00:01.020 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'EXPIRED' AND start_date = ? AND deleted = 0
2026-01-23 11:00:01.020 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - ==> Parameters: 35(Long), 2026-12-31(LocalDate)
2026-01-23 11:00:01.026 DEBUG c.l.s.m.L.selectExpiredRecordsByDate - <==      Total: 1
2026-01-23 11:00:01.026 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectExpiredRecordsByDate
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND type = 'EXPIRED' AND start_date = 2026-12-31 AND deleted = 0

2026-01-23 11:00:01.026 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0
2026-01-23 11:00:01.026 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - ==> Parameters: 35(Long)
2026-01-23 11:00:01.050 DEBUG c.l.s.m.L.selectFloatingRecordsForCleanup - <==      Total: 0
2026-01-23 11:00:01.050 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectFloatingRecordsForCleanup
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND expiry_date IS NULL AND type != 'CARRY_OVER' AND deleted = 0

2026-01-23 11:00:01.050 INFO  com.leave.system.scheduled.ScheduledTasks - ✅ Expiry cleanup for year 2026 completed: 1 users affected, 0.5 total days expired
2026-01-23 11:00:01.063 INFO  com.leave.system.service.impl.SysJobServiceImpl - Job executed successfully: 年假过期清理
2026-01-23 11:00:11.669 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/available-years
2026-01-23 11:00:11.669 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:00:11.677 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:00:11.677 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:00:11.677 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:00:11.677 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:00:11.682 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:00:11.682 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:00:11.682 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:00:11.682 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:00:11.685 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:00:11.685 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/available-years
2026-01-23 11:00:11.686 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/available-years
2026-01-23 11:00:11.686 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.getAvailableYears
2026-01-23 11:00:11.686 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 11:00:11.687 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==>  Preparing: SELECT DISTINCT year FROM leave_account ORDER BY year DESC
2026-01-23 11:00:11.687 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:00:11.687 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==> Parameters: 
2026-01-23 11:00:11.687 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:00:11.687 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 1, 10]
2026-01-23 11:00:11.691 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - <==      Total: 3
2026-01-23 11:00:11.692 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectDistinctYears
SQL         : SELECT DISTINCT year FROM leave_account ORDER BY year DESC

2026-01-23 11:00:11.692 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:00:11.692 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:00:11.692 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[2027,2026,2025]}
2026-01-23 11:00:11.697 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:00:11.697 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:00:11.697 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:00:11.697 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:00:11.703 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:00:11.703 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:00:11.704 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:11.704 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:00:11.712 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:11.712 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:00:11.713 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:11.713 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:00:11.719 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:11.719 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 11:00:11.719 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 11:00:11.719 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:11.719 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:00:11.731 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 5
2026-01-23 11:00:11.731 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:11.731 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:11.732 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:00:11.735 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:11.736 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:00:11.736 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:11.736 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:00:11.741 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:11.742 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2026 AND deleted = 0

2026-01-23 11:00:11.742 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 2 year 2026 based on today 2026-01-23
2026-01-23 11:00:11.742 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:11.742 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:00:11.746 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:11.746 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:11.746 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:11.747 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:00:11.750 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:11.751 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:00:11.751 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:11.751 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:00:11.755 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:11.756 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2026 AND deleted = 0

2026-01-23 11:00:11.756 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 3 year 2026 based on today 2026-01-23
2026-01-23 11:00:11.756 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:11.756 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:00:11.762 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:11.762 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:11.762 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:11.762 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:00:11.770 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:11.770 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:00:11.770 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:11.770 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:00:11.775 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:11.775 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2026 AND deleted = 0

2026-01-23 11:00:11.775 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 4 year 2026 based on today 2026-01-23
2026-01-23 11:00:11.775 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:11.775 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:00:11.782 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:11.783 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:11.783 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:11.783 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:00:11.793 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:11.793 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:00:11.794 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:11.794 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:00:11.803 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:11.803 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2026 AND deleted = 0

2026-01-23 11:00:11.803 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 5 year 2026 based on today 2026-01-23
2026-01-23 11:00:11.804 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:11.804 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:00:11.812 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:11.813 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:11.813 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:11.814 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:00:11.820 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:11.821 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:00:11.821 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:11.822 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:00:11.827 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:11.827 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2026 AND deleted = 0

2026-01-23 11:00:11.828 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 6 year 2026 based on today 2026-01-23
2026-01-23 11:00:11.828 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:11.828 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:00:11.837 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:11.837 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:11.838 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:11.838 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:00:11.843 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:11.843 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:00:11.843 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:11.844 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:00:11.848 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:11.849 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2026 AND deleted = 0

2026-01-23 11:00:11.849 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 7 year 2026 based on today 2026-01-23
2026-01-23 11:00:11.849 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:11.850 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:00:11.854 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:11.854 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:11.855 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:11.855 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:00:11.860 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:11.860 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:00:11.860 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:11.861 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:00:11.865 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:11.865 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2026 AND deleted = 0

2026-01-23 11:00:11.865 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 8 year 2026 based on today 2026-01-23
2026-01-23 11:00:11.865 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:11.866 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:00:11.870 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:11.871 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:11.871 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:11.871 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:00:11.891 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:11.892 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:00:11.892 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:11.893 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:00:11.898 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:11.899 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2026 AND deleted = 0

2026-01-23 11:00:11.899 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 9 year 2026 based on today 2026-01-23
2026-01-23 11:00:11.899 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:11.900 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:00:11.905 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:11.905 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:11.905 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:11.905 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:00:11.910 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:11.911 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:00:11.911 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:11.911 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:00:11.916 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:11.916 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2026 AND deleted = 0

2026-01-23 11:00:11.916 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 10 year 2026 based on today 2026-01-23
2026-01-23 11:00:11.917 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:11.917 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:00:11.920 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:11.920 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:11.921 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":3.0,"deleted":null,"totalBalance":-0.5,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":72,"userId":2,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":57,"userId":2,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":18,"userId":2,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":73,"userId":3,"year":2026,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":58,"userId":3,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":19,"userId":3,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":74,"userId":4,"year":2026,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":12.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":59,"userId":4,"startDate":"2026-12-31","endDate":"2026-12-31","days":-12.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":20,"userId":4,"startDate":"2026-01-01","endDate":"2026-01-01","days":12.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":75,"userId":5,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":-2.0,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":55,"userId":5,"startDate":"2026-01-08","endDate":"2026-01-08","days":3.5,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2027-12-31","createTime":"2026-01-08T08:42:17","deleted":0},{"id":21,"userId":5,"startDate":"2026-01-01","endDate":"2026-01-01","days":-2.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":76,"userId":6,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":60,"userId":6,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":22,"userId":6,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":77,"userId":7,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":61,"userId":7,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":23,"userId":7,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":78,"userId":8,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":62,"userId":8,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":24,"userId":8,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":79,"userId":9,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":63,"userId":9,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":25,"userId":9,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":80,"userId":10,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":64,"userId":10,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":26,"userId":10,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:00:13.023 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=4&size=10
2026-01-23 11:00:13.033 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:00:13.033 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:00:13.039 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:00:13.039 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:00:13.043 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=4&size=10
2026-01-23 11:00:13.044 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:00:13.044 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:00:13.044 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 4, 10]
2026-01-23 11:00:13.047 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:00:13.048 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:00:13.052 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:00:13.052 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:00:13.053 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?,?
2026-01-23 11:00:13.053 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 30(Long), 10(Long)
2026-01-23 11:00:13.058 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 5
2026-01-23 11:00:13.061 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:00:13.062 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:13.062 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 31(Long)
2026-01-23 11:00:13.067 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:13.067 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 31 AND deleted = 0

2026-01-23 11:00:13.067 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:13.068 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 31(Long), 2026(Integer)
2026-01-23 11:00:13.071 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:13.071 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 31 AND year = 2026 AND deleted = 0

2026-01-23 11:00:13.072 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 31 year 2026 based on today 2026-01-23
2026-01-23 11:00:13.072 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:13.072 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 31(Long), 2026(Integer)
2026-01-23 11:00:13.076 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:13.076 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:13.077 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:13.077 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 32(Long)
2026-01-23 11:00:13.081 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:13.081 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 32 AND deleted = 0

2026-01-23 11:00:13.081 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:13.082 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 32(Long), 2026(Integer)
2026-01-23 11:00:13.086 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:13.086 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 32 AND year = 2026 AND deleted = 0

2026-01-23 11:00:13.087 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 32 year 2026 based on today 2026-01-23
2026-01-23 11:00:13.087 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:13.087 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 32(Long), 2026(Integer)
2026-01-23 11:00:13.093 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:13.093 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:13.093 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:13.094 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 33(Long)
2026-01-23 11:00:13.097 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:13.098 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 33 AND deleted = 0

2026-01-23 11:00:13.098 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:13.098 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 33(Long), 2026(Integer)
2026-01-23 11:00:13.102 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:13.102 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 33 AND year = 2026 AND deleted = 0

2026-01-23 11:00:13.102 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 33 year 2026 based on today 2026-01-23
2026-01-23 11:00:13.103 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:13.103 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 33(Long), 2026(Integer)
2026-01-23 11:00:13.107 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 7
2026-01-23 11:00:13.108 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:13.108 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:13.109 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 34(Long)
2026-01-23 11:00:13.113 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:13.113 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 34 AND deleted = 0

2026-01-23 11:00:13.114 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:13.114 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 34(Long), 2026(Integer)
2026-01-23 11:00:13.118 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:13.119 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 34 AND year = 2026 AND deleted = 0

2026-01-23 11:00:13.119 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 34 year 2026 based on today 2026-01-23
2026-01-23 11:00:13.119 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:13.119 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 34(Long), 2026(Integer)
2026-01-23 11:00:13.123 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:13.123 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:13.124 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:00:13.124 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 35(Long)
2026-01-23 11:00:13.128 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:00:13.128 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 35 AND deleted = 0

2026-01-23 11:00:13.128 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:00:13.128 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 35(Long), 2026(Integer)
2026-01-23 11:00:13.132 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:00:13.132 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 35 AND year = 2026 AND deleted = 0

2026-01-23 11:00:13.132 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 35 year 2026 based on today 2026-01-23
2026-01-23 11:00:13.133 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:00:13.133 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 35(Long), 2026(Integer)
2026-01-23 11:00:13.136 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:00:13.137 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:00:13.138 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":101,"userId":31,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yaoyan","realName":"要妍","employeeNumber":"CBJ-082","entryDate":"2022-03-07","records":[{"id":85,"userId":31,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:43","deleted":0},{"id":47,"userId":31,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":102,"userId":32,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"renzhipeng","realName":"任志鹏","employeeNumber":"CBJ-092","entryDate":"2022-03-30","records":[{"id":86,"userId":32,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:43","deleted":0},{"id":48,"userId":32,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":103,"userId":33,"year":2026,"socialSeniority":7,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":4.5,"deleted":null,"totalBalance":0.0,"username":"zhangningbo","realName":"张宁博","employeeNumber":"CBJ-104","entryDate":"2022-06-21","records":[{"id":132,"userId":33,"startDate":"2026-12-31","endDate":"2026-12-31","days":-0.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-23T11:00:01","deleted":0},{"id":131,"userId":33,"startDate":"2026-01-21","endDate":"2026-01-21","days":-0.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-23T10:55:02","deleted":0},{"id":129,"userId":33,"startDate":"2026-01-14","endDate":"2026-01-14","days":-1.0,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-19T14:03:02","deleted":0},{"id":128,"userId":33,"startDate":"2026-01-14","endDate":"2026-01-14","days":-1.0,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-19T06:09:52","deleted":0},{"id":127,"userId":33,"startDate":"2026-01-13","endDate":"2026-01-13","days":-1.0,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-19T06:09:52","deleted":0},{"id":52,"userId":33,"startDate":"2026-01-04","endDate":"2026-01-04","days":-1.0,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:40:25","deleted":0},{"id":49,"userId":33,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":104,"userId":34,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"xubin","realName":"许滨","employeeNumber":"CBJ-106","entryDate":"2023-02-13","records":[{"id":88,"userId":34,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:43","deleted":0},{"id":50,"userId":34,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":105,"userId":35,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"xiaonan","realName":"肖南","employeeNumber":"CBJ-108","entryDate":"2023-02-22","records":[{"id":89,"userId":35,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:43","deleted":0},{"id":51,"userId":35,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":4,"pages":4}}
2026-01-23 11:00:26.748 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /job/list
2026-01-23 11:00:26.760 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:00:26.760 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:00:26.766 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:00:26.767 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:00:26.770 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /job/list
2026-01-23 11:00:26.770 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/job/list
2026-01-23 11:00:26.770 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.JobController.listJobs
2026-01-23 11:00:26.770 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 11:00:26.771 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==>  Preparing: SELECT * FROM sys_job
2026-01-23 11:00:26.771 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - ==> Parameters: 
2026-01-23 11:00:26.780 DEBUG c.leave.system.mapper.SysJobMapper.selectAllJobs - <==      Total: 3
2026-01-23 11:00:26.780 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysJobMapper.selectAllJobs
SQL         : SELECT * FROM sys_job

2026-01-23 11:00:26.780 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":1,"jobName":"钉钉数据同步","jobGroup":"DEFAULT","invokeTarget":"dingTalkService.syncLeaveData()","cronExpression":"0 55 10 ? * FRI","status":0,"remark":"每周一上午10点自动从钉钉同步年假数据。从钉钉考勤系统拉取请假记录并更新到本地数据库。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:54:22","deleted":0},{"id":2,"jobName":"年假过期清理","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.cleanupExpiredLeaveBalances(2026)","cronExpression":"0 00 11 * * ?","status":0,"remark":"每年1月1日凌晨1点自动清理已过期的年假余额（上年结转额度）。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:56:06","deleted":0},{"id":3,"jobName":"年假账户批量初始化","jobGroup":"DEFAULT","invokeTarget":"scheduledTasks.initAllAccounts(2027)","cronExpression":"0 02 11 * * ?","status":0,"remark":"每年1月1日凌晨3点批量初始化所有员工的新年度账户（含结转计算）。注意：需手动更新年份参数！默认暂停状态。","createTime":"2026-01-07T06:54:03","updateTime":"2026-01-23T10:56:20","deleted":0}]}
2026-01-23 11:02:00.001 INFO  com.leave.system.service.impl.SysJobServiceImpl - Executing job: 年假账户批量初始化 - scheduledTasks.initAllAccounts(2027)
2026-01-23 11:02:00.006 INFO  com.leave.system.scheduled.ScheduledTasks - 🔄 Starting batch account initialization for year: 2027
2026-01-23 11:02:00.014 DEBUG c.leave.system.mapper.SysUserMapper.selectAllUsers - ==>  Preparing: SELECT * FROM sys_user WHERE deleted = 0
2026-01-23 11:02:00.014 DEBUG c.leave.system.mapper.SysUserMapper.selectAllUsers - ==> Parameters: 
2026-01-23 11:02:00.022 DEBUG c.leave.system.mapper.SysUserMapper.selectAllUsers - <==      Total: 35
2026-01-23 11:02:00.022 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectAllUsers
SQL         : SELECT * FROM sys_user WHERE deleted = 0

2026-01-23 11:02:00.027 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.028 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:02:00.032 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.032 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:02:00.033 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.033 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 1(Long), 2027(Integer)
2026-01-23 11:02:00.039 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.039 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.039 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 1 from year 2026 to 2027
2026-01-23 11:02:00.039 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.040 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:00.041 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.041 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:02:00.045 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 5
2026-01-23 11:02:00.045 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.045 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 5 records in year 2026
2026-01-23 11:02:00.045 INFO  com.leave.system.service.impl.LeaveServiceImpl - ⚖️ Offsetting total debt of 0.5 days against available credits
2026-01-23 11:02:00.046 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 1.0 days
2026-01-23 11:02:00.046 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:00.046 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 1 year 2027: 0.0 days
2026-01-23 11:02:00.046 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.046 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 1(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.052 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.052 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.054 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.054 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 1(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 90(Long)
2026-01-23 11:02:00.062 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.062 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 1, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 90

2026-01-23 11:02:00.062 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:00.062 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.062 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 1(Long), 2027(Integer)
2026-01-23 11:02:00.076 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.076 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2027

2026-01-23 11:02:00.076 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 1 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:00.076 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.076 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 1(Long), 2027(Integer), 6(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 106(Long)
2026-01-23 11:02:00.085 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.085 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 1, year = 2027, social_seniority = 6, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 106

2026-01-23 11:02:00.085 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 1 year 2027
2026-01-23 11:02:00.099 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.099 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:02:00.105 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.105 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:02:00.105 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.105 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 2(Long), 2027(Integer)
2026-01-23 11:02:00.110 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.110 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.110 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 2 from year 2026 to 2027
2026-01-23 11:02:00.110 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.110 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.5 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:00.110 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.110 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:02:00.114 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.114 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.114 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.114 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:00.115 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.5 days
2026-01-23 11:02:00.115 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 2 year 2027: 0.5 days
2026-01-23 11:02:00.115 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.115 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 2(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.119 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.119 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.120 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.120 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 2(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.5(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 91(Long)
2026-01-23 11:02:00.128 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.128 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 2, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.5, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 91

2026-01-23 11:02:00.128 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.5 days (expires 2027-12-31)
2026-01-23 11:02:00.128 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.128 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 2(Long), 2027(Integer)
2026-01-23 11:02:00.132 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.132 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2027

2026-01-23 11:02:00.132 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 2 year 2027: lastYearBalance set to 0.5
2026-01-23 11:02:00.132 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.132 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 2(Long), 2027(Integer), 19(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.5(BigDecimal), 0.0(BigDecimal), 0(Integer), 107(Long)
2026-01-23 11:02:00.141 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.141 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 2, year = 2027, social_seniority = 19, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.5, current_year_used = 0.0, deleted = 0 WHERE id = 107

2026-01-23 11:02:00.141 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 2 year 2027
2026-01-23 11:02:00.156 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.156 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:02:00.161 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.161 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:02:00.162 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.162 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 3(Long), 2027(Integer)
2026-01-23 11:02:00.190 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.190 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.190 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 3 from year 2026 to 2027
2026-01-23 11:02:00.190 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.190 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.5 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:00.191 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.191 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:02:00.196 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.196 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.196 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.196 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:00.196 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.5 days
2026-01-23 11:02:00.196 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 3 year 2027: 0.5 days
2026-01-23 11:02:00.197 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.197 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 3(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.201 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.202 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.202 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.203 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 3(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.5(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 92(Long)
2026-01-23 11:02:00.211 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.212 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 3, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.5, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 92

2026-01-23 11:02:00.212 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.5 days (expires 2027-12-31)
2026-01-23 11:02:00.212 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.212 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 3(Long), 2027(Integer)
2026-01-23 11:02:00.216 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.216 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2027

2026-01-23 11:02:00.216 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 3 year 2027: lastYearBalance set to 0.5
2026-01-23 11:02:00.217 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.217 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 3(Long), 2027(Integer), 18(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.5(BigDecimal), 0.0(BigDecimal), 0(Integer), 108(Long)
2026-01-23 11:02:00.229 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.229 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 3, year = 2027, social_seniority = 18, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.5, current_year_used = 0.0, deleted = 0 WHERE id = 108

2026-01-23 11:02:00.229 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 3 year 2027
2026-01-23 11:02:00.249 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.249 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:02:00.259 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.259 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:02:00.259 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.259 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 4(Long), 2027(Integer)
2026-01-23 11:02:00.264 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.264 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.264 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 4 from year 2026 to 2027
2026-01-23 11:02:00.264 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.264 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.5 (expires 2027-12-31), BroughtForward 12.0 (expires 2026-12-31)
2026-01-23 11:02:00.264 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.264 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:02:00.271 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.271 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.271 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.271 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 12.0 days
2026-01-23 11:02:00.271 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.5 days
2026-01-23 11:02:00.271 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 4 year 2027: 0.5 days
2026-01-23 11:02:00.271 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.271 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 4(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.277 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.277 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.277 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.277 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 4(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.5(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 93(Long)
2026-01-23 11:02:00.287 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.287 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 4, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.5, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 93

2026-01-23 11:02:00.287 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.5 days (expires 2027-12-31)
2026-01-23 11:02:00.287 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.287 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 4(Long), 2027(Integer)
2026-01-23 11:02:00.291 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.291 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2027

2026-01-23 11:02:00.291 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 4 year 2027: lastYearBalance set to 0.5
2026-01-23 11:02:00.292 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.292 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 4(Long), 2027(Integer), 17(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.5(BigDecimal), 0.0(BigDecimal), 0(Integer), 109(Long)
2026-01-23 11:02:00.305 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.305 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 4, year = 2027, social_seniority = 17, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.5, current_year_used = 0.0, deleted = 0 WHERE id = 109

2026-01-23 11:02:00.305 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 4 year 2027
2026-01-23 11:02:00.320 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.320 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:02:00.325 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.325 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:02:00.326 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.326 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 5(Long), 2027(Integer)
2026-01-23 11:02:00.330 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.330 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.330 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 5 from year 2026 to 2027
2026-01-23 11:02:00.330 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.330 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward -2.0 (expires 2026-12-31)
2026-01-23 11:02:00.330 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.330 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:02:00.335 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.335 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.335 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.335 INFO  com.leave.system.service.impl.LeaveServiceImpl - ⚖️ Offsetting total debt of 2.0 days against available credits
2026-01-23 11:02:00.335 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 1.5 days
2026-01-23 11:02:00.335 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 5 year 2027: 1.5 days
2026-01-23 11:02:00.335 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.335 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 5(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.340 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.340 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.340 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.340 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 5(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 1.5(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 94(Long)
2026-01-23 11:02:00.351 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.352 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 5, start_date = 2027-01-01, end_date = 2027-01-01, days = 1.5, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 94

2026-01-23 11:02:00.352 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 1.5 days (expires 2027-12-31)
2026-01-23 11:02:00.352 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.352 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 5(Long), 2027(Integer)
2026-01-23 11:02:00.356 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.356 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2027

2026-01-23 11:02:00.356 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 5 year 2027: lastYearBalance set to 1.5
2026-01-23 11:02:00.357 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.357 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 5(Long), 2027(Integer), 8(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 1.5(BigDecimal), 0.0(BigDecimal), 0(Integer), 110(Long)
2026-01-23 11:02:00.369 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.370 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 5, year = 2027, social_seniority = 8, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 1.5, current_year_used = 0.0, deleted = 0 WHERE id = 110

2026-01-23 11:02:00.370 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 5 year 2027
2026-01-23 11:02:00.385 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.385 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:02:00.392 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.392 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:02:00.392 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.392 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 6(Long), 2027(Integer)
2026-01-23 11:02:00.398 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.398 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.398 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 6 from year 2026 to 2027
2026-01-23 11:02:00.398 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.398 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.5 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:00.398 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.398 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:02:00.408 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.408 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.408 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.408 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:00.408 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.5 days
2026-01-23 11:02:00.408 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 6 year 2027: 0.5 days
2026-01-23 11:02:00.408 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.408 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 6(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.413 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.413 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.413 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.413 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 6(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.5(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 95(Long)
2026-01-23 11:02:00.423 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.424 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 6, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.5, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 95

2026-01-23 11:02:00.424 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.5 days (expires 2027-12-31)
2026-01-23 11:02:00.424 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.424 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 6(Long), 2027(Integer)
2026-01-23 11:02:00.428 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.428 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2027

2026-01-23 11:02:00.428 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 6 year 2027: lastYearBalance set to 0.5
2026-01-23 11:02:00.428 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.429 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 6(Long), 2027(Integer), 10(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.5(BigDecimal), 0.0(BigDecimal), 0(Integer), 111(Long)
2026-01-23 11:02:00.438 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.438 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 6, year = 2027, social_seniority = 10, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.5, current_year_used = 0.0, deleted = 0 WHERE id = 111

2026-01-23 11:02:00.438 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 6 year 2027
2026-01-23 11:02:00.454 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.454 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:02:00.458 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.458 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:02:00.459 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.459 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 7(Long), 2027(Integer)
2026-01-23 11:02:00.467 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.467 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.467 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 7 from year 2026 to 2027
2026-01-23 11:02:00.467 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.467 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:00.467 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.467 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:02:00.472 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.472 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.472 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.472 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:00.472 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:00.472 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 7 year 2027: 0.0 days
2026-01-23 11:02:00.472 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.472 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 7(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.476 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.477 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.477 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.477 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 7(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 96(Long)
2026-01-23 11:02:00.490 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.490 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 7, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 96

2026-01-23 11:02:00.490 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:00.490 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.490 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 7(Long), 2027(Integer)
2026-01-23 11:02:00.495 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.495 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2027

2026-01-23 11:02:00.495 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 7 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:00.495 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.495 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 7(Long), 2027(Integer), 9(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 112(Long)
2026-01-23 11:02:00.504 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.504 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 7, year = 2027, social_seniority = 9, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 112

2026-01-23 11:02:00.504 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 7 year 2027
2026-01-23 11:02:00.516 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.516 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:02:00.521 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.523 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:02:00.523 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.523 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 8(Long), 2027(Integer)
2026-01-23 11:02:00.527 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.527 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.527 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 8 from year 2026 to 2027
2026-01-23 11:02:00.527 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.527 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.5 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:00.527 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.527 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:02:00.533 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.533 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.533 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.533 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:00.533 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.5 days
2026-01-23 11:02:00.533 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 8 year 2027: 0.5 days
2026-01-23 11:02:00.533 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.533 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 8(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.538 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.538 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.538 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.538 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 8(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.5(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 97(Long)
2026-01-23 11:02:00.546 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.547 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 8, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.5, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 97

2026-01-23 11:02:00.547 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.5 days (expires 2027-12-31)
2026-01-23 11:02:00.547 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.547 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 8(Long), 2027(Integer)
2026-01-23 11:02:00.551 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.551 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2027

2026-01-23 11:02:00.551 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 8 year 2027: lastYearBalance set to 0.5
2026-01-23 11:02:00.551 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.551 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 8(Long), 2027(Integer), 15(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.5(BigDecimal), 0.0(BigDecimal), 0(Integer), 113(Long)
2026-01-23 11:02:00.559 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.559 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 8, year = 2027, social_seniority = 15, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.5, current_year_used = 0.0, deleted = 0 WHERE id = 113

2026-01-23 11:02:00.559 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 8 year 2027
2026-01-23 11:02:00.574 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.574 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:02:00.578 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.578 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:02:00.579 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.579 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 9(Long), 2027(Integer)
2026-01-23 11:02:00.583 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.583 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.583 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 9 from year 2026 to 2027
2026-01-23 11:02:00.583 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.583 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.5 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:00.583 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.583 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:02:00.592 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.592 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.592 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.593 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:00.593 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.5 days
2026-01-23 11:02:00.593 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 9 year 2027: 0.5 days
2026-01-23 11:02:00.593 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.593 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 9(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.602 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.602 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.602 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.602 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 9(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.5(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 98(Long)
2026-01-23 11:02:00.616 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.616 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 9, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.5, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 98

2026-01-23 11:02:00.616 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.5 days (expires 2027-12-31)
2026-01-23 11:02:00.616 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.616 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 9(Long), 2027(Integer)
2026-01-23 11:02:00.629 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.629 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2027

2026-01-23 11:02:00.629 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 9 year 2027: lastYearBalance set to 0.5
2026-01-23 11:02:00.629 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.630 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 9(Long), 2027(Integer), 15(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.5(BigDecimal), 0.0(BigDecimal), 0(Integer), 114(Long)
2026-01-23 11:02:00.643 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.643 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 9, year = 2027, social_seniority = 15, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.5, current_year_used = 0.0, deleted = 0 WHERE id = 114

2026-01-23 11:02:00.643 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 9 year 2027
2026-01-23 11:02:00.659 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.659 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:02:00.664 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.664 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:02:00.664 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.664 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 10(Long), 2027(Integer)
2026-01-23 11:02:00.670 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.670 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.670 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 10 from year 2026 to 2027
2026-01-23 11:02:00.670 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.670 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.5 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:00.670 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.670 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:02:00.674 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.674 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.675 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.675 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:00.675 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.5 days
2026-01-23 11:02:00.675 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 10 year 2027: 0.5 days
2026-01-23 11:02:00.675 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.675 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 10(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.681 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.681 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.681 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.681 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 10(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.5(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 99(Long)
2026-01-23 11:02:00.693 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.693 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 10, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.5, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 99

2026-01-23 11:02:00.693 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.5 days (expires 2027-12-31)
2026-01-23 11:02:00.693 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.693 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 10(Long), 2027(Integer)
2026-01-23 11:02:00.700 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.700 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2027

2026-01-23 11:02:00.700 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 10 year 2027: lastYearBalance set to 0.5
2026-01-23 11:02:00.701 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.701 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 10(Long), 2027(Integer), 15(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.5(BigDecimal), 0.0(BigDecimal), 0(Integer), 115(Long)
2026-01-23 11:02:00.711 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.711 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 10, year = 2027, social_seniority = 15, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.5, current_year_used = 0.0, deleted = 0 WHERE id = 115

2026-01-23 11:02:00.711 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 10 year 2027
2026-01-23 11:02:00.728 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.728 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 11(Long)
2026-01-23 11:02:00.737 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.738 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 11 AND deleted = 0

2026-01-23 11:02:00.738 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.738 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 11(Long), 2027(Integer)
2026-01-23 11:02:00.743 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.743 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 11 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.743 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 11 from year 2026 to 2027
2026-01-23 11:02:00.743 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 11 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.743 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:00.743 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.743 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 11(Long), 2026(Integer)
2026-01-23 11:02:00.748 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.748 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.748 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.748 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:00.748 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:00.748 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 11 year 2027: 0.0 days
2026-01-23 11:02:00.748 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.748 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 11(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.753 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.753 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.753 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.753 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 11(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 100(Long)
2026-01-23 11:02:00.762 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.762 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 11, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 100

2026-01-23 11:02:00.762 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:00.762 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.762 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 11(Long), 2027(Integer)
2026-01-23 11:02:00.767 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.767 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 11 AND year = 2027

2026-01-23 11:02:00.767 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 11 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:00.767 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.767 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 11(Long), 2027(Integer), 10(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 116(Long)
2026-01-23 11:02:00.780 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.780 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 11, year = 2027, social_seniority = 10, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 116

2026-01-23 11:02:00.780 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 11 year 2027
2026-01-23 11:02:00.798 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.798 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 12(Long)
2026-01-23 11:02:00.802 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.802 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 12 AND deleted = 0

2026-01-23 11:02:00.802 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.802 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 12(Long), 2027(Integer)
2026-01-23 11:02:00.810 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.810 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 12 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.810 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 12 from year 2026 to 2027
2026-01-23 11:02:00.810 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 12 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.810 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:00.838 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.838 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 12(Long), 2026(Integer)
2026-01-23 11:02:00.843 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.843 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.843 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.843 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:00.843 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:00.843 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 12 year 2027: 0.0 days
2026-01-23 11:02:00.843 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.843 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 12(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.847 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.847 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.847 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.847 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 12(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 101(Long)
2026-01-23 11:02:00.856 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.857 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 12, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 101

2026-01-23 11:02:00.857 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:00.857 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.857 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 12(Long), 2027(Integer)
2026-01-23 11:02:00.862 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.862 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 12 AND year = 2027

2026-01-23 11:02:00.862 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 12 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:00.863 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.863 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 12(Long), 2027(Integer), 7(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 117(Long)
2026-01-23 11:02:00.873 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.873 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 12, year = 2027, social_seniority = 7, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 117

2026-01-23 11:02:00.873 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 12 year 2027
2026-01-23 11:02:00.892 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.892 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 13(Long)
2026-01-23 11:02:00.902 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.902 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 13 AND deleted = 0

2026-01-23 11:02:00.902 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.902 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 13(Long), 2027(Integer)
2026-01-23 11:02:00.915 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.915 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 13 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.915 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 13 from year 2026 to 2027
2026-01-23 11:02:00.916 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 13 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.916 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:00.916 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.916 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 13(Long), 2026(Integer)
2026-01-23 11:02:00.922 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:00.922 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:00.922 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:00.922 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:00.922 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:00.922 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 13 year 2027: 0.0 days
2026-01-23 11:02:00.922 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:00.922 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 13(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:00.929 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:00.929 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:00.929 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.929 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 13(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 102(Long)
2026-01-23 11:02:00.944 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:00.945 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 13, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 102

2026-01-23 11:02:00.945 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:00.945 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:00.945 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 13(Long), 2027(Integer)
2026-01-23 11:02:00.952 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:00.952 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 13 AND year = 2027

2026-01-23 11:02:00.952 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 13 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:00.952 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:00.952 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 13(Long), 2027(Integer), 10(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 118(Long)
2026-01-23 11:02:00.964 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:00.964 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 13, year = 2027, social_seniority = 10, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 118

2026-01-23 11:02:00.964 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 13 year 2027
2026-01-23 11:02:00.985 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:00.985 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 14(Long)
2026-01-23 11:02:00.990 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:00.990 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 14 AND deleted = 0

2026-01-23 11:02:00.990 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:00.990 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 14(Long), 2027(Integer)
2026-01-23 11:02:00.996 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:00.996 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 14 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.996 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 14 from year 2026 to 2027
2026-01-23 11:02:00.996 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 14 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:00.996 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:00.996 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:00.996 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 14(Long), 2026(Integer)
2026-01-23 11:02:01.012 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.012 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.012 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.012 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:01.012 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.012 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 14 year 2027: 0.0 days
2026-01-23 11:02:01.012 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.012 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 14(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.018 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.018 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.018 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.018 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 14(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 103(Long)
2026-01-23 11:02:01.031 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.031 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 14, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 103

2026-01-23 11:02:01.031 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.032 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.032 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 14(Long), 2027(Integer)
2026-01-23 11:02:01.036 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.036 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 14 AND year = 2027

2026-01-23 11:02:01.036 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 14 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.036 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.036 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 14(Long), 2027(Integer), 16(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 119(Long)
2026-01-23 11:02:01.045 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.045 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 14, year = 2027, social_seniority = 16, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 119

2026-01-23 11:02:01.045 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 14 year 2027
2026-01-23 11:02:01.057 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.057 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 15(Long)
2026-01-23 11:02:01.062 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.062 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 15 AND deleted = 0

2026-01-23 11:02:01.062 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.062 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 15(Long), 2027(Integer)
2026-01-23 11:02:01.066 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.066 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 15 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.066 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 15 from year 2026 to 2027
2026-01-23 11:02:01.066 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 15 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.066 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:01.066 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.066 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 15(Long), 2026(Integer)
2026-01-23 11:02:01.070 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.070 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.070 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.070 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:01.070 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.070 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 15 year 2027: 0.0 days
2026-01-23 11:02:01.071 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.071 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 15(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.077 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.077 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.077 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.077 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 15(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 104(Long)
2026-01-23 11:02:01.085 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.085 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 15, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 104

2026-01-23 11:02:01.085 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.085 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.086 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 15(Long), 2027(Integer)
2026-01-23 11:02:01.090 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.090 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 15 AND year = 2027

2026-01-23 11:02:01.090 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 15 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.090 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.090 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 15(Long), 2027(Integer), 19(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 120(Long)
2026-01-23 11:02:01.100 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.100 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 15, year = 2027, social_seniority = 19, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 120

2026-01-23 11:02:01.101 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 15 year 2027
2026-01-23 11:02:01.115 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.115 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 16(Long)
2026-01-23 11:02:01.119 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.119 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 16 AND deleted = 0

2026-01-23 11:02:01.119 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.119 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 16(Long), 2027(Integer)
2026-01-23 11:02:01.124 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.125 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 16 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.125 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 16 from year 2026 to 2027
2026-01-23 11:02:01.125 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 16 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.125 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:01.125 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.125 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 16(Long), 2026(Integer)
2026-01-23 11:02:01.129 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.129 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.129 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.129 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:01.129 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.129 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 16 year 2027: 0.0 days
2026-01-23 11:02:01.129 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.129 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 16(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.133 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.133 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.133 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.133 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 16(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 105(Long)
2026-01-23 11:02:01.142 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.142 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 16, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 105

2026-01-23 11:02:01.143 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.143 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.143 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 16(Long), 2027(Integer)
2026-01-23 11:02:01.148 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.148 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 16 AND year = 2027

2026-01-23 11:02:01.148 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 16 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.148 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.148 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 16(Long), 2027(Integer), 14(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 121(Long)
2026-01-23 11:02:01.157 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.157 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 16, year = 2027, social_seniority = 14, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 121

2026-01-23 11:02:01.157 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 16 year 2027
2026-01-23 11:02:01.171 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.171 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 17(Long)
2026-01-23 11:02:01.177 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.177 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 17 AND deleted = 0

2026-01-23 11:02:01.177 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.177 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 17(Long), 2027(Integer)
2026-01-23 11:02:01.181 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.181 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 17 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.181 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 17 from year 2026 to 2027
2026-01-23 11:02:01.181 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 17 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.181 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:01.181 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.181 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 17(Long), 2026(Integer)
2026-01-23 11:02:01.185 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.185 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.185 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.185 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:01.185 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.185 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 17 year 2027: 0.0 days
2026-01-23 11:02:01.185 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.185 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 17(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.190 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.190 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.190 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.190 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 17(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 106(Long)
2026-01-23 11:02:01.203 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.203 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 17, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 106

2026-01-23 11:02:01.203 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.203 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.203 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 17(Long), 2027(Integer)
2026-01-23 11:02:01.208 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.208 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 17 AND year = 2027

2026-01-23 11:02:01.208 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 17 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.208 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.208 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 17(Long), 2027(Integer), 11(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 122(Long)
2026-01-23 11:02:01.217 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.217 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 17, year = 2027, social_seniority = 11, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 122

2026-01-23 11:02:01.217 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 17 year 2027
2026-01-23 11:02:01.232 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.232 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 18(Long)
2026-01-23 11:02:01.239 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.239 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 18 AND deleted = 0

2026-01-23 11:02:01.239 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.239 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 18(Long), 2027(Integer)
2026-01-23 11:02:01.244 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.244 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 18 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.244 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 18 from year 2026 to 2027
2026-01-23 11:02:01.244 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 18 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.244 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:01.244 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.244 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 18(Long), 2026(Integer)
2026-01-23 11:02:01.249 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.249 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.249 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.249 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:01.249 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.249 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 18 year 2027: 0.0 days
2026-01-23 11:02:01.249 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.249 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 18(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.254 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.254 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.254 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.254 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 18(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 107(Long)
2026-01-23 11:02:01.264 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.264 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 18, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 107

2026-01-23 11:02:01.264 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.264 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.264 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 18(Long), 2027(Integer)
2026-01-23 11:02:01.270 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.270 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 18 AND year = 2027

2026-01-23 11:02:01.270 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 18 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.270 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.270 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 18(Long), 2027(Integer), 9(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 123(Long)
2026-01-23 11:02:01.278 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.279 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 18, year = 2027, social_seniority = 9, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 123

2026-01-23 11:02:01.279 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 18 year 2027
2026-01-23 11:02:01.295 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.295 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 19(Long)
2026-01-23 11:02:01.300 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.300 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 19 AND deleted = 0

2026-01-23 11:02:01.300 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.300 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 19(Long), 2027(Integer)
2026-01-23 11:02:01.310 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.310 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 19 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.310 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 19 from year 2026 to 2027
2026-01-23 11:02:01.310 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 19 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.310 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:01.310 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.310 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 19(Long), 2026(Integer)
2026-01-23 11:02:01.315 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.315 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.315 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.315 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:01.315 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.315 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 19 year 2027: 0.0 days
2026-01-23 11:02:01.315 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.315 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 19(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.319 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.319 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.319 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.319 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 19(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 108(Long)
2026-01-23 11:02:01.332 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.333 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 19, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 108

2026-01-23 11:02:01.333 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.333 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.333 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 19(Long), 2027(Integer)
2026-01-23 11:02:01.338 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.338 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 19 AND year = 2027

2026-01-23 11:02:01.338 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 19 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.338 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.339 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 19(Long), 2027(Integer), 11(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 124(Long)
2026-01-23 11:02:01.347 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.347 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 19, year = 2027, social_seniority = 11, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 124

2026-01-23 11:02:01.347 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 19 year 2027
2026-01-23 11:02:01.360 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.360 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 20(Long)
2026-01-23 11:02:01.365 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.365 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 20 AND deleted = 0

2026-01-23 11:02:01.365 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.365 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 20(Long), 2027(Integer)
2026-01-23 11:02:01.370 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.370 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 20 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.370 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 20 from year 2026 to 2027
2026-01-23 11:02:01.370 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 20 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.370 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:01.370 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.370 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 20(Long), 2026(Integer)
2026-01-23 11:02:01.374 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.374 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.374 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.374 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:01.374 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.374 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 20 year 2027: 0.0 days
2026-01-23 11:02:01.374 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.374 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 20(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.378 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.378 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.379 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.379 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 20(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 109(Long)
2026-01-23 11:02:01.388 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.388 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 20, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 109

2026-01-23 11:02:01.388 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.388 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.388 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 20(Long), 2027(Integer)
2026-01-23 11:02:01.393 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.393 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 20 AND year = 2027

2026-01-23 11:02:01.393 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 20 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.393 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.393 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 20(Long), 2027(Integer), 11(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 125(Long)
2026-01-23 11:02:01.404 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.404 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 20, year = 2027, social_seniority = 11, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 125

2026-01-23 11:02:01.404 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 20 year 2027
2026-01-23 11:02:01.418 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.418 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 21(Long)
2026-01-23 11:02:01.422 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.422 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 21 AND deleted = 0

2026-01-23 11:02:01.422 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.423 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 21(Long), 2027(Integer)
2026-01-23 11:02:01.429 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.429 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 21 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.429 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 21 from year 2026 to 2027
2026-01-23 11:02:01.429 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 21 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.429 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:01.429 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.429 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 21(Long), 2026(Integer)
2026-01-23 11:02:01.433 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.433 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.433 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.433 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:01.433 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.433 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 21 year 2027: 0.0 days
2026-01-23 11:02:01.433 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.433 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 21(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.437 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.437 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 21 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.437 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.437 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 21(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 110(Long)
2026-01-23 11:02:01.452 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.453 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 21, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 110

2026-01-23 11:02:01.453 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.453 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.453 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 21(Long), 2027(Integer)
2026-01-23 11:02:01.457 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.457 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 21 AND year = 2027

2026-01-23 11:02:01.457 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 21 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.457 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.457 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 21(Long), 2027(Integer), 9(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 126(Long)
2026-01-23 11:02:01.467 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.468 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 21, year = 2027, social_seniority = 9, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 126

2026-01-23 11:02:01.468 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 21 year 2027
2026-01-23 11:02:01.481 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.481 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 22(Long)
2026-01-23 11:02:01.485 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.485 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 22 AND deleted = 0

2026-01-23 11:02:01.486 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.486 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 22(Long), 2027(Integer)
2026-01-23 11:02:01.490 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.490 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 22 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.490 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 22 from year 2026 to 2027
2026-01-23 11:02:01.490 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 22 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.490 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:01.490 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.491 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 22(Long), 2026(Integer)
2026-01-23 11:02:01.496 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.496 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.496 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.496 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:01.496 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.496 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 22 year 2027: 0.0 days
2026-01-23 11:02:01.496 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.496 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 22(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.501 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.501 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 22 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.502 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.502 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 22(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 111(Long)
2026-01-23 11:02:01.511 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.512 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 22, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 111

2026-01-23 11:02:01.512 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.512 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.512 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 22(Long), 2027(Integer)
2026-01-23 11:02:01.517 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.517 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 22 AND year = 2027

2026-01-23 11:02:01.517 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 22 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.517 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.517 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 22(Long), 2027(Integer), 7(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 127(Long)
2026-01-23 11:02:01.527 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.527 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 22, year = 2027, social_seniority = 7, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 127

2026-01-23 11:02:01.527 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 22 year 2027
2026-01-23 11:02:01.541 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.542 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 23(Long)
2026-01-23 11:02:01.547 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.547 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 23 AND deleted = 0

2026-01-23 11:02:01.547 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.547 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 23(Long), 2027(Integer)
2026-01-23 11:02:01.551 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.551 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 23 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.551 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 23 from year 2026 to 2027
2026-01-23 11:02:01.551 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 23 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.551 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:01.551 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.551 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 23(Long), 2026(Integer)
2026-01-23 11:02:01.556 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.556 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.556 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.556 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:01.556 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.556 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 23 year 2027: 0.0 days
2026-01-23 11:02:01.556 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.556 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 23(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.560 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.560 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 23 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.560 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.561 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 23(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 112(Long)
2026-01-23 11:02:01.569 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.569 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 23, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 112

2026-01-23 11:02:01.569 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.569 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.569 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 23(Long), 2027(Integer)
2026-01-23 11:02:01.573 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.573 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 23 AND year = 2027

2026-01-23 11:02:01.573 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 23 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.573 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.573 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 23(Long), 2027(Integer), 7(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 128(Long)
2026-01-23 11:02:01.583 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.583 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 23, year = 2027, social_seniority = 7, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 128

2026-01-23 11:02:01.583 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 23 year 2027
2026-01-23 11:02:01.597 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.597 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 24(Long)
2026-01-23 11:02:01.601 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.601 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 24 AND deleted = 0

2026-01-23 11:02:01.601 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.601 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 24(Long), 2027(Integer)
2026-01-23 11:02:01.605 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.605 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 24 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.605 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 24 from year 2026 to 2027
2026-01-23 11:02:01.605 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 24 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.605 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:01.605 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.605 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 24(Long), 2026(Integer)
2026-01-23 11:02:01.611 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.611 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.611 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.611 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:01.611 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.611 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 24 year 2027: 0.0 days
2026-01-23 11:02:01.611 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.612 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 24(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.616 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.616 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 24 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.616 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.617 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 24(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 113(Long)
2026-01-23 11:02:01.629 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.630 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 24, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 113

2026-01-23 11:02:01.630 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.630 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.630 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 24(Long), 2027(Integer)
2026-01-23 11:02:01.635 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.635 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 24 AND year = 2027

2026-01-23 11:02:01.635 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 24 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.635 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.635 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 24(Long), 2027(Integer), 9(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 129(Long)
2026-01-23 11:02:01.646 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.646 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 24, year = 2027, social_seniority = 9, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 129

2026-01-23 11:02:01.646 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 24 year 2027
2026-01-23 11:02:01.659 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.659 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 25(Long)
2026-01-23 11:02:01.664 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.664 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 25 AND deleted = 0

2026-01-23 11:02:01.664 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.664 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 25(Long), 2027(Integer)
2026-01-23 11:02:01.669 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.669 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 25 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.669 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 25 from year 2026 to 2027
2026-01-23 11:02:01.669 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 25 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.669 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:01.669 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.669 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 25(Long), 2026(Integer)
2026-01-23 11:02:01.674 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.674 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.674 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.674 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:01.674 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.674 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 25 year 2027: 0.0 days
2026-01-23 11:02:01.674 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.674 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 25(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.680 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.680 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 25 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.680 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.680 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 25(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 114(Long)
2026-01-23 11:02:01.687 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.688 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 25, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 114

2026-01-23 11:02:01.688 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.688 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.688 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 25(Long), 2027(Integer)
2026-01-23 11:02:01.692 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.692 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 25 AND year = 2027

2026-01-23 11:02:01.692 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 25 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.692 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.692 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 25(Long), 2027(Integer), 10(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 130(Long)
2026-01-23 11:02:01.700 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.700 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 25, year = 2027, social_seniority = 10, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 130

2026-01-23 11:02:01.700 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 25 year 2027
2026-01-23 11:02:01.714 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.714 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 26(Long)
2026-01-23 11:02:01.720 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.720 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 26 AND deleted = 0

2026-01-23 11:02:01.720 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.720 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 26(Long), 2027(Integer)
2026-01-23 11:02:01.725 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.725 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 26 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.725 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 26 from year 2026 to 2027
2026-01-23 11:02:01.725 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 26 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.726 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:01.726 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.726 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 26(Long), 2026(Integer)
2026-01-23 11:02:01.731 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.731 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.731 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.731 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:01.731 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.731 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 26 year 2027: 0.0 days
2026-01-23 11:02:01.731 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.731 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 26(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.735 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.735 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 26 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.735 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.736 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 26(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:25(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 115(Long)
2026-01-23 11:02:01.746 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.747 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 26, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:25, expiry_date = 2027-12-31, deleted = 0 WHERE id = 115

2026-01-23 11:02:01.747 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.747 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.747 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 26(Long), 2027(Integer)
2026-01-23 11:02:01.751 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.751 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 26 AND year = 2027

2026-01-23 11:02:01.751 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 26 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.751 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.751 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 26(Long), 2027(Integer), 5(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 131(Long)
2026-01-23 11:02:01.760 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.760 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 26, year = 2027, social_seniority = 5, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 131

2026-01-23 11:02:01.760 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 26 year 2027
2026-01-23 11:02:01.786 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.786 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 27(Long)
2026-01-23 11:02:01.793 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.793 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 27 AND deleted = 0

2026-01-23 11:02:01.793 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.793 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 27(Long), 2027(Integer)
2026-01-23 11:02:01.801 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.801 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 27 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.801 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 27 from year 2026 to 2027
2026-01-23 11:02:01.801 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 27 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.801 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:01.801 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.801 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 27(Long), 2026(Integer)
2026-01-23 11:02:01.807 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.807 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.807 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.807 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:01.807 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.807 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 27 year 2027: 0.0 days
2026-01-23 11:02:01.807 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.807 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 27(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.813 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.813 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 27 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.813 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.813 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 27(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:26(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 116(Long)
2026-01-23 11:02:01.831 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.831 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 27, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:26, expiry_date = 2027-12-31, deleted = 0 WHERE id = 116

2026-01-23 11:02:01.831 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.831 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.831 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 27(Long), 2027(Integer)
2026-01-23 11:02:01.835 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.835 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 27 AND year = 2027

2026-01-23 11:02:01.835 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 27 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.835 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.836 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 27(Long), 2027(Integer), 7(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 132(Long)
2026-01-23 11:02:01.846 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.846 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 27, year = 2027, social_seniority = 7, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 132

2026-01-23 11:02:01.846 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 27 year 2027
2026-01-23 11:02:01.858 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.858 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 28(Long)
2026-01-23 11:02:01.864 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.865 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 28 AND deleted = 0

2026-01-23 11:02:01.865 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.865 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 28(Long), 2027(Integer)
2026-01-23 11:02:01.874 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.874 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 28 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.874 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 28 from year 2026 to 2027
2026-01-23 11:02:01.874 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 28 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.874 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:01.874 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.874 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 28(Long), 2026(Integer)
2026-01-23 11:02:01.880 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.880 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.880 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.880 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:01.880 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.880 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 28 year 2027: 0.0 days
2026-01-23 11:02:01.880 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.880 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 28(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.884 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.884 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 28 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.885 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.885 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 28(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:26(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 117(Long)
2026-01-23 11:02:01.900 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.900 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 28, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:26, expiry_date = 2027-12-31, deleted = 0 WHERE id = 117

2026-01-23 11:02:01.900 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.900 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.901 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 28(Long), 2027(Integer)
2026-01-23 11:02:01.909 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.910 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 28 AND year = 2027

2026-01-23 11:02:01.910 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 28 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.910 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.910 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 28(Long), 2027(Integer), 16(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 133(Long)
2026-01-23 11:02:01.925 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:01.925 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 28, year = 2027, social_seniority = 16, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 133

2026-01-23 11:02:01.925 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 28 year 2027
2026-01-23 11:02:01.951 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:01.951 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 29(Long)
2026-01-23 11:02:01.957 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:01.957 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 29 AND deleted = 0

2026-01-23 11:02:01.957 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:01.957 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 29(Long), 2027(Integer)
2026-01-23 11:02:01.968 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:01.969 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 29 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.969 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 29 from year 2026 to 2027
2026-01-23 11:02:01.969 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 29 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:01.969 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:01.969 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:01.969 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 29(Long), 2026(Integer)
2026-01-23 11:02:01.975 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:01.975 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:01.975 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:01.975 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:01.975 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:01.975 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 29 year 2027: 0.0 days
2026-01-23 11:02:01.975 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:01.975 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 29(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:01.983 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:01.983 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 29 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:01.983 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.984 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 29(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:26(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 118(Long)
2026-01-23 11:02:01.992 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:01.992 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 29, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:26, expiry_date = 2027-12-31, deleted = 0 WHERE id = 118

2026-01-23 11:02:01.992 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:01.992 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:01.992 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 29(Long), 2027(Integer)
2026-01-23 11:02:01.999 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:01.999 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 29 AND year = 2027

2026-01-23 11:02:01.999 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 29 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:01.999 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:01.999 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 29(Long), 2027(Integer), 9(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 134(Long)
2026-01-23 11:02:02.011 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:02.012 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 29, year = 2027, social_seniority = 9, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 134

2026-01-23 11:02:02.012 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 29 year 2027
2026-01-23 11:02:02.031 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:02.031 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 30(Long)
2026-01-23 11:02:02.035 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:02.035 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 30 AND deleted = 0

2026-01-23 11:02:02.036 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:02.036 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 30(Long), 2027(Integer)
2026-01-23 11:02:02.040 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:02.040 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 30 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.040 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 30 from year 2026 to 2027
2026-01-23 11:02:02.040 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 30 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.040 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:02.040 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:02.040 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 30(Long), 2026(Integer)
2026-01-23 11:02:02.046 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:02.046 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:02.046 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:02.046 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:02.046 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:02.046 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 30 year 2027: 0.0 days
2026-01-23 11:02:02.046 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:02.046 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 30(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:02.050 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:02.050 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 30 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:02.050 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.050 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 30(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:26(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 119(Long)
2026-01-23 11:02:02.058 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:02.058 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 30, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:26, expiry_date = 2027-12-31, deleted = 0 WHERE id = 119

2026-01-23 11:02:02.058 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:02.058 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:02.058 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 30(Long), 2027(Integer)
2026-01-23 11:02:02.063 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:02.063 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 30 AND year = 2027

2026-01-23 11:02:02.063 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 30 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:02.063 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.063 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 30(Long), 2027(Integer), 10(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 135(Long)
2026-01-23 11:02:02.073 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:02.073 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 30, year = 2027, social_seniority = 10, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 135

2026-01-23 11:02:02.073 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 30 year 2027
2026-01-23 11:02:02.088 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:02.088 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 31(Long)
2026-01-23 11:02:02.094 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:02.094 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 31 AND deleted = 0

2026-01-23 11:02:02.094 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:02.095 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 31(Long), 2027(Integer)
2026-01-23 11:02:02.101 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:02.101 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 31 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.101 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 31 from year 2026 to 2027
2026-01-23 11:02:02.101 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 31 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.101 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.5 (expires 2027-12-31), BroughtForward 10.0 (expires 2026-12-31)
2026-01-23 11:02:02.102 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:02.102 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 31(Long), 2026(Integer)
2026-01-23 11:02:02.108 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:02.108 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:02.108 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:02.108 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 10.0 days
2026-01-23 11:02:02.108 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.5 days
2026-01-23 11:02:02.108 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 31 year 2027: 0.5 days
2026-01-23 11:02:02.108 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:02.108 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 31(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:02.114 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:02.114 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:02.115 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.115 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 31(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.5(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:26(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 120(Long)
2026-01-23 11:02:02.126 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:02.126 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 31, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.5, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:26, expiry_date = 2027-12-31, deleted = 0 WHERE id = 120

2026-01-23 11:02:02.126 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.5 days (expires 2027-12-31)
2026-01-23 11:02:02.126 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:02.126 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 31(Long), 2027(Integer)
2026-01-23 11:02:02.135 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:02.135 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 31 AND year = 2027

2026-01-23 11:02:02.135 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 31 year 2027: lastYearBalance set to 0.5
2026-01-23 11:02:02.136 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.136 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 31(Long), 2027(Integer), 15(Integer), 10.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.5(BigDecimal), 0.0(BigDecimal), 0(Integer), 136(Long)
2026-01-23 11:02:02.149 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:02.149 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 31, year = 2027, social_seniority = 15, standard_quota = 10.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.5, current_year_used = 0.0, deleted = 0 WHERE id = 136

2026-01-23 11:02:02.150 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 31 year 2027
2026-01-23 11:02:02.169 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:02.170 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 32(Long)
2026-01-23 11:02:02.180 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:02.180 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 32 AND deleted = 0

2026-01-23 11:02:02.180 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:02.180 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 32(Long), 2027(Integer)
2026-01-23 11:02:02.185 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:02.185 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 32 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.185 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 32 from year 2026 to 2027
2026-01-23 11:02:02.185 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 32 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.185 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:02.185 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:02.185 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 32(Long), 2026(Integer)
2026-01-23 11:02:02.189 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:02.189 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:02.189 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:02.189 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:02.189 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:02.189 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 32 year 2027: 0.0 days
2026-01-23 11:02:02.189 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:02.189 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 32(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:02.196 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:02.196 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:02.196 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.196 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 32(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:26(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 121(Long)
2026-01-23 11:02:02.214 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:02.214 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 32, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:26, expiry_date = 2027-12-31, deleted = 0 WHERE id = 121

2026-01-23 11:02:02.214 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:02.214 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:02.214 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 32(Long), 2027(Integer)
2026-01-23 11:02:02.219 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:02.219 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 32 AND year = 2027

2026-01-23 11:02:02.219 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 32 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:02.220 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.220 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 32(Long), 2027(Integer), 8(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 137(Long)
2026-01-23 11:02:02.234 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:02.234 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 32, year = 2027, social_seniority = 8, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 137

2026-01-23 11:02:02.234 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 32 year 2027
2026-01-23 11:02:02.246 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:02.246 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 33(Long)
2026-01-23 11:02:02.252 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:02.252 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 33 AND deleted = 0

2026-01-23 11:02:02.253 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:02.253 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 33(Long), 2027(Integer)
2026-01-23 11:02:02.258 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:02.258 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 33 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.258 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 33 from year 2026 to 2027
2026-01-23 11:02:02.259 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 33 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.259 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:02.259 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:02.259 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 33(Long), 2026(Integer)
2026-01-23 11:02:02.264 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 7
2026-01-23 11:02:02.264 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:02.264 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 7 records in year 2026
2026-01-23 11:02:02.264 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 0.5 days
2026-01-23 11:02:02.264 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:02.264 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 33 year 2027: 0.0 days
2026-01-23 11:02:02.264 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:02.264 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 33(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:02.272 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 0
2026-01-23 11:02:02.272 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:02.272 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==>  Preparing: INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, COALESCE(?, 0))
2026-01-23 11:02:02.272 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - ==> Parameters: 33(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-23T11:02:02.272143(LocalDateTime), 2027-12-31(LocalDate), 0(Integer)
2026-01-23 11:02:02.283 DEBUG c.l.system.mapper.LeaveRecordMapper.insertRecord - <==    Updates: 1
2026-01-23 11:02:02.283 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.insertRecord
SQL         : INSERT INTO leave_record (user_id, start_date, end_date, days, type, remarks, create_time, expiry_date, deleted) VALUES (33, 2027-01-01, 2027-01-01, 0.0, 'CARRY_OVER', '上年结余年假结转 (过期: 2027-12-31)', 2026-01-23T11:02:02.272143, 2027-12-31, COALESCE(0, 0))

2026-01-23 11:02:02.283 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Created carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:02.283 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:02.284 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 33(Long), 2027(Integer)
2026-01-23 11:02:02.287 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:02.287 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 33 AND year = 2027

2026-01-23 11:02:02.287 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 33 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:02.287 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.287 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 33(Long), 2027(Integer), 7(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 138(Long)
2026-01-23 11:02:02.296 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:02.296 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 33, year = 2027, social_seniority = 7, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 138

2026-01-23 11:02:02.296 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 33 year 2027
2026-01-23 11:02:02.315 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:02.315 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 34(Long)
2026-01-23 11:02:02.322 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:02.322 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 34 AND deleted = 0

2026-01-23 11:02:02.322 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:02.322 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 34(Long), 2027(Integer)
2026-01-23 11:02:02.328 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:02.328 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 34 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.328 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 34 from year 2026 to 2027
2026-01-23 11:02:02.328 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 34 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.328 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:02.329 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:02.329 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 34(Long), 2026(Integer)
2026-01-23 11:02:02.333 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:02.333 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:02.333 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:02.333 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:02.333 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:02.333 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 34 year 2027: 0.0 days
2026-01-23 11:02:02.333 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:02.333 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 34(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:02.336 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:02.336 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:02.337 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.337 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 34(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:26(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 123(Long)
2026-01-23 11:02:02.349 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:02.349 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 34, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:26, expiry_date = 2027-12-31, deleted = 0 WHERE id = 123

2026-01-23 11:02:02.349 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:02.349 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:02.349 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 34(Long), 2027(Integer)
2026-01-23 11:02:02.354 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:02.354 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 34 AND year = 2027

2026-01-23 11:02:02.354 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 34 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:02.354 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.354 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 34(Long), 2027(Integer), 6(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 139(Long)
2026-01-23 11:02:02.364 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:02.364 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 34, year = 2027, social_seniority = 6, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 139

2026-01-23 11:02:02.364 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 34 year 2027
2026-01-23 11:02:02.376 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:02.376 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 35(Long)
2026-01-23 11:02:02.384 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:02.384 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 35 AND deleted = 0

2026-01-23 11:02:02.384 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? - 1 AND deleted = 0
2026-01-23 11:02:02.384 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - ==> Parameters: 35(Long), 2027(Integer)
2026-01-23 11:02:02.389 DEBUG c.l.s.m.LeaveAccountMapper.selectLastYearAccount - <==      Total: 1
2026-01-23 11:02:02.389 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 35 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.389 INFO  com.leave.system.service.impl.LeaveServiceImpl - 🔍 Calculating carry-over for user 35 from year 2026 to 2027
2026-01-23 11:02:02.389 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectLastYearAccount
SQL         : SELECT * FROM leave_account WHERE user_id = 35 AND year = 2027 - 1 AND deleted = 0

2026-01-23 11:02:02.389 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📊 Last year base: Quota 0.0 (expires 2027-12-31), BroughtForward 5.0 (expires 2026-12-31)
2026-01-23 11:02:02.390 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? AND deleted = 0
2026-01-23 11:02:02.390 DEBUG c.l.s.m.L.selectRecordsForCarryOver - ==> Parameters: 35(Long), 2026(Integer)
2026-01-23 11:02:02.394 DEBUG c.l.s.m.L.selectRecordsForCarryOver - <==      Total: 2
2026-01-23 11:02:02.394 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsForCarryOver
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND YEAR(start_date) = 2026 AND deleted = 0

2026-01-23 11:02:02.394 INFO  com.leave.system.service.impl.LeaveServiceImpl - 📋 Found 2 records in year 2026
2026-01-23 11:02:02.394 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ⏭️  Expired credit from bucket 2026-12-31: 5.0 days
2026-01-23 11:02:02.394 INFO  com.leave.system.service.impl.LeaveServiceImpl -   ➕ Carried over credit from bucket 2027-12-31: 0.0 days
2026-01-23 11:02:02.394 INFO  com.leave.system.service.impl.LeaveServiceImpl - 💰 Final carry-over for user 35 year 2027: 0.0 days
2026-01-23 11:02:02.394 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND type = 'CARRY_OVER' AND start_date = ?
2026-01-23 11:02:02.394 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - ==> Parameters: 35(Long), 2027-01-01(LocalDate)
2026-01-23 11:02:02.399 DEBUG c.l.s.m.LeaveRecordMapper.selectCarryOverRecord - <==      Total: 1
2026-01-23 11:02:02.399 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectCarryOverRecord
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND type = 'CARRY_OVER' AND start_date = 2027-01-01

2026-01-23 11:02:02.399 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==>  Preparing: UPDATE leave_record SET user_id = ?, start_date = ?, end_date = ?, days = ?, type = ?, remarks = ?, create_time = ?, expiry_date = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.399 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - ==> Parameters: 35(Long), 2027-01-01(LocalDate), 2027-01-01(LocalDate), 0.0(BigDecimal), CARRY_OVER(String), 上年结余年假结转 (过期: 2027-12-31)(String), 2026-01-08T08:47:26(LocalDateTime), 2027-12-31(LocalDate), 0(Integer), 124(Long)
2026-01-23 11:02:02.408 DEBUG c.l.system.mapper.LeaveRecordMapper.updateRecord - <==    Updates: 1
2026-01-23 11:02:02.408 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.updateRecord
SQL         : UPDATE leave_record SET user_id = 35, start_date = 2027-01-01, end_date = 2027-01-01, days = 0.0, type = 'CARRY_OVER', remarks = '上年结余年假结转 (过期: 2027-12-31)', create_time = 2026-01-08T08:47:26, expiry_date = 2027-12-31, deleted = 0 WHERE id = 124

2026-01-23 11:02:02.408 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Updated carry-over record: 0.0 days (expires 2027-12-31)
2026-01-23 11:02:02.408 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ?
2026-01-23 11:02:02.408 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - ==> Parameters: 35(Long), 2027(Integer)
2026-01-23 11:02:02.413 DEBUG c.l.s.m.L.selectAccountByUserIdAndYearIncludeDeleted - <==      Total: 1
2026-01-23 11:02:02.414 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYearIncludeDeleted
SQL         : SELECT * FROM leave_account WHERE user_id = 35 AND year = 2027

2026-01-23 11:02:02.414 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updating existing account for user 35 year 2027: lastYearBalance set to 0.0
2026-01-23 11:02:02.414 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:02:02.414 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 35(Long), 2027(Integer), 9(Integer), 5.0(BigDecimal), 0(Integer), 0.0(BigDecimal), 0.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 140(Long)
2026-01-23 11:02:02.424 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:02:02.424 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 35, year = 2027, social_seniority = 9, standard_quota = 5.0, days_employed = 0, actual_quota = 0.0, last_year_balance = 0.0, current_year_used = 0.0, deleted = 0 WHERE id = 140

2026-01-23 11:02:02.424 INFO  com.leave.system.service.impl.LeaveServiceImpl - Updated account for user 35 year 2027
2026-01-23 11:02:02.435 INFO  com.leave.system.scheduled.ScheduledTasks - ✅ Batch initialization completed: 35 success, 0 failed out of 35 total users
2026-01-23 11:02:02.435 INFO  com.leave.system.service.impl.SysJobServiceImpl - Job executed successfully: 年假账户批量初始化
2026-01-23 11:02:08.799 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:02:08.799 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/available-years
2026-01-23 11:02:08.816 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:02:08.816 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:02:08.817 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:02:08.817 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:02:08.822 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:02:08.822 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:02:08.822 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:02:08.822 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:02:08.826 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:02:08.830 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:02:08.830 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:02:08.830 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 1, 10]
2026-01-23 11:02:08.831 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/available-years
2026-01-23 11:02:08.831 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/available-years
2026-01-23 11:02:08.831 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.getAvailableYears
2026-01-23 11:02:08.831 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 11:02:08.831 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==>  Preparing: SELECT DISTINCT year FROM leave_account ORDER BY year DESC
2026-01-23 11:02:08.832 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==> Parameters: 
2026-01-23 11:02:08.832 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:02:08.832 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:02:08.836 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - <==      Total: 3
2026-01-23 11:02:08.836 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:02:08.837 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectDistinctYears
SQL         : SELECT DISTINCT year FROM leave_account ORDER BY year DESC

2026-01-23 11:02:08.837 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:08.837 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[2027,2026,2025]}
2026-01-23 11:02:08.837 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:02:08.837 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:02:08.842 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:02:08.842 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:08.842 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:08.842 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:02:08.847 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:08.847 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:02:08.847 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:08.847 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:02:08.852 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:08.852 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 11:02:08.852 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 11:02:08.852 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:08.852 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:02:08.870 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 5
2026-01-23 11:02:08.870 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:08.870 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:08.870 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:02:08.874 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:08.874 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:02:08.875 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:08.875 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:02:08.885 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:08.885 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2026 AND deleted = 0

2026-01-23 11:02:08.885 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 2 year 2026 based on today 2026-01-23
2026-01-23 11:02:08.885 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:08.886 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:02:08.892 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:08.892 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:08.892 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:08.892 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:02:08.899 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:08.899 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:02:08.899 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:08.900 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:02:08.904 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:08.904 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2026 AND deleted = 0

2026-01-23 11:02:08.904 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 3 year 2026 based on today 2026-01-23
2026-01-23 11:02:08.904 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:08.904 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:02:08.910 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:08.910 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:08.911 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:08.911 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:02:08.915 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:08.915 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:02:08.915 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:08.915 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:02:08.920 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:08.920 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2026 AND deleted = 0

2026-01-23 11:02:08.920 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 4 year 2026 based on today 2026-01-23
2026-01-23 11:02:08.920 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:08.920 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:02:08.925 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:08.925 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:08.926 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:08.926 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:02:08.929 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:08.929 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:02:08.929 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:08.929 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:02:08.934 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:08.934 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2026 AND deleted = 0

2026-01-23 11:02:08.934 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 5 year 2026 based on today 2026-01-23
2026-01-23 11:02:08.935 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:08.935 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:02:08.940 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:08.940 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:08.941 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:08.941 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:02:08.946 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:08.946 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:02:08.946 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:08.946 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:02:08.951 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:08.951 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2026 AND deleted = 0

2026-01-23 11:02:08.951 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 6 year 2026 based on today 2026-01-23
2026-01-23 11:02:08.951 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:08.951 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:02:08.957 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:08.957 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:08.957 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:08.957 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:02:08.966 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:08.966 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:02:08.966 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:08.966 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:02:08.971 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:08.971 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2026 AND deleted = 0

2026-01-23 11:02:08.971 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 7 year 2026 based on today 2026-01-23
2026-01-23 11:02:08.971 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:08.971 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:02:08.978 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:08.978 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:08.978 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:08.978 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:02:08.984 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:08.984 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:02:08.984 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:08.984 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:02:08.990 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:08.990 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2026 AND deleted = 0

2026-01-23 11:02:08.990 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 8 year 2026 based on today 2026-01-23
2026-01-23 11:02:08.990 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:08.990 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:02:08.999 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:08.999 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:08.999 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:08.999 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:02:09.006 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:09.006 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:02:09.006 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:09.006 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:02:09.012 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:09.012 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2026 AND deleted = 0

2026-01-23 11:02:09.012 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 9 year 2026 based on today 2026-01-23
2026-01-23 11:02:09.012 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:09.012 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:02:09.031 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:09.031 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:09.031 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:09.031 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:02:09.042 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:09.043 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:02:09.043 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:09.043 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:02:09.049 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:09.049 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2026 AND deleted = 0

2026-01-23 11:02:09.049 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 10 year 2026 based on today 2026-01-23
2026-01-23 11:02:09.049 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:09.050 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:02:09.053 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:09.053 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:09.053 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":3.0,"deleted":null,"totalBalance":-0.5,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":72,"userId":2,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":57,"userId":2,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":18,"userId":2,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":73,"userId":3,"year":2026,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":58,"userId":3,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":19,"userId":3,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":74,"userId":4,"year":2026,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":12.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":59,"userId":4,"startDate":"2026-12-31","endDate":"2026-12-31","days":-12.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":20,"userId":4,"startDate":"2026-01-01","endDate":"2026-01-01","days":12.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":75,"userId":5,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":-2.0,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":55,"userId":5,"startDate":"2026-01-08","endDate":"2026-01-08","days":3.5,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2027-12-31","createTime":"2026-01-08T08:42:17","deleted":0},{"id":21,"userId":5,"startDate":"2026-01-01","endDate":"2026-01-01","days":-2.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":76,"userId":6,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":60,"userId":6,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":22,"userId":6,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":77,"userId":7,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":61,"userId":7,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":23,"userId":7,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":78,"userId":8,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":62,"userId":8,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":24,"userId":8,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":79,"userId":9,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":63,"userId":9,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":25,"userId":9,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":80,"userId":10,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":64,"userId":10,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":26,"userId":10,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:02:10.960 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2027&current=1&size=10
2026-01-23 11:02:10.975 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:02:10.975 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:02:10.982 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:02:10.982 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:02:10.987 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2027&current=1&size=10
2026-01-23 11:02:10.988 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:02:10.988 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:02:10.988 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2027, 1, 10]
2026-01-23 11:02:10.992 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:02:10.992 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:02:10.997 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:02:10.997 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:10.998 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:02:10.998 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:02:11.004 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:02:11.005 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:11.005 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:11.005 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:02:11.009 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:11.009 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:02:11.009 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:11.009 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2027(Integer)
2026-01-23 11:02:11.013 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:11.013 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2027 AND deleted = 0

2026-01-23 11:02:11.014 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:11.014 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2027(Integer)
2026-01-23 11:02:11.018 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:11.018 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:11.018 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:11.018 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:02:11.023 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:11.023 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:02:11.023 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:11.023 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2027(Integer)
2026-01-23 11:02:11.027 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:11.027 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2027 AND deleted = 0

2026-01-23 11:02:11.027 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:11.027 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2027(Integer)
2026-01-23 11:02:11.032 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:11.032 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:11.032 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:11.032 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:02:11.037 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:11.037 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:02:11.037 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:11.037 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2027(Integer)
2026-01-23 11:02:11.042 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:11.042 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2027 AND deleted = 0

2026-01-23 11:02:11.042 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:11.042 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2027(Integer)
2026-01-23 11:02:11.046 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:11.046 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:11.046 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:11.047 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:02:11.051 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:11.051 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:02:11.052 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:11.052 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2027(Integer)
2026-01-23 11:02:11.075 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:11.075 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2027 AND deleted = 0

2026-01-23 11:02:11.075 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:11.075 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2027(Integer)
2026-01-23 11:02:11.081 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:11.081 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:11.082 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:11.082 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:02:11.087 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:11.087 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:02:11.087 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:11.088 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2027(Integer)
2026-01-23 11:02:11.099 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:11.101 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2027 AND deleted = 0

2026-01-23 11:02:11.102 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:11.102 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2027(Integer)
2026-01-23 11:02:11.113 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:11.113 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:11.114 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:11.114 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:02:11.121 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:11.122 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:02:11.122 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:11.122 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2027(Integer)
2026-01-23 11:02:11.135 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:11.135 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2027 AND deleted = 0

2026-01-23 11:02:11.136 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:11.136 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2027(Integer)
2026-01-23 11:02:11.144 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:11.145 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:11.146 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:11.146 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:02:11.151 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:11.151 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:02:11.152 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:11.152 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2027(Integer)
2026-01-23 11:02:11.156 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:11.156 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2027 AND deleted = 0

2026-01-23 11:02:11.157 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:11.157 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2027(Integer)
2026-01-23 11:02:11.162 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:11.163 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:11.163 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:11.163 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:02:11.168 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:11.168 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:02:11.168 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:11.168 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2027(Integer)
2026-01-23 11:02:11.172 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:11.172 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2027 AND deleted = 0

2026-01-23 11:02:11.172 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:11.172 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2027(Integer)
2026-01-23 11:02:11.178 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:11.179 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:11.179 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:11.179 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:02:11.185 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:11.185 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:02:11.185 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:11.186 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2027(Integer)
2026-01-23 11:02:11.190 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:11.190 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2027 AND deleted = 0

2026-01-23 11:02:11.191 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:11.191 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2027(Integer)
2026-01-23 11:02:11.195 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:11.195 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:11.196 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:11.196 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:02:11.200 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:11.200 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:02:11.200 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:11.200 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2027(Integer)
2026-01-23 11:02:11.204 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:11.204 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2027 AND deleted = 0

2026-01-23 11:02:11.204 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:11.204 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2027(Integer)
2026-01-23 11:02:11.208 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:11.208 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:11.209 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":106,"userId":1,"year":2027,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":90,"userId":1,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":107,"userId":2,"year":2027,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":91,"userId":2,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":108,"userId":3,"year":2027,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":92,"userId":3,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":109,"userId":4,"year":2027,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":93,"userId":4,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":110,"userId":5,"year":2027,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":1.5,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":94,"userId":5,"startDate":"2027-01-01","endDate":"2027-01-01","days":1.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":111,"userId":6,"year":2027,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":95,"userId":6,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":112,"userId":7,"year":2027,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":96,"userId":7,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":113,"userId":8,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":97,"userId":8,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":114,"userId":9,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":98,"userId":9,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":115,"userId":10,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":99,"userId":10,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:02:14.763 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2027&current=4&size=10
2026-01-23 11:02:14.770 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:02:14.771 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:02:14.775 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:02:14.775 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:02:14.781 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2027&current=4&size=10
2026-01-23 11:02:14.783 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:02:14.783 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:02:14.783 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2027, 4, 10]
2026-01-23 11:02:14.787 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:02:14.787 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:02:14.791 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:02:14.791 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:14.792 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?,?
2026-01-23 11:02:14.792 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 30(Long), 10(Long)
2026-01-23 11:02:14.797 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 5
2026-01-23 11:02:14.797 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:14.797 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:14.797 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 31(Long)
2026-01-23 11:02:14.801 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:14.802 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 31 AND deleted = 0

2026-01-23 11:02:14.802 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:14.802 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 31(Long), 2027(Integer)
2026-01-23 11:02:14.806 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:14.806 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 31 AND year = 2027 AND deleted = 0

2026-01-23 11:02:14.806 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:14.806 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 31(Long), 2027(Integer)
2026-01-23 11:02:14.810 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:14.810 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:14.811 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:14.811 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 32(Long)
2026-01-23 11:02:14.815 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:14.816 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 32 AND deleted = 0

2026-01-23 11:02:14.816 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:14.817 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 32(Long), 2027(Integer)
2026-01-23 11:02:14.824 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:14.824 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 32 AND year = 2027 AND deleted = 0

2026-01-23 11:02:14.824 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:14.824 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 32(Long), 2027(Integer)
2026-01-23 11:02:14.829 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:14.829 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:14.829 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:14.830 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 33(Long)
2026-01-23 11:02:14.834 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:14.834 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 33 AND deleted = 0

2026-01-23 11:02:14.834 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:14.834 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 33(Long), 2027(Integer)
2026-01-23 11:02:14.838 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:14.838 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 33 AND year = 2027 AND deleted = 0

2026-01-23 11:02:14.839 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:14.839 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 33(Long), 2027(Integer)
2026-01-23 11:02:14.842 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:14.842 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:14.843 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:14.843 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 34(Long)
2026-01-23 11:02:14.848 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:14.848 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 34 AND deleted = 0

2026-01-23 11:02:14.848 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:14.848 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 34(Long), 2027(Integer)
2026-01-23 11:02:14.852 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:14.853 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 34 AND year = 2027 AND deleted = 0

2026-01-23 11:02:14.853 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:14.853 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 34(Long), 2027(Integer)
2026-01-23 11:02:14.857 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:14.857 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:14.858 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:14.858 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 35(Long)
2026-01-23 11:02:14.863 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:14.863 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 35 AND deleted = 0

2026-01-23 11:02:14.863 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:14.863 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 35(Long), 2027(Integer)
2026-01-23 11:02:14.869 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:14.869 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 35 AND year = 2027 AND deleted = 0

2026-01-23 11:02:14.869 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:14.869 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 35(Long), 2027(Integer)
2026-01-23 11:02:14.873 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:14.873 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:14.874 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":136,"userId":31,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yaoyan","realName":"要妍","employeeNumber":"CBJ-082","entryDate":"2022-03-07","records":[{"id":120,"userId":31,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:26","deleted":0}]},{"id":137,"userId":32,"year":2027,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"renzhipeng","realName":"任志鹏","employeeNumber":"CBJ-092","entryDate":"2022-03-30","records":[{"id":121,"userId":32,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:26","deleted":0}]},{"id":138,"userId":33,"year":2027,"socialSeniority":7,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"zhangningbo","realName":"张宁博","employeeNumber":"CBJ-104","entryDate":"2022-06-21","records":[{"id":133,"userId":33,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-23T11:02:02","deleted":0}]},{"id":139,"userId":34,"year":2027,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"xubin","realName":"许滨","employeeNumber":"CBJ-106","entryDate":"2023-02-13","records":[{"id":123,"userId":34,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:26","deleted":0}]},{"id":140,"userId":35,"year":2027,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"xiaonan","realName":"肖南","employeeNumber":"CBJ-108","entryDate":"2023-02-22","records":[{"id":124,"userId":35,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:26","deleted":0}]}],"total":35,"size":10,"current":4,"pages":4}}
2026-01-23 11:02:18.773 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2027&current=1&size=10
2026-01-23 11:02:18.998 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:02:18.998 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:02:19.008 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:02:19.008 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:02:19.013 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2027&current=1&size=10
2026-01-23 11:02:19.014 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:02:19.014 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:02:19.014 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2027, 1, 10]
2026-01-23 11:02:19.016 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:02:19.016 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:02:19.025 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:02:19.025 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:19.025 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:02:19.025 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:02:19.031 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:02:19.031 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:19.031 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:19.031 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:02:19.037 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:19.037 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:02:19.037 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:19.037 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2027(Integer)
2026-01-23 11:02:19.050 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:19.050 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2027 AND deleted = 0

2026-01-23 11:02:19.050 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:19.050 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2027(Integer)
2026-01-23 11:02:19.059 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:19.059 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:19.060 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:19.060 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:02:19.065 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:19.065 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:02:19.066 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:19.066 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2027(Integer)
2026-01-23 11:02:19.080 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:19.080 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2027 AND deleted = 0

2026-01-23 11:02:19.081 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:19.081 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2027(Integer)
2026-01-23 11:02:19.086 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:19.086 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:19.087 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:19.087 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:02:19.098 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:19.098 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:02:19.099 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:19.099 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2027(Integer)
2026-01-23 11:02:19.104 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:19.104 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2027 AND deleted = 0

2026-01-23 11:02:19.104 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:19.105 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2027(Integer)
2026-01-23 11:02:19.110 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:19.110 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:19.110 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:19.110 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:02:19.149 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:19.149 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:02:19.149 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:19.150 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2027(Integer)
2026-01-23 11:02:19.161 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:19.162 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2027 AND deleted = 0

2026-01-23 11:02:19.162 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:19.162 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2027(Integer)
2026-01-23 11:02:19.172 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:19.173 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:19.173 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:19.173 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:02:19.180 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:19.181 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:02:19.181 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:19.181 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2027(Integer)
2026-01-23 11:02:19.188 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:19.188 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2027 AND deleted = 0

2026-01-23 11:02:19.188 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:19.188 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2027(Integer)
2026-01-23 11:02:19.193 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:19.193 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:19.194 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:19.194 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:02:19.206 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:19.207 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:02:19.207 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:19.207 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2027(Integer)
2026-01-23 11:02:19.238 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:19.238 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2027 AND deleted = 0

2026-01-23 11:02:19.238 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:19.239 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2027(Integer)
2026-01-23 11:02:19.243 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:19.243 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:19.243 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:19.243 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:02:19.247 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:19.248 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:02:19.248 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:19.248 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2027(Integer)
2026-01-23 11:02:19.252 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:19.252 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2027 AND deleted = 0

2026-01-23 11:02:19.252 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:19.252 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2027(Integer)
2026-01-23 11:02:19.256 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:19.256 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:19.256 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:19.257 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:02:19.261 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:19.261 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:02:19.261 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:19.261 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2027(Integer)
2026-01-23 11:02:19.267 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:19.267 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2027 AND deleted = 0

2026-01-23 11:02:19.267 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:19.267 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2027(Integer)
2026-01-23 11:02:19.275 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:19.275 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:19.275 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:19.275 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:02:19.280 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:19.280 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:02:19.281 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:19.281 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2027(Integer)
2026-01-23 11:02:19.285 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:19.285 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2027 AND deleted = 0

2026-01-23 11:02:19.285 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:19.285 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2027(Integer)
2026-01-23 11:02:19.511 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:19.511 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:19.512 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:19.512 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:02:19.539 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:19.540 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:02:19.540 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:19.540 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2027(Integer)
2026-01-23 11:02:19.545 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:19.545 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2027 AND deleted = 0

2026-01-23 11:02:19.546 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:19.546 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2027(Integer)
2026-01-23 11:02:19.552 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:19.552 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:19.553 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":106,"userId":1,"year":2027,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":90,"userId":1,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":107,"userId":2,"year":2027,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":91,"userId":2,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":108,"userId":3,"year":2027,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":92,"userId":3,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":109,"userId":4,"year":2027,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":93,"userId":4,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":110,"userId":5,"year":2027,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":1.5,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":94,"userId":5,"startDate":"2027-01-01","endDate":"2027-01-01","days":1.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":111,"userId":6,"year":2027,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":95,"userId":6,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":112,"userId":7,"year":2027,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":96,"userId":7,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":113,"userId":8,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":97,"userId":8,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":114,"userId":9,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":98,"userId":9,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":115,"userId":10,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":99,"userId":10,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:02:23.507 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:02:23.515 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:02:23.515 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:02:23.520 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:02:23.520 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:02:23.524 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:02:23.525 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:02:23.525 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:02:23.525 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 1, 10]
2026-01-23 11:02:23.528 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:02:23.528 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:02:23.536 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:02:23.536 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:23.536 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:02:23.537 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:02:23.541 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:02:23.542 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:23.542 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:23.542 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:02:23.546 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:23.547 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:02:23.547 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:23.547 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:02:23.551 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:23.552 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 11:02:23.552 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 11:02:23.552 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:23.552 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:02:23.556 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 5
2026-01-23 11:02:23.556 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:23.557 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:23.557 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:02:23.561 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:23.561 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:02:23.561 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:23.562 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:02:23.566 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:23.566 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2026 AND deleted = 0

2026-01-23 11:02:23.567 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 2 year 2026 based on today 2026-01-23
2026-01-23 11:02:23.567 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:23.567 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:02:23.570 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:23.570 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:23.571 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:23.571 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:02:23.575 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:23.575 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:02:23.576 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:23.576 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:02:23.580 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:23.580 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2026 AND deleted = 0

2026-01-23 11:02:23.580 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 3 year 2026 based on today 2026-01-23
2026-01-23 11:02:23.580 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:23.580 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:02:23.585 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:23.585 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:23.585 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:23.585 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:02:23.590 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:23.590 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:02:23.590 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:23.590 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:02:23.594 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:23.595 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2026 AND deleted = 0

2026-01-23 11:02:23.595 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 4 year 2026 based on today 2026-01-23
2026-01-23 11:02:23.595 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:23.595 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:02:23.600 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:23.600 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:23.600 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:23.601 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:02:23.604 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:23.605 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:02:23.605 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:23.605 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:02:23.609 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:23.609 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2026 AND deleted = 0

2026-01-23 11:02:23.610 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 5 year 2026 based on today 2026-01-23
2026-01-23 11:02:23.610 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:23.610 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:02:23.615 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:23.615 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:23.615 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:23.615 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:02:23.619 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:23.620 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:02:23.620 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:23.620 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:02:23.625 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:23.626 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2026 AND deleted = 0

2026-01-23 11:02:23.626 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 6 year 2026 based on today 2026-01-23
2026-01-23 11:02:23.626 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:23.626 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:02:23.631 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:23.631 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:23.631 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:23.631 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:02:23.639 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:23.639 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:02:23.640 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:23.640 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:02:23.646 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:23.647 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2026 AND deleted = 0

2026-01-23 11:02:23.647 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 7 year 2026 based on today 2026-01-23
2026-01-23 11:02:23.647 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:23.647 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:02:23.652 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:23.652 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:23.652 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:23.652 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:02:23.657 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:23.658 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:02:23.658 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:23.658 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:02:23.664 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:23.665 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2026 AND deleted = 0

2026-01-23 11:02:23.665 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 8 year 2026 based on today 2026-01-23
2026-01-23 11:02:23.665 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:23.665 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:02:23.669 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:23.670 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:23.670 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:23.670 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:02:23.677 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:23.677 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:02:23.678 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:23.678 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:02:23.685 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:23.686 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2026 AND deleted = 0

2026-01-23 11:02:23.686 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 9 year 2026 based on today 2026-01-23
2026-01-23 11:02:23.686 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:23.686 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:02:23.690 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:23.691 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:23.691 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:23.691 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:02:23.695 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:23.696 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:02:23.696 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:23.696 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:02:23.700 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:23.700 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2026 AND deleted = 0

2026-01-23 11:02:23.701 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 10 year 2026 based on today 2026-01-23
2026-01-23 11:02:23.701 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:23.701 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:02:23.705 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:23.706 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:23.707 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":3.0,"deleted":null,"totalBalance":-0.5,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":72,"userId":2,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":57,"userId":2,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":18,"userId":2,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":73,"userId":3,"year":2026,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":58,"userId":3,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":19,"userId":3,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":74,"userId":4,"year":2026,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":12.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":59,"userId":4,"startDate":"2026-12-31","endDate":"2026-12-31","days":-12.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":20,"userId":4,"startDate":"2026-01-01","endDate":"2026-01-01","days":12.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":75,"userId":5,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":-2.0,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":55,"userId":5,"startDate":"2026-01-08","endDate":"2026-01-08","days":3.5,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2027-12-31","createTime":"2026-01-08T08:42:17","deleted":0},{"id":21,"userId":5,"startDate":"2026-01-01","endDate":"2026-01-01","days":-2.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":76,"userId":6,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":60,"userId":6,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":22,"userId":6,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":77,"userId":7,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":61,"userId":7,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":23,"userId":7,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":78,"userId":8,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":62,"userId":8,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":24,"userId":8,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":79,"userId":9,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":63,"userId":9,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":25,"userId":9,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":80,"userId":10,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":64,"userId":10,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":26,"userId":10,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:02:32.507 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2027&current=1&size=10
2026-01-23 11:02:32.513 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:02:32.514 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:02:32.520 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:02:32.520 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:02:32.523 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2027&current=1&size=10
2026-01-23 11:02:32.524 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:02:32.524 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:02:32.524 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2027, 1, 10]
2026-01-23 11:02:32.527 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:02:32.527 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:02:32.531 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:02:32.532 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:32.532 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:02:32.532 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:02:32.538 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:02:32.538 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:32.538 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:32.538 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:02:32.542 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:32.542 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:02:32.543 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:32.543 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2027(Integer)
2026-01-23 11:02:32.547 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:32.547 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2027 AND deleted = 0

2026-01-23 11:02:32.547 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:32.547 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2027(Integer)
2026-01-23 11:02:32.551 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:32.551 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:32.552 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:32.552 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:02:32.556 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:32.556 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:02:32.556 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:32.556 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2027(Integer)
2026-01-23 11:02:32.565 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:32.566 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2027 AND deleted = 0

2026-01-23 11:02:32.566 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:32.566 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2027(Integer)
2026-01-23 11:02:32.573 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:32.573 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:32.573 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:32.573 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:02:32.579 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:32.580 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:02:32.580 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:32.580 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2027(Integer)
2026-01-23 11:02:32.586 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:32.586 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2027 AND deleted = 0

2026-01-23 11:02:32.586 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:32.586 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2027(Integer)
2026-01-23 11:02:32.590 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:32.591 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:32.591 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:32.591 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:02:32.605 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:32.606 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:02:32.606 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:32.606 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2027(Integer)
2026-01-23 11:02:32.618 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:32.618 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2027 AND deleted = 0

2026-01-23 11:02:32.619 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:32.619 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2027(Integer)
2026-01-23 11:02:32.628 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:32.629 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:32.629 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:32.629 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:02:32.653 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:32.653 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:02:32.653 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:32.653 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2027(Integer)
2026-01-23 11:02:32.660 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:32.660 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2027 AND deleted = 0

2026-01-23 11:02:32.660 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:32.661 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2027(Integer)
2026-01-23 11:02:32.667 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:32.667 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:32.667 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:32.667 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:02:32.672 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:32.672 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:02:32.672 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:32.673 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2027(Integer)
2026-01-23 11:02:32.677 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:32.677 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2027 AND deleted = 0

2026-01-23 11:02:32.677 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:32.677 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2027(Integer)
2026-01-23 11:02:32.681 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:32.682 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:32.682 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:32.682 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:02:32.706 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:32.706 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:02:32.706 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:32.707 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2027(Integer)
2026-01-23 11:02:32.720 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:32.720 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2027 AND deleted = 0

2026-01-23 11:02:32.720 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:32.720 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2027(Integer)
2026-01-23 11:02:32.731 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:32.732 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:32.732 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:32.733 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:02:32.743 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:32.743 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:02:32.743 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:32.743 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2027(Integer)
2026-01-23 11:02:32.766 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:32.767 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2027 AND deleted = 0

2026-01-23 11:02:32.767 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:32.767 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2027(Integer)
2026-01-23 11:02:32.778 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:32.778 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:32.779 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:32.779 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:02:32.783 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:32.783 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:02:32.783 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:32.783 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2027(Integer)
2026-01-23 11:02:32.787 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:32.788 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2027 AND deleted = 0

2026-01-23 11:02:32.788 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:32.788 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2027(Integer)
2026-01-23 11:02:32.794 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:32.795 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:32.795 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:32.795 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:02:32.808 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:32.809 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:02:32.809 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:32.809 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2027(Integer)
2026-01-23 11:02:32.821 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:32.822 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2027 AND deleted = 0

2026-01-23 11:02:32.822 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:32.822 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2027(Integer)
2026-01-23 11:02:32.830 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:02:32.830 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:02:32.830 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":106,"userId":1,"year":2027,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":90,"userId":1,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":107,"userId":2,"year":2027,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":91,"userId":2,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":108,"userId":3,"year":2027,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":92,"userId":3,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":109,"userId":4,"year":2027,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":93,"userId":4,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":110,"userId":5,"year":2027,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":1.5,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":94,"userId":5,"startDate":"2027-01-01","endDate":"2027-01-01","days":1.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":111,"userId":6,"year":2027,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":95,"userId":6,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":112,"userId":7,"year":2027,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":96,"userId":7,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":113,"userId":8,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":97,"userId":8,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":114,"userId":9,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":98,"userId":9,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":115,"userId":10,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":99,"userId":10,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:02:35.686 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:02:35.697 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:02:35.697 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:02:35.702 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:02:35.702 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:02:35.705 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:02:35.706 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:02:35.706 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:02:35.706 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 1, 10]
2026-01-23 11:02:35.708 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:02:35.708 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:02:35.714 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:02:35.714 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:35.715 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:02:35.715 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:02:35.721 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:02:35.721 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:02:35.721 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:35.721 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:02:35.725 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:35.725 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:02:35.726 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:35.726 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:02:35.730 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:35.730 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 11:02:35.730 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 11:02:35.731 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:35.731 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:02:35.737 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 5
2026-01-23 11:02:35.738 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:35.738 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:35.738 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:02:35.743 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:35.743 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:02:35.743 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:35.743 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:02:35.747 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:35.747 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2026 AND deleted = 0

2026-01-23 11:02:35.747 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 2 year 2026 based on today 2026-01-23
2026-01-23 11:02:35.748 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:35.748 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:02:35.752 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:35.752 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:35.752 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:35.752 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:02:35.757 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:35.757 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:02:35.757 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:35.757 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:02:35.761 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:35.761 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2026 AND deleted = 0

2026-01-23 11:02:35.761 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 3 year 2026 based on today 2026-01-23
2026-01-23 11:02:35.762 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:35.762 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:02:35.766 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:35.766 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:35.766 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:35.766 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:02:35.770 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:35.771 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:02:35.771 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:35.771 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:02:35.775 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:35.775 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2026 AND deleted = 0

2026-01-23 11:02:35.776 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 4 year 2026 based on today 2026-01-23
2026-01-23 11:02:35.776 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:35.776 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:02:35.782 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:35.783 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:35.783 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:35.783 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:02:35.788 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:35.788 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:02:35.788 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:35.789 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:02:35.792 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:35.793 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2026 AND deleted = 0

2026-01-23 11:02:35.793 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 5 year 2026 based on today 2026-01-23
2026-01-23 11:02:35.793 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:35.793 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:02:35.797 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:35.798 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:35.798 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:35.798 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:02:35.803 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:35.803 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:02:35.803 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:35.804 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:02:35.808 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:35.809 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2026 AND deleted = 0

2026-01-23 11:02:35.809 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 6 year 2026 based on today 2026-01-23
2026-01-23 11:02:35.809 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:35.809 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:02:35.814 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:35.814 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:35.814 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:35.814 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:02:35.819 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:35.819 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:02:35.822 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:35.822 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:02:35.839 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:35.839 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2026 AND deleted = 0

2026-01-23 11:02:35.840 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 7 year 2026 based on today 2026-01-23
2026-01-23 11:02:35.840 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:35.840 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:02:35.845 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:35.845 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:35.845 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:35.845 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:02:35.853 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:35.853 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:02:35.853 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:35.853 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:02:35.858 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:35.858 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2026 AND deleted = 0

2026-01-23 11:02:35.858 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 8 year 2026 based on today 2026-01-23
2026-01-23 11:02:35.858 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:35.858 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:02:35.882 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:35.882 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:35.882 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:35.882 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:02:35.886 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:35.887 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:02:35.887 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:35.887 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:02:35.894 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:35.894 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2026 AND deleted = 0

2026-01-23 11:02:35.895 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 9 year 2026 based on today 2026-01-23
2026-01-23 11:02:35.895 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:35.895 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:02:35.908 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:35.910 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:35.910 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:02:35.911 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:02:35.919 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:02:35.920 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:02:35.920 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:02:35.920 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:02:35.925 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:02:35.925 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2026 AND deleted = 0

2026-01-23 11:02:35.925 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 10 year 2026 based on today 2026-01-23
2026-01-23 11:02:35.925 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:02:35.925 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:02:35.929 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:02:35.929 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:02:35.930 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":3.0,"deleted":null,"totalBalance":-0.5,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":72,"userId":2,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":57,"userId":2,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":18,"userId":2,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":73,"userId":3,"year":2026,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":58,"userId":3,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":19,"userId":3,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":74,"userId":4,"year":2026,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":12.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":59,"userId":4,"startDate":"2026-12-31","endDate":"2026-12-31","days":-12.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":20,"userId":4,"startDate":"2026-01-01","endDate":"2026-01-01","days":12.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":75,"userId":5,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":-2.0,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":55,"userId":5,"startDate":"2026-01-08","endDate":"2026-01-08","days":3.5,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2027-12-31","createTime":"2026-01-08T08:42:17","deleted":0},{"id":21,"userId":5,"startDate":"2026-01-01","endDate":"2026-01-01","days":-2.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":76,"userId":6,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":60,"userId":6,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":22,"userId":6,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":77,"userId":7,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":61,"userId":7,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":23,"userId":7,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":78,"userId":8,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":62,"userId":8,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":24,"userId":8,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":79,"userId":9,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":63,"userId":9,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":25,"userId":9,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":80,"userId":10,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":64,"userId":10,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":26,"userId":10,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:04:56.798 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=2&size=10
2026-01-23 11:04:56.818 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:04:56.820 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:04:56.829 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:04:56.830 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:04:56.836 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=2&size=10
2026-01-23 11:04:56.840 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:04:56.840 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:04:56.840 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 2, 10]
2026-01-23 11:04:56.844 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:04:56.845 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:04:56.849 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:04:56.849 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:04:56.849 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?,?
2026-01-23 11:04:56.850 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long), 10(Long)
2026-01-23 11:04:56.854 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:04:56.854 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:04:56.855 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:56.855 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 11(Long)
2026-01-23 11:04:56.858 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:56.859 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 11 AND deleted = 0

2026-01-23 11:04:56.859 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:56.859 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 11(Long), 2026(Integer)
2026-01-23 11:04:56.864 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:56.864 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 11 AND year = 2026 AND deleted = 0

2026-01-23 11:04:56.864 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 11 year 2026 based on today 2026-01-23
2026-01-23 11:04:56.866 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:04:56.866 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 11(Long), 2026(Integer), 10(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 81(Long)
2026-01-23 11:04:56.876 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:04:56.876 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 11, year = 2026, social_seniority = 10, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 81

2026-01-23 11:04:56.876 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 11: employed=23 days, quota=0.5
2026-01-23 11:04:56.877 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:56.877 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 11(Long), 2026(Integer)
2026-01-23 11:04:56.881 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:56.882 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 11 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:56.882 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:56.882 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 12(Long)
2026-01-23 11:04:56.886 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:56.886 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 12 AND deleted = 0

2026-01-23 11:04:56.886 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:56.886 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 12(Long), 2026(Integer)
2026-01-23 11:04:56.891 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:56.891 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 12 AND year = 2026 AND deleted = 0

2026-01-23 11:04:56.891 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 12 year 2026 based on today 2026-01-23
2026-01-23 11:04:56.892 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:04:56.892 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 12(Long), 2026(Integer), 7(Integer), 5.0(BigDecimal), 23(Integer), 0.0(BigDecimal), 5.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 82(Long)
2026-01-23 11:04:56.902 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:04:56.902 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 12, year = 2026, social_seniority = 7, standard_quota = 5.0, days_employed = 23, actual_quota = 0.0, last_year_balance = 5.0, current_year_used = 0.0, deleted = 0 WHERE id = 82

2026-01-23 11:04:56.902 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 12: employed=23 days, quota=0.0
2026-01-23 11:04:56.903 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:56.903 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 12(Long), 2026(Integer)
2026-01-23 11:04:56.907 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:56.907 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 12 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:56.908 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:56.908 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 13(Long)
2026-01-23 11:04:56.913 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:56.913 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 13 AND deleted = 0

2026-01-23 11:04:56.913 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:56.913 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 13(Long), 2026(Integer)
2026-01-23 11:04:56.920 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:56.921 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 13 AND year = 2026 AND deleted = 0

2026-01-23 11:04:56.921 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 13 year 2026 based on today 2026-01-23
2026-01-23 11:04:56.921 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:04:56.922 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 13(Long), 2026(Integer), 10(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 83(Long)
2026-01-23 11:04:56.936 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:04:56.937 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 13, year = 2026, social_seniority = 10, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 83

2026-01-23 11:04:56.937 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 13: employed=23 days, quota=0.5
2026-01-23 11:04:56.937 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:56.937 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 13(Long), 2026(Integer)
2026-01-23 11:04:56.946 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:56.946 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 13 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:56.946 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:56.946 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 14(Long)
2026-01-23 11:04:56.950 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:56.950 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 14 AND deleted = 0

2026-01-23 11:04:56.951 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:56.951 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 14(Long), 2026(Integer)
2026-01-23 11:04:56.956 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:56.956 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 14 AND year = 2026 AND deleted = 0

2026-01-23 11:04:56.956 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 14 year 2026 based on today 2026-01-23
2026-01-23 11:04:56.956 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:04:56.957 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 14(Long), 2026(Integer), 16(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 84(Long)
2026-01-23 11:04:56.966 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:04:56.967 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 14, year = 2026, social_seniority = 16, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 84

2026-01-23 11:04:56.967 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 14: employed=23 days, quota=0.5
2026-01-23 11:04:56.967 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:56.968 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 14(Long), 2026(Integer)
2026-01-23 11:04:56.972 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:56.972 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 14 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:56.972 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:56.972 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 15(Long)
2026-01-23 11:04:56.976 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:56.977 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 15 AND deleted = 0

2026-01-23 11:04:56.977 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:56.977 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 15(Long), 2026(Integer)
2026-01-23 11:04:56.981 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:56.981 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 15 AND year = 2026 AND deleted = 0

2026-01-23 11:04:56.981 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 15 year 2026 based on today 2026-01-23
2026-01-23 11:04:56.982 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:04:56.983 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 15(Long), 2026(Integer), 19(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 85(Long)
2026-01-23 11:04:56.994 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:04:56.995 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 15, year = 2026, social_seniority = 19, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 85

2026-01-23 11:04:56.995 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 15: employed=23 days, quota=0.5
2026-01-23 11:04:56.995 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:56.995 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 15(Long), 2026(Integer)
2026-01-23 11:04:56.999 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:56.999 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 15 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:56.999 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:57.000 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 16(Long)
2026-01-23 11:04:57.004 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:57.004 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 16 AND deleted = 0

2026-01-23 11:04:57.004 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:57.004 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 16(Long), 2026(Integer)
2026-01-23 11:04:57.008 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:57.009 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 16 AND year = 2026 AND deleted = 0

2026-01-23 11:04:57.009 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 16 year 2026 based on today 2026-01-23
2026-01-23 11:04:57.009 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:04:57.010 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 16(Long), 2026(Integer), 14(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 86(Long)
2026-01-23 11:04:57.021 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:04:57.021 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 16, year = 2026, social_seniority = 14, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 86

2026-01-23 11:04:57.021 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 16: employed=23 days, quota=0.5
2026-01-23 11:04:57.022 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:57.022 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 16(Long), 2026(Integer)
2026-01-23 11:04:57.026 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:57.027 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 16 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:57.027 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:57.027 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 17(Long)
2026-01-23 11:04:57.035 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:57.035 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 17 AND deleted = 0

2026-01-23 11:04:57.035 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:57.035 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 17(Long), 2026(Integer)
2026-01-23 11:04:57.042 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:57.042 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 17 AND year = 2026 AND deleted = 0

2026-01-23 11:04:57.042 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 17 year 2026 based on today 2026-01-23
2026-01-23 11:04:57.042 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:04:57.042 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 17(Long), 2026(Integer), 11(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 87(Long)
2026-01-23 11:04:57.067 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:04:57.067 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 17, year = 2026, social_seniority = 11, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 87

2026-01-23 11:04:57.067 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 17: employed=23 days, quota=0.5
2026-01-23 11:04:57.067 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:57.068 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 17(Long), 2026(Integer)
2026-01-23 11:04:57.071 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:57.072 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 17 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:57.072 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:57.072 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 18(Long)
2026-01-23 11:04:57.076 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:57.076 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 18 AND deleted = 0

2026-01-23 11:04:57.076 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:57.076 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 18(Long), 2026(Integer)
2026-01-23 11:04:57.080 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:57.080 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 18 AND year = 2026 AND deleted = 0

2026-01-23 11:04:57.081 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 18 year 2026 based on today 2026-01-23
2026-01-23 11:04:57.081 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:04:57.081 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 18(Long), 2026(Integer), 9(Integer), 5.0(BigDecimal), 23(Integer), 0.0(BigDecimal), 5.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 88(Long)
2026-01-23 11:04:57.092 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:04:57.093 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 18, year = 2026, social_seniority = 9, standard_quota = 5.0, days_employed = 23, actual_quota = 0.0, last_year_balance = 5.0, current_year_used = 0.0, deleted = 0 WHERE id = 88

2026-01-23 11:04:57.093 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 18: employed=23 days, quota=0.0
2026-01-23 11:04:57.093 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:57.093 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 18(Long), 2026(Integer)
2026-01-23 11:04:57.100 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:57.100 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 18 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:57.100 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:57.100 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 19(Long)
2026-01-23 11:04:57.105 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:57.105 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 19 AND deleted = 0

2026-01-23 11:04:57.106 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:57.106 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 19(Long), 2026(Integer)
2026-01-23 11:04:57.110 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:57.110 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 19 AND year = 2026 AND deleted = 0

2026-01-23 11:04:57.110 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 19 year 2026 based on today 2026-01-23
2026-01-23 11:04:57.110 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:04:57.110 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 19(Long), 2026(Integer), 11(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 89(Long)
2026-01-23 11:04:57.129 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:04:57.129 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 19, year = 2026, social_seniority = 11, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 89

2026-01-23 11:04:57.129 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 19: employed=23 days, quota=0.5
2026-01-23 11:04:57.130 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:57.130 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 19(Long), 2026(Integer)
2026-01-23 11:04:57.134 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:57.134 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 19 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:57.135 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:57.135 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 20(Long)
2026-01-23 11:04:57.139 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:57.139 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 20 AND deleted = 0

2026-01-23 11:04:57.139 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:57.139 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 20(Long), 2026(Integer)
2026-01-23 11:04:57.144 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:57.145 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 20 AND year = 2026 AND deleted = 0

2026-01-23 11:04:57.145 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 20 year 2026 based on today 2026-01-23
2026-01-23 11:04:57.145 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==>  Preparing: UPDATE leave_account SET user_id = ?, year = ?, social_seniority = ?, standard_quota = ?, days_employed = ?, actual_quota = ?, last_year_balance = ?, current_year_used = ?, deleted = ? WHERE id = ?
2026-01-23 11:04:57.146 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - ==> Parameters: 20(Long), 2026(Integer), 11(Integer), 10.0(BigDecimal), 23(Integer), 0.5(BigDecimal), 10.0(BigDecimal), 0.0(BigDecimal), 0(Integer), 90(Long)
2026-01-23 11:04:57.154 DEBUG c.l.system.mapper.LeaveAccountMapper.updateAccount - <==    Updates: 1
2026-01-23 11:04:57.155 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.updateAccount
SQL         : UPDATE leave_account SET user_id = 20, year = 2026, social_seniority = 11, standard_quota = 10.0, days_employed = 23, actual_quota = 0.5, last_year_balance = 10.0, current_year_used = 0.0, deleted = 0 WHERE id = 90

2026-01-23 11:04:57.155 INFO  com.leave.system.service.impl.LeaveServiceImpl - ✅ Refreshed dynamic quota for user 20: employed=23 days, quota=0.5
2026-01-23 11:04:57.155 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:57.155 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 20(Long), 2026(Integer)
2026-01-23 11:04:57.162 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:57.162 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 20 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:57.163 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":81,"userId":11,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"weihongyan","realName":"魏红艳","employeeNumber":"CBJ-016","entryDate":"2020-10-16","records":[{"id":65,"userId":11,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":27,"userId":11,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":82,"userId":12,"year":2026,"socialSeniority":7,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"liulu","realName":"刘露","employeeNumber":"CBJ-018","entryDate":"2020-11-06","records":[{"id":66,"userId":12,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":28,"userId":12,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":83,"userId":13,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"linying","realName":"林颖","employeeNumber":"CBJ-021","entryDate":"2020-11-24","records":[{"id":67,"userId":13,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":29,"userId":13,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":84,"userId":14,"year":2026,"socialSeniority":16,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"renxiang","realName":"任翔","employeeNumber":"CBJ-022","entryDate":"2020-12-07","records":[{"id":68,"userId":14,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":30,"userId":14,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":85,"userId":15,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yanglinlin","realName":"杨琳琳","employeeNumber":"CBJ-024","entryDate":"2021-01-04","records":[{"id":69,"userId":15,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":31,"userId":15,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":86,"userId":16,"year":2026,"socialSeniority":14,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"liyanhong","realName":"李艳红","employeeNumber":"CBJ-026","entryDate":"2021-01-13","records":[{"id":70,"userId":16,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":32,"userId":16,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":87,"userId":17,"year":2026,"socialSeniority":11,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangxuesong","realName":"张雪松","employeeNumber":"CBJ-029","entryDate":"2021-03-03","records":[{"id":71,"userId":17,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":33,"userId":17,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":88,"userId":18,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"cuixiaohuan","realName":"崔晓欢","employeeNumber":"CBJ-030","entryDate":"2021-03-09","records":[{"id":72,"userId":18,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":34,"userId":18,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":89,"userId":19,"year":2026,"socialSeniority":11,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wudaming","realName":"吴大明","employeeNumber":"CBJ-032","entryDate":"2021-03-09","records":[{"id":73,"userId":19,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":35,"userId":19,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":90,"userId":20,"year":2026,"socialSeniority":11,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianmin","realName":"王建民","employeeNumber":"CBJ-033","entryDate":"2021-03-10","records":[{"id":74,"userId":20,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":36,"userId":20,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":2,"pages":4}}
2026-01-23 11:04:59.306 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:04:59.313 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:04:59.314 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:04:59.319 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:04:59.319 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:04:59.325 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:04:59.326 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:04:59.326 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:04:59.326 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 1, 10]
2026-01-23 11:04:59.329 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:04:59.329 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:04:59.336 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:04:59.336 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:04:59.336 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:04:59.336 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:04:59.341 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:04:59.341 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:04:59.341 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:59.341 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:04:59.345 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:59.345 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:04:59.345 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:59.345 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:04:59.349 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:59.349 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 11:04:59.349 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 11:04:59.350 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:59.350 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:04:59.354 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 5
2026-01-23 11:04:59.354 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:59.354 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:59.354 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:04:59.358 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:59.358 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:04:59.358 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:59.358 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:04:59.362 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:59.362 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2026 AND deleted = 0

2026-01-23 11:04:59.362 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 2 year 2026 based on today 2026-01-23
2026-01-23 11:04:59.363 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:59.363 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:04:59.366 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:59.366 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:59.367 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:59.367 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:04:59.370 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:59.370 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:04:59.370 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:59.371 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:04:59.375 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:59.375 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2026 AND deleted = 0

2026-01-23 11:04:59.375 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 3 year 2026 based on today 2026-01-23
2026-01-23 11:04:59.375 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:59.375 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:04:59.379 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:59.380 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:59.380 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:59.380 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:04:59.384 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:59.384 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:04:59.384 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:59.385 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:04:59.388 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:59.389 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2026 AND deleted = 0

2026-01-23 11:04:59.389 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 4 year 2026 based on today 2026-01-23
2026-01-23 11:04:59.389 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:59.389 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:04:59.393 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:59.393 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:59.393 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:59.393 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:04:59.397 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:59.397 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:04:59.398 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:59.398 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:04:59.404 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:59.405 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2026 AND deleted = 0

2026-01-23 11:04:59.405 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 5 year 2026 based on today 2026-01-23
2026-01-23 11:04:59.405 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:59.405 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:04:59.410 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:59.410 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:59.410 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:59.411 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:04:59.415 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:59.415 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:04:59.415 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:59.415 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:04:59.419 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:59.419 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2026 AND deleted = 0

2026-01-23 11:04:59.419 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 6 year 2026 based on today 2026-01-23
2026-01-23 11:04:59.420 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:59.420 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:04:59.424 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:59.424 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:59.424 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:59.425 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:04:59.429 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:59.429 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:04:59.429 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:59.429 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:04:59.433 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:59.433 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2026 AND deleted = 0

2026-01-23 11:04:59.434 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 7 year 2026 based on today 2026-01-23
2026-01-23 11:04:59.434 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:59.434 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:04:59.438 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:59.438 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:59.439 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:59.439 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:04:59.443 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:59.443 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:04:59.443 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:59.443 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:04:59.447 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:59.447 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2026 AND deleted = 0

2026-01-23 11:04:59.447 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 8 year 2026 based on today 2026-01-23
2026-01-23 11:04:59.447 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:59.448 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:04:59.451 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:59.452 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:59.452 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:59.452 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:04:59.457 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:59.458 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:04:59.458 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:59.458 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:04:59.462 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:59.462 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2026 AND deleted = 0

2026-01-23 11:04:59.463 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 9 year 2026 based on today 2026-01-23
2026-01-23 11:04:59.463 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:59.463 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:04:59.467 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:59.468 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:59.468 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:04:59.468 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:04:59.472 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:04:59.472 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:04:59.473 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:04:59.473 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:04:59.478 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:04:59.478 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2026 AND deleted = 0

2026-01-23 11:04:59.478 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 10 year 2026 based on today 2026-01-23
2026-01-23 11:04:59.479 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:04:59.479 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:04:59.484 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:04:59.484 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:04:59.512 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":3.0,"deleted":null,"totalBalance":-0.5,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":72,"userId":2,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":57,"userId":2,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":18,"userId":2,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":73,"userId":3,"year":2026,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":58,"userId":3,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":19,"userId":3,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":74,"userId":4,"year":2026,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":12.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":59,"userId":4,"startDate":"2026-12-31","endDate":"2026-12-31","days":-12.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":20,"userId":4,"startDate":"2026-01-01","endDate":"2026-01-01","days":12.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":75,"userId":5,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":-2.0,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":55,"userId":5,"startDate":"2026-01-08","endDate":"2026-01-08","days":3.5,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2027-12-31","createTime":"2026-01-08T08:42:17","deleted":0},{"id":21,"userId":5,"startDate":"2026-01-01","endDate":"2026-01-01","days":-2.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":76,"userId":6,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":60,"userId":6,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":22,"userId":6,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":77,"userId":7,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":61,"userId":7,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":23,"userId":7,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":78,"userId":8,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":62,"userId":8,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":24,"userId":8,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":79,"userId":9,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":63,"userId":9,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":25,"userId":9,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":80,"userId":10,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":64,"userId":10,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":26,"userId":10,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:05:06.910 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2025&current=1&size=10
2026-01-23 11:05:06.916 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:05:06.916 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:05:06.923 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:05:06.923 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:05:06.925 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2025&current=1&size=10
2026-01-23 11:05:06.926 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:05:06.926 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:05:06.926 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2025, 1, 10]
2026-01-23 11:05:06.930 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:05:06.930 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:05:06.935 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:05:06.936 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:05:06.936 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:05:06.936 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:05:06.941 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:05:06.941 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:05:06.941 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:06.942 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:05:06.959 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:06.959 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:05:06.959 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:06.960 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2025(Integer)
2026-01-23 11:05:06.969 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:06.970 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2025 AND deleted = 0

2026-01-23 11:05:06.970 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:06.970 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2025(Integer)
2026-01-23 11:05:06.976 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 3
2026-01-23 11:05:06.976 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2025 ORDER BY start_date DESC

2026-01-23 11:05:06.976 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:06.977 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:05:06.981 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:06.982 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:05:06.982 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:06.982 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2025(Integer)
2026-01-23 11:05:06.991 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:06.991 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2025 AND deleted = 0

2026-01-23 11:05:06.991 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:06.992 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2025(Integer)
2026-01-23 11:05:06.999 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 3
2026-01-23 11:05:06.999 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2025 ORDER BY start_date DESC

2026-01-23 11:05:07.000 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:07.000 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:05:07.006 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:07.006 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:05:07.007 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:07.007 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2025(Integer)
2026-01-23 11:05:07.012 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:07.012 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2025 AND deleted = 0

2026-01-23 11:05:07.013 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:07.013 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2025(Integer)
2026-01-23 11:05:07.018 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:07.018 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2025 ORDER BY start_date DESC

2026-01-23 11:05:07.018 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:07.018 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:05:07.023 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:07.023 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:05:07.023 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:07.024 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2025(Integer)
2026-01-23 11:05:07.028 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:07.029 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2025 AND deleted = 0

2026-01-23 11:05:07.029 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:07.029 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2025(Integer)
2026-01-23 11:05:07.035 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:07.036 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2025 ORDER BY start_date DESC

2026-01-23 11:05:07.036 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:07.036 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:05:07.040 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:07.041 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:05:07.041 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:07.041 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2025(Integer)
2026-01-23 11:05:07.048 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:07.048 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2025 AND deleted = 0

2026-01-23 11:05:07.048 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:07.048 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2025(Integer)
2026-01-23 11:05:07.054 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:07.054 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2025 ORDER BY start_date DESC

2026-01-23 11:05:07.054 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:07.054 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:05:07.059 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:07.060 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:05:07.060 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:07.060 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2025(Integer)
2026-01-23 11:05:07.067 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:07.067 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2025 AND deleted = 0

2026-01-23 11:05:07.068 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:07.068 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2025(Integer)
2026-01-23 11:05:07.072 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 0
2026-01-23 11:05:07.073 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2025 ORDER BY start_date DESC

2026-01-23 11:05:07.073 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:07.073 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:05:07.091 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:07.092 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:05:07.092 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:07.092 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2025(Integer)
2026-01-23 11:05:07.111 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:07.111 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2025 AND deleted = 0

2026-01-23 11:05:07.111 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:07.111 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2025(Integer)
2026-01-23 11:05:07.124 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 0
2026-01-23 11:05:07.125 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2025 ORDER BY start_date DESC

2026-01-23 11:05:07.125 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:07.125 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:05:07.130 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:07.131 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:05:07.131 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:07.131 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2025(Integer)
2026-01-23 11:05:07.138 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:07.139 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2025 AND deleted = 0

2026-01-23 11:05:07.139 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:07.139 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2025(Integer)
2026-01-23 11:05:07.143 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 0
2026-01-23 11:05:07.144 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2025 ORDER BY start_date DESC

2026-01-23 11:05:07.144 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:07.144 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:05:07.148 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:07.148 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:05:07.149 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:07.149 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2025(Integer)
2026-01-23 11:05:07.154 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:07.154 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2025 AND deleted = 0

2026-01-23 11:05:07.154 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:07.154 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2025(Integer)
2026-01-23 11:05:07.163 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 0
2026-01-23 11:05:07.163 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2025 ORDER BY start_date DESC

2026-01-23 11:05:07.164 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:07.164 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:05:07.173 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:07.173 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:05:07.174 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:07.174 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2025(Integer)
2026-01-23 11:05:07.178 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:07.178 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2025 AND deleted = 0

2026-01-23 11:05:07.178 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:07.178 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2025(Integer)
2026-01-23 11:05:07.187 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 0
2026-01-23 11:05:07.188 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2025 ORDER BY start_date DESC

2026-01-23 11:05:07.188 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":36,"userId":1,"year":2025,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":365,"actualQuota":5.0,"lastYearBalance":3.0,"currentYearUsed":2.0,"deleted":null,"totalBalance":5.0,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":14,"userId":1,"startDate":"2025-12-31","endDate":"2025-12-31","days":-1.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2025-12-31)","expiryDate":"2025-12-31","createTime":"2026-01-08T08:36:59","deleted":0},{"id":8,"userId":1,"startDate":"2025-12-01","endDate":"2025-12-01","days":-2.0,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2025-12-31)","expiryDate":"2025-12-31","createTime":"2026-01-08T08:33:41","deleted":0},{"id":1,"userId":1,"startDate":"2025-01-01","endDate":"2025-01-01","days":3.0,"type":"CARRY_OVER","remarks":"2024年年假结转 (系统同步)","expiryDate":"2025-12-31","createTime":"2025-01-01T00:00:01","deleted":0}]},{"id":37,"userId":2,"year":2025,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":365,"actualQuota":10.0,"lastYearBalance":1.5,"currentYearUsed":0,"deleted":null,"totalBalance":10.0,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":15,"userId":2,"startDate":"2025-12-31","endDate":"2025-12-31","days":-0.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2025-12-31)","expiryDate":"2025-12-31","createTime":"2026-01-08T08:36:59","deleted":0},{"id":9,"userId":2,"startDate":"2025-12-01","endDate":"2025-12-01","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2025-12-31)","expiryDate":"2025-12-31","createTime":"2026-01-08T08:34:01","deleted":0},{"id":2,"userId":2,"startDate":"2025-01-01","endDate":"2025-01-01","days":1.5,"type":"CARRY_OVER","remarks":"2024年年假结转 (系统同步)","expiryDate":"2025-12-31","createTime":"2025-01-01T00:00:01","deleted":0}]},{"id":38,"userId":3,"year":2025,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":365,"actualQuota":10.0,"lastYearBalance":-3.0,"currentYearUsed":2.0,"deleted":null,"totalBalance":5.0,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":10,"userId":3,"startDate":"2025-12-15","endDate":"2025-12-15","days":-2.0,"type":"ANNUAL","remarks":"员工请假 (来自当年额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:34:24","deleted":0},{"id":3,"userId":3,"startDate":"2025-01-01","endDate":"2025-01-01","days":-3.0,"type":"CARRY_OVER","remarks":"2024年年假结转 (系统同步)","expiryDate":"2025-12-31","createTime":"2025-01-01T00:00:01","deleted":0}]},{"id":39,"userId":4,"year":2025,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":365,"actualQuota":10.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":12.0,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":11,"userId":4,"startDate":"2025-12-08","endDate":"2025-12-15","days":2.0,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2026-12-31","createTime":"2026-01-08T08:34:42","deleted":0}]},{"id":40,"userId":5,"year":2025,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":365,"actualQuota":5.0,"lastYearBalance":0.0,"currentYearUsed":7.0,"deleted":null,"totalBalance":-2.0,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":13,"userId":5,"startDate":"2025-12-01","endDate":"2025-12-01","days":-2.0,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-08T08:35:02","deleted":0},{"id":12,"userId":5,"startDate":"2025-12-01","endDate":"2025-12-01","days":-5.0,"type":"ANNUAL","remarks":"员工请假 (来自当年额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:35:02","deleted":0}]},{"id":41,"userId":6,"year":2025,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":365,"actualQuota":10.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":10.0,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[]},{"id":42,"userId":7,"year":2025,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":365,"actualQuota":5.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":5.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[]},{"id":43,"userId":8,"year":2025,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":365,"actualQuota":10.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":10.0,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[]},{"id":44,"userId":9,"year":2025,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":365,"actualQuota":10.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":10.0,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[]},{"id":45,"userId":10,"year":2025,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":365,"actualQuota":10.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":10.0,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:05:12.628 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:05:12.646 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:05:12.647 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:05:12.657 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:05:12.657 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:05:12.659 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:05:12.660 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:05:12.660 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:05:12.660 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 1, 10]
2026-01-23 11:05:12.661 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:05:12.661 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:05:12.676 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:05:12.676 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:05:12.676 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:05:12.676 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:05:12.691 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:05:12.691 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:05:12.691 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:12.691 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:05:12.717 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:12.718 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:05:12.718 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:12.718 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:05:12.733 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:12.734 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 11:05:12.734 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 11:05:12.734 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:12.735 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:05:12.749 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 5
2026-01-23 11:05:12.750 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:12.750 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:12.750 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:05:12.766 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:12.766 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:05:12.766 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:12.766 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:05:12.776 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:12.776 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2026 AND deleted = 0

2026-01-23 11:05:12.776 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 2 year 2026 based on today 2026-01-23
2026-01-23 11:05:12.776 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:12.776 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:05:12.790 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:12.790 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:12.790 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:12.791 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:05:12.815 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:12.816 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:05:12.816 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:12.816 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:05:12.823 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:12.824 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2026 AND deleted = 0

2026-01-23 11:05:12.824 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 3 year 2026 based on today 2026-01-23
2026-01-23 11:05:12.824 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:12.825 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:05:12.834 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:12.834 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:12.835 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:12.835 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:05:12.842 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:12.842 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:05:12.842 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:12.842 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:05:12.848 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:12.849 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2026 AND deleted = 0

2026-01-23 11:05:12.849 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 4 year 2026 based on today 2026-01-23
2026-01-23 11:05:12.849 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:12.850 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:05:12.856 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:12.857 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:12.857 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:12.857 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:05:12.871 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:12.871 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:05:12.871 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:12.871 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:05:12.881 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:12.881 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2026 AND deleted = 0

2026-01-23 11:05:12.882 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 5 year 2026 based on today 2026-01-23
2026-01-23 11:05:12.882 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:12.882 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:05:12.894 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:12.894 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:12.894 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:12.894 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:05:12.902 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:12.903 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:05:12.903 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:12.903 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:05:12.908 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:12.908 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2026 AND deleted = 0

2026-01-23 11:05:12.908 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 6 year 2026 based on today 2026-01-23
2026-01-23 11:05:12.908 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:12.909 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:05:12.914 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:12.915 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:12.915 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:12.915 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:05:12.930 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:12.931 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:05:12.931 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:12.931 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:05:12.936 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:12.936 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2026 AND deleted = 0

2026-01-23 11:05:12.936 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 7 year 2026 based on today 2026-01-23
2026-01-23 11:05:12.937 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:12.937 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:05:12.940 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:12.941 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:12.941 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:12.941 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:05:12.948 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:12.948 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:05:12.948 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:12.948 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:05:12.954 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:12.955 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2026 AND deleted = 0

2026-01-23 11:05:12.955 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 8 year 2026 based on today 2026-01-23
2026-01-23 11:05:12.955 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:12.955 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:05:12.958 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:12.958 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:12.959 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:12.959 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:05:12.964 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:12.964 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:05:12.964 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:12.964 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:05:12.977 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:12.978 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2026 AND deleted = 0

2026-01-23 11:05:12.978 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 9 year 2026 based on today 2026-01-23
2026-01-23 11:05:12.978 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:12.978 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:05:12.992 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:12.992 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:12.992 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:12.992 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:05:13.003 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:13.003 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:05:13.003 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:13.003 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:05:13.020 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:13.020 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2026 AND deleted = 0

2026-01-23 11:05:13.020 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 10 year 2026 based on today 2026-01-23
2026-01-23 11:05:13.020 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:13.021 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:05:13.027 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:13.027 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:13.027 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":3.0,"deleted":null,"totalBalance":-0.5,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":72,"userId":2,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":57,"userId":2,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":18,"userId":2,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":73,"userId":3,"year":2026,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":58,"userId":3,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":19,"userId":3,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":74,"userId":4,"year":2026,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":12.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":59,"userId":4,"startDate":"2026-12-31","endDate":"2026-12-31","days":-12.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":20,"userId":4,"startDate":"2026-01-01","endDate":"2026-01-01","days":12.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":75,"userId":5,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":-2.0,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":55,"userId":5,"startDate":"2026-01-08","endDate":"2026-01-08","days":3.5,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2027-12-31","createTime":"2026-01-08T08:42:17","deleted":0},{"id":21,"userId":5,"startDate":"2026-01-01","endDate":"2026-01-01","days":-2.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":76,"userId":6,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":60,"userId":6,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":22,"userId":6,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":77,"userId":7,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":61,"userId":7,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":23,"userId":7,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":78,"userId":8,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":62,"userId":8,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":24,"userId":8,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":79,"userId":9,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":63,"userId":9,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":25,"userId":9,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":80,"userId":10,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":64,"userId":10,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":26,"userId":10,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:05:16.319 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2027&current=1&size=10
2026-01-23 11:05:16.335 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:05:16.336 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:05:16.342 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:05:16.342 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:05:16.345 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2027&current=1&size=10
2026-01-23 11:05:16.347 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:05:16.347 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:05:16.347 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2027, 1, 10]
2026-01-23 11:05:16.348 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:05:16.348 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:05:16.354 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:05:16.354 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:05:16.354 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:05:16.355 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:05:16.359 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:05:16.359 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:05:16.360 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:16.360 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:05:16.375 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:16.376 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:05:16.376 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:16.376 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2027(Integer)
2026-01-23 11:05:16.382 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:16.382 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2027 AND deleted = 0

2026-01-23 11:05:16.383 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:16.383 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2027(Integer)
2026-01-23 11:05:16.388 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:16.388 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:16.388 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:16.388 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:05:16.396 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:16.396 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:05:16.397 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:16.397 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2027(Integer)
2026-01-23 11:05:16.404 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:16.404 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2027 AND deleted = 0

2026-01-23 11:05:16.404 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:16.404 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2027(Integer)
2026-01-23 11:05:16.408 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:16.408 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:16.409 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:16.409 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:05:16.414 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:16.414 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:05:16.414 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:16.414 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2027(Integer)
2026-01-23 11:05:16.421 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:16.421 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2027 AND deleted = 0

2026-01-23 11:05:16.421 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:16.421 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2027(Integer)
2026-01-23 11:05:16.426 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:16.426 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:16.427 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:16.427 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:05:16.432 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:16.432 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:05:16.432 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:16.432 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2027(Integer)
2026-01-23 11:05:16.438 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:16.439 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2027 AND deleted = 0

2026-01-23 11:05:16.439 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:16.442 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2027(Integer)
2026-01-23 11:05:16.448 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:16.449 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:16.449 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:16.449 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:05:16.457 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:16.457 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:05:16.457 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:16.457 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2027(Integer)
2026-01-23 11:05:16.463 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:16.464 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2027 AND deleted = 0

2026-01-23 11:05:16.464 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:16.464 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2027(Integer)
2026-01-23 11:05:16.469 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:16.470 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:16.470 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:16.470 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:05:16.476 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:16.476 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:05:16.477 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:16.477 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2027(Integer)
2026-01-23 11:05:16.483 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:16.483 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2027 AND deleted = 0

2026-01-23 11:05:16.483 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:16.483 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2027(Integer)
2026-01-23 11:05:16.490 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:16.490 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:16.490 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:16.490 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:05:16.497 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:16.497 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:05:16.497 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:16.497 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2027(Integer)
2026-01-23 11:05:16.503 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:16.503 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2027 AND deleted = 0

2026-01-23 11:05:16.504 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:16.504 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2027(Integer)
2026-01-23 11:05:16.510 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:16.510 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:16.510 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:16.511 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:05:16.518 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:16.518 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:05:16.519 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:16.519 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2027(Integer)
2026-01-23 11:05:16.526 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:16.527 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2027 AND deleted = 0

2026-01-23 11:05:16.527 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:16.527 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2027(Integer)
2026-01-23 11:05:16.531 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:16.531 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:16.531 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:16.531 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:05:16.537 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:16.537 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:05:16.537 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:16.537 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2027(Integer)
2026-01-23 11:05:16.542 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:16.542 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2027 AND deleted = 0

2026-01-23 11:05:16.542 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:16.543 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2027(Integer)
2026-01-23 11:05:16.549 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:16.549 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:16.549 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:16.550 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:05:16.554 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:16.554 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:05:16.554 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:16.554 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2027(Integer)
2026-01-23 11:05:16.559 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:16.559 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2027 AND deleted = 0

2026-01-23 11:05:16.559 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:16.560 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2027(Integer)
2026-01-23 11:05:16.566 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:16.566 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:16.566 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":106,"userId":1,"year":2027,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":90,"userId":1,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":107,"userId":2,"year":2027,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":91,"userId":2,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":108,"userId":3,"year":2027,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":92,"userId":3,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":109,"userId":4,"year":2027,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":93,"userId":4,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":110,"userId":5,"year":2027,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":1.5,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":94,"userId":5,"startDate":"2027-01-01","endDate":"2027-01-01","days":1.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":111,"userId":6,"year":2027,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":95,"userId":6,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":112,"userId":7,"year":2027,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":96,"userId":7,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":113,"userId":8,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":97,"userId":8,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":114,"userId":9,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":98,"userId":9,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]},{"id":115,"userId":10,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":99,"userId":10,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:25","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
2026-01-23 11:05:17.785 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2027&current=4&size=10
2026-01-23 11:05:17.797 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:05:17.797 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:05:17.801 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:05:17.801 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:05:17.804 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2027&current=4&size=10
2026-01-23 11:05:17.805 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:05:17.805 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:05:17.806 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2027, 4, 10]
2026-01-23 11:05:17.807 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:05:17.807 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:05:17.812 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:05:17.813 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:05:17.813 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?,?
2026-01-23 11:05:17.813 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 30(Long), 10(Long)
2026-01-23 11:05:17.824 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 5
2026-01-23 11:05:17.824 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:05:17.824 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:17.825 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 31(Long)
2026-01-23 11:05:17.835 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:17.835 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 31 AND deleted = 0

2026-01-23 11:05:17.835 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:17.835 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 31(Long), 2027(Integer)
2026-01-23 11:05:17.851 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:17.851 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 31 AND year = 2027 AND deleted = 0

2026-01-23 11:05:17.852 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:17.852 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 31(Long), 2027(Integer)
2026-01-23 11:05:17.862 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:17.862 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 31 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:17.863 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:17.863 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 32(Long)
2026-01-23 11:05:17.873 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:17.874 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 32 AND deleted = 0

2026-01-23 11:05:17.875 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:17.875 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 32(Long), 2027(Integer)
2026-01-23 11:05:17.882 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:17.882 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 32 AND year = 2027 AND deleted = 0

2026-01-23 11:05:17.883 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:17.883 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 32(Long), 2027(Integer)
2026-01-23 11:05:17.887 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:17.888 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 32 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:17.888 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:17.888 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 33(Long)
2026-01-23 11:05:17.895 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:17.896 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 33 AND deleted = 0

2026-01-23 11:05:17.896 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:17.896 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 33(Long), 2027(Integer)
2026-01-23 11:05:17.908 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:17.909 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 33 AND year = 2027 AND deleted = 0

2026-01-23 11:05:17.909 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:17.910 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 33(Long), 2027(Integer)
2026-01-23 11:05:17.917 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:17.918 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 33 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:17.918 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:17.918 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 34(Long)
2026-01-23 11:05:17.924 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:17.924 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 34 AND deleted = 0

2026-01-23 11:05:17.925 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:17.925 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 34(Long), 2027(Integer)
2026-01-23 11:05:17.929 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:17.929 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 34 AND year = 2027 AND deleted = 0

2026-01-23 11:05:17.929 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:17.929 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 34(Long), 2027(Integer)
2026-01-23 11:05:17.935 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:17.936 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 34 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:17.936 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:17.936 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 35(Long)
2026-01-23 11:05:17.941 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:17.942 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 35 AND deleted = 0

2026-01-23 11:05:17.942 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:17.942 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 35(Long), 2027(Integer)
2026-01-23 11:05:17.947 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:17.947 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 35 AND year = 2027 AND deleted = 0

2026-01-23 11:05:17.947 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:17.947 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 35(Long), 2027(Integer)
2026-01-23 11:05:17.954 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 1
2026-01-23 11:05:17.954 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 35 AND YEAR(start_date) = 2027 ORDER BY start_date DESC

2026-01-23 11:05:17.955 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":136,"userId":31,"year":2027,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.5,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yaoyan","realName":"要妍","employeeNumber":"CBJ-082","entryDate":"2022-03-07","records":[{"id":120,"userId":31,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.5,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:26","deleted":0}]},{"id":137,"userId":32,"year":2027,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"renzhipeng","realName":"任志鹏","employeeNumber":"CBJ-092","entryDate":"2022-03-30","records":[{"id":121,"userId":32,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:26","deleted":0}]},{"id":138,"userId":33,"year":2027,"socialSeniority":7,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"zhangningbo","realName":"张宁博","employeeNumber":"CBJ-104","entryDate":"2022-06-21","records":[{"id":133,"userId":33,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-23T11:02:02","deleted":0}]},{"id":139,"userId":34,"year":2027,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"xubin","realName":"许滨","employeeNumber":"CBJ-106","entryDate":"2023-02-13","records":[{"id":123,"userId":34,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:26","deleted":0}]},{"id":140,"userId":35,"year":2027,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":0,"actualQuota":0.0,"lastYearBalance":0.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"xiaonan","realName":"肖南","employeeNumber":"CBJ-108","entryDate":"2023-02-22","records":[{"id":124,"userId":35,"startDate":"2027-01-01","endDate":"2027-01-01","days":0.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2027-12-31)","expiryDate":"2027-12-31","createTime":"2026-01-08T08:47:26","deleted":0}]}],"total":35,"size":10,"current":4,"pages":4}}
2026-01-23 11:05:19.454 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/history?userId=1&year=2026
2026-01-23 11:05:19.454 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/account?userId=1&year=2026
2026-01-23 11:05:19.455 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/available-years
2026-01-23 11:05:19.465 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:05:19.465 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:05:19.466 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:05:19.466 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:05:19.466 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:05:19.466 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:05:19.477 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:05:19.477 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:05:19.477 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:05:19.477 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:05:19.477 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:05:19.477 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:05:19.480 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/available-years
2026-01-23 11:05:19.480 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/history?userId=1&year=2026
2026-01-23 11:05:19.480 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/account?userId=1&year=2026
2026-01-23 11:05:19.483 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/available-years
2026-01-23 11:05:19.483 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.getAvailableYears
2026-01-23 11:05:19.483 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 11:05:19.483 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==>  Preparing: SELECT DISTINCT year FROM leave_account ORDER BY year DESC
2026-01-23 11:05:19.483 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==> Parameters: 
2026-01-23 11:05:19.484 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/account
2026-01-23 11:05:19.484 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/history
2026-01-23 11:05:19.484 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.getAccount
2026-01-23 11:05:19.484 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.getHistory
2026-01-23 11:05:19.485 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [1, 2026]
2026-01-23 11:05:19.485 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [1, 2026]
2026-01-23 11:05:19.485 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:19.485 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:05:19.485 DEBUG c.l.system.mapper.LeaveRecordMapper.selectHistory - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:19.485 DEBUG c.l.system.mapper.LeaveRecordMapper.selectHistory - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:05:19.490 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - <==      Total: 3
2026-01-23 11:05:19.491 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectDistinctYears
SQL         : SELECT DISTINCT year FROM leave_account ORDER BY year DESC

2026-01-23 11:05:19.491 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:19.491 DEBUG c.l.system.mapper.LeaveRecordMapper.selectHistory - <==      Total: 5
2026-01-23 11:05:19.491 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:05:19.491 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectHistory
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:19.491 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[2027,2026,2025]}
2026-01-23 11:05:19.491 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:19.491 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:05:19.495 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}
2026-01-23 11:05:19.498 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:19.498 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 11:05:19.498 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 11:05:19.498 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:19.499 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:05:19.503 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 5
2026-01-23 11:05:19.503 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:19.503 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":3.0,"deleted":null,"totalBalance":-0.5,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}}
2026-01-23 11:05:20.066 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/available-years
2026-01-23 11:05:20.066 DEBUG org.springframework.security.web.FilterChainProxy - Securing GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:05:20.085 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:05:20.085 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:05:20.085 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==>  Preparing: SELECT * FROM sys_user WHERE username = ? AND deleted = 0
2026-01-23 11:05:20.086 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - ==> Parameters: admin(String)
2026-01-23 11:05:20.096 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:05:20.096 DEBUG c.l.system.mapper.SysUserMapper.selectByUsername - <==      Total: 1
2026-01-23 11:05:20.096 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:05:20.096 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectByUsername
SQL         : SELECT * FROM sys_user WHERE username = 'admin' AND deleted = 0

2026-01-23 11:05:20.098 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/list?year=2026&current=1&size=10
2026-01-23 11:05:20.099 DEBUG org.springframework.security.web.FilterChainProxy - Secured GET /leave/available-years
2026-01-23 11:05:20.099 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/available-years
2026-01-23 11:05:20.099 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.getAvailableYears
2026-01-23 11:05:20.099 INFO  com.leave.system.aspect.WebLogAspect - Request Args : []
2026-01-23 11:05:20.099 INFO  com.leave.system.aspect.WebLogAspect - URL          : http://localhost:7899/leave/list
2026-01-23 11:05:20.099 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==>  Preparing: SELECT DISTINCT year FROM leave_account ORDER BY year DESC
2026-01-23 11:05:20.099 INFO  com.leave.system.aspect.WebLogAspect - Class Method : com.leave.system.controller.LeaveController.list
2026-01-23 11:05:20.099 INFO  com.leave.system.aspect.WebLogAspect - Request Args : [2026, 1, 10]
2026-01-23 11:05:20.099 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - ==> Parameters: 
2026-01-23 11:05:20.100 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==>  Preparing: SELECT COUNT(*) AS total FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0
2026-01-23 11:05:20.101 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - ==> Parameters: 
2026-01-23 11:05:20.105 DEBUG c.l.s.m.LeaveAccountMapper.selectDistinctYears - <==      Total: 3
2026-01-23 11:05:20.105 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectDistinctYears
SQL         : SELECT DISTINCT year FROM leave_account ORDER BY year DESC

2026-01-23 11:05:20.106 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":[2027,2026,2025]}
2026-01-23 11:05:20.109 DEBUG c.l.s.m.S.selectActiveUsersPage_mpCount - <==      Total: 1
2026-01-23 11:05:20.109 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage_mpCount
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:05:20.109 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==>  Preparing: SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC LIMIT ?
2026-01-23 11:05:20.109 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - ==> Parameters: 10(Long)
2026-01-23 11:05:20.116 DEBUG c.l.s.mapper.SysUserMapper.selectActiveUsersPage - <==      Total: 10
2026-01-23 11:05:20.117 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectActiveUsersPage
SQL         : SELECT * FROM sys_user WHERE (status != 'RESIGNED' OR status IS NULL) AND deleted = 0 ORDER BY id ASC

2026-01-23 11:05:20.117 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:20.117 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 1(Long)
2026-01-23 11:05:20.127 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:20.127 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 1 AND deleted = 0

2026-01-23 11:05:20.128 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:20.128 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:05:20.132 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:20.132 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 1 AND year = 2026 AND deleted = 0

2026-01-23 11:05:20.132 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 1 year 2026 based on today 2026-01-23
2026-01-23 11:05:20.132 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:20.133 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 1(Long), 2026(Integer)
2026-01-23 11:05:20.143 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 5
2026-01-23 11:05:20.144 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 1 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:20.144 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:20.144 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 2(Long)
2026-01-23 11:05:20.151 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:20.151 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 2 AND deleted = 0

2026-01-23 11:05:20.152 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:20.152 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:05:20.161 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:20.161 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 2 AND year = 2026 AND deleted = 0

2026-01-23 11:05:20.161 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 2 year 2026 based on today 2026-01-23
2026-01-23 11:05:20.162 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:20.162 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 2(Long), 2026(Integer)
2026-01-23 11:05:20.172 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:20.172 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 2 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:20.173 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:20.173 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 3(Long)
2026-01-23 11:05:20.178 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:20.178 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 3 AND deleted = 0

2026-01-23 11:05:20.179 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:20.179 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:05:20.182 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:20.183 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 3 AND year = 2026 AND deleted = 0

2026-01-23 11:05:20.183 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 3 year 2026 based on today 2026-01-23
2026-01-23 11:05:20.183 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:20.183 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 3(Long), 2026(Integer)
2026-01-23 11:05:20.187 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:20.187 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 3 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:20.188 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:20.188 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 4(Long)
2026-01-23 11:05:20.192 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:20.192 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 4 AND deleted = 0

2026-01-23 11:05:20.193 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:20.193 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:05:20.196 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:20.197 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 4 AND year = 2026 AND deleted = 0

2026-01-23 11:05:20.197 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 4 year 2026 based on today 2026-01-23
2026-01-23 11:05:20.197 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:20.197 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 4(Long), 2026(Integer)
2026-01-23 11:05:20.203 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:20.203 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 4 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:20.203 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:20.203 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 5(Long)
2026-01-23 11:05:20.224 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:20.224 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 5 AND deleted = 0

2026-01-23 11:05:20.225 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:20.225 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:05:20.229 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:20.229 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 5 AND year = 2026 AND deleted = 0

2026-01-23 11:05:20.229 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 5 year 2026 based on today 2026-01-23
2026-01-23 11:05:20.230 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:20.230 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 5(Long), 2026(Integer)
2026-01-23 11:05:20.239 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:20.240 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 5 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:20.240 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:20.240 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 6(Long)
2026-01-23 11:05:20.250 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:20.250 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 6 AND deleted = 0

2026-01-23 11:05:20.251 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:20.251 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:05:20.269 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:20.270 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 6 AND year = 2026 AND deleted = 0

2026-01-23 11:05:20.270 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 6 year 2026 based on today 2026-01-23
2026-01-23 11:05:20.270 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:20.271 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 6(Long), 2026(Integer)
2026-01-23 11:05:20.275 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:20.275 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 6 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:20.276 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:20.276 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 7(Long)
2026-01-23 11:05:20.283 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:20.283 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 7 AND deleted = 0

2026-01-23 11:05:20.284 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:20.284 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:05:20.296 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:20.296 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 7 AND year = 2026 AND deleted = 0

2026-01-23 11:05:20.296 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 7 year 2026 based on today 2026-01-23
2026-01-23 11:05:20.297 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:20.297 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 7(Long), 2026(Integer)
2026-01-23 11:05:20.303 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:20.303 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 7 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:20.303 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:20.304 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 8(Long)
2026-01-23 11:05:20.309 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:20.309 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 8 AND deleted = 0

2026-01-23 11:05:20.310 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:20.310 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:05:20.315 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:20.315 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 8 AND year = 2026 AND deleted = 0

2026-01-23 11:05:20.316 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 8 year 2026 based on today 2026-01-23
2026-01-23 11:05:20.317 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:20.317 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 8(Long), 2026(Integer)
2026-01-23 11:05:20.322 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:20.322 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 8 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:20.323 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:20.323 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 9(Long)
2026-01-23 11:05:20.328 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:20.328 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 9 AND deleted = 0

2026-01-23 11:05:20.329 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:20.329 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:05:20.336 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:20.336 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 9 AND year = 2026 AND deleted = 0

2026-01-23 11:05:20.336 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 9 year 2026 based on today 2026-01-23
2026-01-23 11:05:20.337 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:20.337 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 9(Long), 2026(Integer)
2026-01-23 11:05:20.343 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:20.343 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 9 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:20.344 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==>  Preparing: SELECT * FROM sys_user WHERE id = ? AND deleted = 0
2026-01-23 11:05:20.344 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - ==> Parameters: 10(Long)
2026-01-23 11:05:20.352 DEBUG c.leave.system.mapper.SysUserMapper.selectUserById - <==      Total: 1
2026-01-23 11:05:20.352 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.SysUserMapper.selectUserById
SQL         : SELECT * FROM sys_user WHERE id = 10 AND deleted = 0

2026-01-23 11:05:20.352 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==>  Preparing: SELECT * FROM leave_account WHERE user_id = ? AND year = ? AND deleted = 0
2026-01-23 11:05:20.352 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:05:20.368 DEBUG c.l.s.m.L.selectAccountByUserIdAndYear - <==      Total: 1
2026-01-23 11:05:20.368 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveAccountMapper.selectAccountByUserIdAndYear
SQL         : SELECT * FROM leave_account WHERE user_id = 10 AND year = 2026 AND deleted = 0

2026-01-23 11:05:20.369 DEBUG com.leave.system.service.impl.LeaveServiceImpl - 🔄 Refreshing account for user 10 year 2026 based on today 2026-01-23
2026-01-23 11:05:20.369 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==>  Preparing: SELECT * FROM leave_record WHERE user_id = ? AND YEAR(start_date) = ? ORDER BY start_date DESC
2026-01-23 11:05:20.369 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - ==> Parameters: 10(Long), 2026(Integer)
2026-01-23 11:05:20.374 DEBUG c.l.s.mapper.LeaveRecordMapper.selectRecordsByYear - <==      Total: 2
2026-01-23 11:05:20.374 INFO  com.leave.system.config.SqlLogInterceptor - ID          : com.leave.system.mapper.LeaveRecordMapper.selectRecordsByYear
SQL         : SELECT * FROM leave_record WHERE user_id = 10 AND YEAR(start_date) = 2026 ORDER BY start_date DESC

2026-01-23 11:05:20.375 INFO  com.leave.system.aspect.WebLogAspect - Response     : {"code":200,"message":"操作成功","data":{"records":[{"id":71,"userId":1,"year":2026,"socialSeniority":6,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":3.0,"deleted":null,"totalBalance":-0.5,"username":"admin","realName":"系统管理员","employeeNumber":"ADMIN001","entryDate":"2020-01-01","records":[{"id":56,"userId":1,"startDate":"2026-12-31","endDate":"2026-12-31","days":-1.5,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":130,"userId":1,"startDate":"2026-01-23","endDate":"2026-01-23","days":-0.5,"type":"ANNUAL","remarks":" (额度透支)","expiryDate":null,"createTime":"2026-01-23T10:51:57","deleted":0},{"id":54,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-1.0,"type":"ADJUSTMENT_DEDUCT","remarks":"额度扣除 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:28","deleted":0},{"id":53,"userId":1,"startDate":"2026-01-08","endDate":"2026-01-08","days":-2.5,"type":"ANNUAL","remarks":"员工请假 (来自结转额度, 过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:41:18","deleted":0},{"id":17,"userId":1,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":72,"userId":2,"year":2026,"socialSeniority":19,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wangjianping","realName":"王建平","employeeNumber":"CBJ-001","entryDate":"2020-02-10","records":[{"id":57,"userId":2,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":18,"userId":2,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":73,"userId":3,"year":2026,"socialSeniority":18,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"wenyongguo","realName":"温永国","employeeNumber":"CBJ-003","entryDate":"2020-03-01","records":[{"id":58,"userId":3,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":19,"userId":3,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":74,"userId":4,"year":2026,"socialSeniority":17,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":12.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xujunyi","realName":"徐君毅","employeeNumber":"CBJ-005","entryDate":"2020-03-16","records":[{"id":59,"userId":4,"startDate":"2026-12-31","endDate":"2026-12-31","days":-12.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":20,"userId":4,"startDate":"2026-01-01","endDate":"2026-01-01","days":12.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":75,"userId":5,"year":2026,"socialSeniority":8,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":-2.0,"currentYearUsed":0,"deleted":null,"totalBalance":1.5,"username":"zhanghao","realName":"张浩","employeeNumber":"CBJ-007","entryDate":"2020-04-01","records":[{"id":55,"userId":5,"startDate":"2026-01-08","endDate":"2026-01-08","days":3.5,"type":"ADJUSTMENT_ADD","remarks":"","expiryDate":"2027-12-31","createTime":"2026-01-08T08:42:17","deleted":0},{"id":21,"userId":5,"startDate":"2026-01-01","endDate":"2026-01-01","days":-2.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":76,"userId":6,"year":2026,"socialSeniority":10,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"zhangjianxin","realName":"张建新","employeeNumber":"CBJ-009","entryDate":"2020-04-13","records":[{"id":60,"userId":6,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":22,"userId":6,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":77,"userId":7,"year":2026,"socialSeniority":9,"standardQuota":5.0,"daysEmployed":23,"actualQuota":0.0,"lastYearBalance":5.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.0,"username":"yuanwei","realName":"袁伟","employeeNumber":"CBJ-010","entryDate":"2020-04-27","records":[{"id":61,"userId":7,"startDate":"2026-12-31","endDate":"2026-12-31","days":-5.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":23,"userId":7,"startDate":"2026-01-01","endDate":"2026-01-01","days":5.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":78,"userId":8,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"yangpanqiang","realName":"杨盼强","employeeNumber":"CBJ-011","entryDate":"2020-04-27","records":[{"id":62,"userId":8,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":24,"userId":8,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":79,"userId":9,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"xinghaibo","realName":"邢海博","employeeNumber":"CBJ-012","entryDate":"2020-06-22","records":[{"id":63,"userId":9,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":25,"userId":9,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]},{"id":80,"userId":10,"year":2026,"socialSeniority":15,"standardQuota":10.0,"daysEmployed":23,"actualQuota":0.5,"lastYearBalance":10.0,"currentYearUsed":0,"deleted":null,"totalBalance":0.5,"username":"jiayulong","realName":"贾玉龙","employeeNumber":"CBJ-014","entryDate":"2020-08-24","records":[{"id":64,"userId":10,"startDate":"2026-12-31","endDate":"2026-12-31","days":-10.0,"type":"EXPIRED","remarks":"年假已过期自动清理 (到期日期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:45:42","deleted":0},{"id":26,"userId":10,"startDate":"2026-01-01","endDate":"2026-01-01","days":10.0,"type":"CARRY_OVER","remarks":"上年结余年假结转 (过期: 2026-12-31)","expiryDate":"2026-12-31","createTime":"2026-01-08T08:38:11","deleted":0}]}],"total":35,"size":10,"current":1,"pages":4}}
